{"name":"Divine Smite - no macro - 10.0.10","type":"spell","img":"icons/skills/melee/weapons-crossed-swords-yellow-teal.webp","effects":[],"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"macro.itemMacro","value":"@target @item.level @item","mode":"+","targetSpecific":false,"id":1,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[]},{"modSpecKey":"macro.tokenMagic","value":"fumes","mode":"+","targetSpecific":false,"id":2,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[],"label":"Macro TokenMagic"}],"equipActive":false,"alwaysActive":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"critRange":{"value":""},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true,"context":""},"quickFlavor":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false}},"favtab":{"isFavourite":true,"isFavorite":true},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Smite","type":"script","author":"Xv8kOpT0YuRo8rso","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"mess":{"templateTexture":""},"dae":{"alwaysActive":false,"activeEquipped":false},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.pJKe8oNZdJSKtbcu"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"exportSource":{"world":"tesira","system":"dnd5e","coreVersion":"9.249","systemVersion":"1.5.7"},"scene-packer":{"hash":"2b56b2adf15c98d8d1079773eb6178eb5cb00cdc","sourceId":"Item.lWNDiUKLFobzgpBe"},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"autoOverride":{"enable":false},"version":2,"audio":{"a01":{"enable":false,"file":"","delay":100,"volume":25},"e01":{"enable":false,"file":"","delay":100,"volume":25}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":true,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 2nd Level, when you hit a creature with a melee weapon Attack, you can expend one spell slot to deal radiant damage to the target, in addition to the weapon’s damage.</p>\n                                                                                                                <p>The extra damage is 2d8 for a 1st-level spell slot, plus 1d8 for each Spell Level higher than 1st, to a maximum of 5d8.</p>\n                                                                                                                <p>The damage increases by 1d8 if the target is an Undead or a fiend, to a maximum of 6d8.</p>\n                                                                                                                <p> </p>\n                                                                                                                <p>This item uses the \"item macro\" feature where the macro that does the rolling is bound to the item. If you want to edit the macro you need to have the item macros module installed, but it is not required to just use the item.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":"[\"undead\", \"fiend\"].includes(raceOrType)"},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":5,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["2d8","radiant"]],"versatile":""},"formula":"1d8[radiant]","save":{"ability":"","dc":99,"scaling":"flat"},"level":1,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"level","formula":"1d8"},"spellType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"concentration":{"value":null,"_deprecated":true},"ritual":{"value":null,"_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926177,"modifiedTime":1663464147865,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"03Ko4gA25r0XHy54"}
{"name":"Aura of Devotion 10.0.10","type":"feat","img":"icons/svg/holy-shield.svg","effects":[{"_id":"ZBApXapUUQs7zxcY","flags":{"dae":{"transfer":true,"stackable":"none","macroRepeat":"none","specialDuration":[],"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":true,"aura":"Allies","radius":10,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"changes":[{"key":"system.traits.ci.value","mode":0,"value":"charmed","priority":0}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/svg/holy-shield.svg","label":"Aura of Devotion","origin":"Actor.FzHGnPGyw01MRHXm.Item.xg9wUjBkucmDonBr","transfer":true,"tint":null}],"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"data.traits.ci.value","value":"charmed","mode":"+","id":0,"itemId":"","active":false}],"alwaysActive":true,"equipActive":false},"dae":{"alwaysActive":true,"activeEquipped":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.aEylhD8RBdXR9eUA"},"scene-packer":{"sourceId":"Item.aEylhD8RBdXR9eUA"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 7th level, you and friendly creatures within 10 feet of you can’t be Charmed while you are conscious.</p>\n<p>At 18th level, the range of this aura increases to 30 feet.</p>\n<p> </p>\n<p>Midi-qol: requires Active Auras to function</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":0,"per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Paladin 7","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926130,"modifiedTime":1663464282899,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"0APm9jLidUGQ6O7y"}
{"name":"Aura of Protection 10.0.10","type":"feat","img":"icons/magic/air/wind-tornado-wall-blue.webp","effects":[{"_id":"9OFOAQENA1VYGc7T","flags":{"ActiveAuras":{"isAura":true,"inactive":false,"aura":"Allies","radius":10,"hidden":false,"height":false,"alignment":"","type":"","ignoreSelf":false,"hostile":false,"onlyOnce":false},"dae":{"stackable":"none","specialDuration":[],"transfer":true,"macroRepeat":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"core":{"statusId":"1"}},"changes":[{"key":"system.bonuses.abilities.save","mode":0,"value":"+@abilities.cha.mod","priority":20},{"key":"macro.tokenMagic","mode":0,"value":"invalid","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/wind-tornado-wall-blue.webp","label":"Aura of Protection","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MyXtCPagugDlf6TQ","tint":null,"transfer":true}],"flags":{"dae":{"migrated":true,"activeEquipped":false,"alwaysActive":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.WiVleJLWZ5UXryDN"},"gm-notes":{},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 6th level, whenever you or a friendly creature within 10 feet of you must make a saving throw, the creature gains a bonus to the saving throw equal to your Charisma modifier (with a minimum bonus of +1). You must be conscious to grant this bonus.</p>\n<p> At 18th level, the range of this aura increases to 30 feet.</p>\n<p> </p>\n<p>Requires Active Auras.</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"none","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 6","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926159,"modifiedTime":1663463837753,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"0MS6Oh6B9yYLUyta"}
{"name":"Melf's Minute Meteors","type":"feat","img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":5,"width":null,"units":"ft","type":"sphere"},"range":{"value":120,"long":null,"units":""},"uses":{"value":60,"max":"60","per":"charges","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d6","fire"]],"versatile":""},"formula":"","save":{"ability":"dex","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"cover":null},"effects":[],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.QCBQB0PKuqyGtQWg"},"cf":{"id":"temp_1xw0kahfmt1"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666092631248,"modifiedTime":1666093325357,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"23LroXlQe4WHF3xb"}
{"name":"Rage 10.0.15","type":"feat","img":"icons/creatures/abilities/mouth-teeth-human.webp","effects":[{"_id":"eWhL8hUr0c2ujDUm","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null},"core":{"statusId":""}},"changes":[{"key":"system.traits.dr.value","mode":2,"value":"slashing","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"piercing","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"bludgeoning","priority":20},{"key":"flags.midi-qol.advantage.ability.save.str","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.advantage.ability.check.str","mode":0,"value":"1","priority":20},{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":10,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/creatures/abilities/mouth-teeth-human.webp","label":"Rage","origin":"Actor.DMTSWfQs8whM5FtE.Item.3YrB0pvLXwJXGGt2","tint":null,"transfer":false}],"flags":{"core":{"sourceId":"Item.C2lYHOGH2UpEifk7"},"exportSource":{"world":"kobold-cauldron","system":"dnd5e","coreVersion":"0.7.7","systemVersion":"1.1.1"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Rage MQ0.8.9","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    const levels = args[0].rollData.classes?.barbarian?.levels ?? 0;\n    if (!levels) return {};\n    if (!args[0].item) return {};\n    const tactor = canvas.tokens.get(args[0].tokenId).actor;\n    const titem = tactor.items.get(args[0].item._id);\n    const rollMod = titem.abilityMod;\n    if (rollMod !== \"str\") return {};\n    const bonus = levels < 9 ? \"2\" : (levels < 16 ? \"3\" : \"4\");\n    return {damageRoll: bonus, flavor: \"Rage Damage\"};\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Rage ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Rage 10.0.15","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.15\";\ntry {\n    const levels = args[0].rollData.classes?.barbarian?.levels ?? 0;\n    if (!levels) return {};\n    if (!args[0].item) return {};\n    const tactor = canvas.tokens.get(args[0].tokenId).actor;\n    const titem = tactor.items.get(args[0].item._id);\n    const rollMod = titem.system.ability;\n    if (rollMod !== \"str\" && !(titem.system.actionType === \"mwak\" && titem.system.ability === \"\")) return {};\n    const bonus = levels < 9 ? \"2\" : (levels < 16 ? \"3\" : \"4\");\n    return {damageRoll: bonus, flavor: \"Rage Damage\"};\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Rage ${version}`, err);\n    return {};\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"favtab":{"isFavorite":false},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"}},"system":{"description":{"value":"<p>In battle, you fight with primal ferocity. On your turn, you can enter a rage as a bonus action. While raging, you gain the following benefits if you aren't wearing heavy armor:</p>\n<ul>\n<li>\n<p>You have advantage on Strength checks and Strength saving throws.</p>\n</li>\n<li>\n<p>When you make a melee weapon attack using Strength, you gain a bonus to the damage roll that increases as you gain levels as a barbarian, as shown in the Rage Damage column of the Barbarian table.</p>\n</li>\n<li>\n<p>You have resistance to bludgeoning, piercing, and slashing damage.</p>\n</li>\n</ul>\n<p>If you are able to cast spells, you can't cast them or concentrate on them while raging. </p>\n<p>Your rage lasts for 1 minute. It ends early if you are knocked unconscious or if your turn ends and you haven't attacked a hostile creature since your last turn or taken damage since then. You can also end your rage on your turn as a bonus action. </p>\n<p>Once you have raged the number of times shown for your barbarian level in the Rages column in the table below, you must finish a long rest before you can rage again.</p>\n<p><em style=\"box-sizing:border-box;user-select:text;color:#191813;font-size:13px\">**Foundry note: Note the limited uses is set to the base default of 2. Please manually adjust as required.</em></p>\n<table style=\"width:286px;height:170px\" border=\"1\">\n<tbody>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\"><strong>Barbarian Level</strong></td>\n<td style=\"width:68px;height:17px\"><strong>Rages</strong></td>\n<td style=\"width:96px;height:17px\"><strong>Rage Damage</strong></td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">1st</td>\n<td style=\"width:68px;height:17px\">2</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">2nd</td>\n<td style=\"width:68px;height:17px\">2</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">3rd</td>\n<td style=\"width:68px;height:17px\">3</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">4th</td>\n<td style=\"width:68px;height:17px\">3</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">5th</td>\n<td style=\"width:68px;height:17px\">3</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">6th</td>\n<td style=\"width:68px;height:17px\">4</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">7th</td>\n<td style=\"width:68px;height:17px\">4</td>\n<td style=\"width:96px;height:17px\">+2</td>\n</tr>\n<tr>\n<td style=\"width:112px\">8th</td>\n<td style=\"width:68px\">4</td>\n<td style=\"width:96px\">+2</td>\n</tr>\n<tr>\n<td style=\"width:112px\">9th</td>\n<td style=\"width:68px\">4</td>\n<td style=\"width:96px\">+3</td>\n</tr>\n<tr>\n<td style=\"width:112px\">10th</td>\n<td style=\"width:68px\">4</td>\n<td style=\"width:96px\">+3</td>\n</tr>\n<tr>\n<td style=\"width:112px\">11th</td>\n<td style=\"width:68px\">4</td>\n<td style=\"width:96px\">+3</td>\n</tr>\n<tr>\n<td style=\"width:112px\">12th</td>\n<td style=\"width:68px\">5</td>\n<td style=\"width:96px\">+3</td>\n</tr>\n<tr>\n<td style=\"width:112px\">13th</td>\n<td style=\"width:68px\">5</td>\n<td style=\"width:96px\">+3</td>\n</tr>\n<tr>\n<td style=\"width:112px\">14th</td>\n<td style=\"width:68px\">5</td>\n<td style=\"width:96px\">+3</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">15th</td>\n<td style=\"width:68px;height:17px\">5</td>\n<td style=\"width:96px;height:17px\">+3</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">16th</td>\n<td style=\"width:68px;height:17px\">5</td>\n<td style=\"width:96px;height:17px\">+4</td>\n</tr>\n<tr>\n<td style=\"width:112px\">17th</td>\n<td style=\"width:68px\">6</td>\n<td style=\"width:96px\">+4</td>\n</tr>\n<tr>\n<td style=\"width:112px\">18th</td>\n<td style=\"width:68px\">6</td>\n<td style=\"width:96px\">+4</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">19th</td>\n<td style=\"width:68px;height:17px\">6</td>\n<td style=\"width:96px;height:17px\">+4</td>\n</tr>\n<tr style=\"height:17px\">\n<td style=\"width:112px;height:17px\">20th</td>\n<td style=\"width:68px;height:17px\">Unlimited</td>\n<td style=\"width:96px;height:17px\">+4</td>\n</tr>\n</tbody>\n</table>\n<p> </p>","chat":"","unidentified":""},"source":"PHB pg. 48","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"2","per":"lr","recovery":"","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Barbarian 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{"amm":false,"fin":false,"fir":false,"foc":false,"hvy":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.287","createdTime":1661995926132,"modifiedTime":1665189122037,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"2W4yoBPFDCBofLji"}
{"name":"Rakish Audacity 10.0.13","type":"feat","img":"icons/skills/melee/strike-dagger-arcane-pink.webp","effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":"none","transfer":true,"specialDuration":["None"],"macroRepeat":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"},"core":{"statusId":""}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":20},{"key":"system.attributes.init.total","mode":2,"value":"@abilities.cha.mod","priority":20},{"key":"system.attributes.init.mod","mode":2,"value":"@abilities.cha.mod","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/melee/strike-dagger-arcane-pink.webp","label":"Rakish Audacity","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.qgNwoSwmcF8DkhNy","tint":null,"transfer":true}],"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Rakish Audacity","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].itemData.data.actionType)) return {}; // weapon attack\n    if (args[0].hitTargets.length < 1) return;\n    MidiQOL.warn(`Checking sneak attack for ${args[0].actor.name}`);\n    if (args[0].itemData.data.actionType === \"mwak\" && !args[0].itemData.data.properties?.fin) return {}; // ranged or finesse\n    token = canvas.tokens.get(args[0].tokenId);\n    actor = token.actor;\n    const rogueLevels = actor.getRollData().classes.rogue?.levels;\n    if (!rogueLevels) {\n      MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n      return {}; // rogue only\n    }\n    let target = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\n    \n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime === lastTime) {\n       MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n       return {};\n      }\n    }\n    let isSneak = args[0].advantage;\n    let foundEnemy = true; // used to flag if hostile or neutrals surround target\n    if (!isSneak) {\n      foundEnemy = false;\n      let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n        let nearby = (t.actor &&\n             t.actor?.id !== args[0].actor._id && // not me\n             t.id !== target.id && // not the target\n             t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n             t.data.disposition !== target.data.disposition && // not an ally\n             MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n         );\n    \n        foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n        return nearby;\n      });\n      isSneak = nearbyEnemy.length>0;\n    }\n    if (!isSneak) {    // rakish audactity checkNearby\n        let totalNearbyToMe = MidiQOL.findNearby(null, token, 5, 9).length;\n        let distanceToTarget = MidiQOL.getDistance(target,token, false);\n        const rakish = !args[0].disadvantage && totalNearbyToMe === 1 && distanceToTarget <= 5;\n        if (rakish) {\n            foundEnemy = true; // don't display the neutrals warning\n            isSneak = true;\n        }\n    }\n    if (!isSneak) {\n        MidiQOL.warn(`${args[0].name} Not a sneak attack`);\n        return {};\n    }\n    let useSneak = getProperty(actor.data, \"flags.dae.autoSneak\");\n    if (!useSneak) {\n        let dialog = new Promise((resolve, reject) => {\n          new Dialog({\n          // localize this text\n          title: \"Conditional Damage\",\n          content: `<p>Use Sneak attack?</p>` + (!foundEnemy?\"<p> Only Nuetral creatures nearby</p>\":\"\"),\n          buttons: {\n              one: {\n                  icon: '<i class=\"fas fa-check\"></i>',\n                  label: \"Confirm\",\n                  callback: () => resolve(true)\n              },\n              two: {\n                  icon: '<i class=\"fas fa-times\"></i>',\n                  label: \"Cancel\",\n                  callback: () => {resolve(false)}\n              }\n          },\n          default: \"two\"\n          }).render(true);\n        });\n        useSneak = await dialog;\n    }\n    if (!useSneak) return {}\n    const diceMult = args[0].isCritical ? 2: 1;\n    const baseDice = Math.ceil(rogueLevels/2);\n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime !== lastTime) {\n         await actor.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n      }\n    }\n    \n    // How to check that we've already done one this turn?\n    return {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};\n}  catch (err) {\n    console.error(`${args[0].itemData.name} - Rakish Audacity ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Rakish Audacity 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].itemData.system.actionType)) return {}; // weapon attack\n    if (args[0].hitTargets.length < 1) return;\n    MidiQOL.warn(`Checking sneak attack for ${args[0].actor.name}`);\n    if (args[0].itemData.system.actionType === \"mwak\" && !args[0].itemData.system.properties?.fin) return {}; // ranged or finesse\n    token = canvas.tokens.get(args[0].tokenId);\n    actor = token.actor;\n    const rogueLevels = actor.getRollData().classes.rogue?.levels;\n    if (!rogueLevels) {\n      MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n      return {}; // rogue only\n    }\n    let target = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\n    \n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime === lastTime) {\n       MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n       return {};\n      }\n    }\n    let isSneak = args[0].advantage;\n    let foundEnemy = true; // used to flag if hostile or neutrals surround target\n    if (!isSneak) {\n      foundEnemy = false;\n      let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n        let nearby = (t.actor &&\n             t.actor?.id !== args[0].actor._id && // not me\n             t.id !== target.id && // not the target\n             t.actor?.system.attributes?.hp?.value > 0 && // not incapacitated\n             t.document.disposition !== target.document.disposition && // not an ally\n             MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n         );\n    \n        foundEnemy = foundEnemy || (nearby && t.document.disposition === -target.document.disposition)\n        return nearby;\n      });\n      isSneak = nearbyEnemy.length>0;\n    }\n    if (!isSneak) {    // rakish audactity checkNearby\n        let totalNearbyToMe = MidiQOL.findNearby(null, token, 5, 9).length;\n        let distanceToTarget = MidiQOL.getDistance(target,token, false);\n        const rakish = !args[0].disadvantage && totalNearbyToMe === 1 && distanceToTarget <= 5;\n        if (rakish) {\n            foundEnemy = true; // don't display the neutrals warning\n            isSneak = true;\n        }\n    }\n    if (!isSneak) {\n        MidiQOL.warn(`${args[0].name} Not a sneak attack`);\n        return {};\n    }\n    let useSneak = getProperty(actor, \"flags.dae.autoSneak\");\n    if (!useSneak) {\n        let dialog = new Promise((resolve, reject) => {\n          new Dialog({\n          // localize this text\n          title: \"Conditional Damage\",\n          content: `<p>Use Sneak attack?</p>` + (!foundEnemy?\"<p> Only Nuetral creatures nearby</p>\":\"\"),\n          buttons: {\n              one: {\n                  icon: '<i class=\"fas fa-check\"></i>',\n                  label: \"Confirm\",\n                  callback: () => resolve(true)\n              },\n              two: {\n                  icon: '<i class=\"fas fa-times\"></i>',\n                  label: \"Cancel\",\n                  callback: () => {resolve(false)}\n              }\n          },\n          default: \"two\"\n          }).render(true);\n        });\n        useSneak = await dialog;\n    }\n    if (!useSneak) return {}\n    const diceMult = args[0].isCritical ? 2: 1;\n    const baseDice = Math.ceil(rogueLevels/2);\n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime !== lastTime) {\n         await actor.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n      }\n    }\n    \n    // How to check that we've already done one this turn?\n    return {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};\n}  catch (err) {\n    console.error(`${args[0].itemData.name} - Rakish Audacity ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.FkeL8Qyuy8EE8oGD"},"favtab":{"isFavorite":false},"betterRolls5e":{"critRange":{"value":null,"type":"String"},"critDamage":{"value":"","type":"String"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickOther":{"value":true,"altValue":true,"type":"Boolean","context":""},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":false},"altValue":{"use":true,"resource":true,"charge":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":""},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"mre-dnd5e":{"formulaGroups":[{"label":"Primary","formulaSet":[]}]}},"system":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p><p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't <a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p><p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p><p></p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926127,"modifiedTime":1664951109085,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"2b8QfWoQpnBXNBwG"}
{"name":"Arcane Ward - Resource Usage 10.0.10","type":"feat","flags":{"scene-packer":{"hash":"2a30c1e35005ae7aeead7968f2e2b423bf29fc2e","sourceId":"Item.L7JORN34gxsra56h"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Arcane Ward","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const wardFlagName = \"Arcane Ward Details\";\nasync function updateActorResource(actor, wardStrength, wardStrengthMax) {\n\tlet {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\tif (!wardStrengthField || !wardStrengthMaxField) return;\n\tactorUpdate = {};\n\tactorUpdate[wardStrengthField] = wardStrength;\n\tactorUpdate[wardStrengthMaxField] = wardStrengthMax;\n\treturn actor.update(actorUpdate)\n}\nasync function setWardFieldNames(item) {\n\tconst consumeTargetField = `data.${item.data.data.consume.target ?? \"\"}`;\n\tconst maxField = consumeTargetField.replace(\".value\", \".max\");\n\treturn item.parent.setFlag(\"midi-qol\", wardFlagName, {\n\t\twardStrengthField: consumeTargetField,\n\t\twardStrengthMaxField: maxField\n\t})\n}\nfunction getWardFieldNames(actor) {\n\treturn actor.getFlag(\"midi-qol\", wardFlagName) ?? {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n}\nfunction getWardValue(actor) {\n\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\tif (!wardStrengthField || !wardStrengthMaxField) \n\t\treturn {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n\treturn {\n\t\twardStrength: getProperty(item.parent.data, wardStrengthField),\n\t\twardStrengthMax: getProperty(item.parent.data, wardStrengthMaxField)\n\t}\n}\n\nif (args[0] === \"on\") {\n\tconst lastArg = args[args.length - 1];\n\tconst item = await fromUuid(lastArg.origin);\n\tconst actor = item.parent;\n\tconst wardStrengthMax = args[1] * 2 + args[2];\n\tif (Number(args[1]) === 0 && Number(args[2]) === 0) return;\n\tconst speaker = ChatMessage.getSpeaker({ actor });\n\tChatMessage.create({ content: `${item.name} strength ${wardStrengthMax} created`, speaker });\n\tawait setWardFieldNames(item);\n\treturn updateActorResource(item.actor, wardStrengthMax, wardStrengthMax);\n} else if (args[0] === \"off\") {\n\tconst lastArg = args[args.length - 1];\n\tconst item = await fromUuid(lastArg.origin);\n\tconst actor = await fromUuid(lastArg.actorUuid);\n\tconst speaker = ChatMessage.getSpeaker({ actor });\n\tChatMessage.create({ content: `${item.name} dismissed`, speaker });\n\tawait updateActorResource(item.actor, 0, 0);\n\treturn item.actor.unsetFlag(\"midi-qol\", wardFlagName)\n} else if (\n\targs[0].macroPass === \"postActiveEffects\" &&\n\targs[0].itemData?.data.school === \"abj\" &&\n\targs[0].itemData?.data.level > 0) {\n\tlet { wardStrength, wardStrengthMax } = getWardValue(actor);\n\tif (wardStrengthMax === undefined) return;\n\tlet newWardStrength = Math.min(wardStrength + args[0].spellLevel * 2, wardStrengthMax);\n\tconst speaker = ChatMessage.getSpeaker({ actor });\n\tChatMessage.create({\n\t\tcontent: `${args[0].itemData.name} gains ${args[0].spellLevel * 2} points to ${newWardStrength}/${wardStrengthMax}`,\n\t\tspeaker,\n\t});\n\tif (wardStrength !== newWardStrength) {\n\t\tawait updateActorResource(actor, newWardStrength, wardStrengthMax);\n\t}\n} else if (args[0] === \"onUpdateActor\") {\n\tconst lastArg = args[args.length - 1];\n\tlet newHP = getProperty(lastArg.updates, \"data.attributes.hp.value\");\n\tlet oldHP = lastArg.targetActor.data.data.attributes.hp.value;\n\tif (newHP && oldHP && newHP < oldHP) {\n\t\tconst damage = oldHP - newHP;\n\t\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(lastArg.sourceActor);\n\t\tif (!wardStrengthField) return;\n\t\tlet { wardStrengthMax, wardStrength } = getWardValue(actor);\n\t\tif (wardStrengthMax === undefined) return;\n\t\tconst absorbed = Math.min(damage, wardStrength ?? 0);\n\t\tif (absorbed) {\n\t\t\tnewHP = newHP + absorbed;\n\t\t\tconst speaker = ChatMessage.getSpeaker({ actor: lastArg.targetActor });\n\t\t\tChatMessage.create({\n\t\t\t\tcontent: `${lastArg.originItem.name} absorbs ${absorbed} of ${damage} points of damage.<br> Hp -> ${newHP}<br>Wardstrength -> ${wardStrength - absorbed}`,\n\t\t\t\tspeaker\n\t\t\t});\n\t\t\tlastArg.updates.data.attributes.hp.value = newHP;\n\t\t\tif (wardStrengthField !== \"\") { // assume the target is a resource\n\t\t\t\tsetProperty(lastArg.updates, wardStrengthField, wardStrength - absorbed );\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Arcane Ward - Resource Usage 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.8\";\ntry {\n\tconst wardFlagName = \"Arcane Ward Details\";\n\tasync function updateActorResource(actor, wardStrength, wardStrengthMax) {\n\t\tlet {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\t\tif (!wardStrengthField || !wardStrengthMaxField) return;\n\t\tactorUpdate = {};\n\t\tactorUpdate[wardStrengthField] = wardStrength;\n\t\tactorUpdate[wardStrengthMaxField] = wardStrengthMax;\n\t\treturn actor.update(actorUpdate)\n\t}\n\tasync function setWardFieldNames(item) {\n\t\tconst consumeTargetField = `system.${item.system.consume.target ?? \"\"}`;\n\t\tconst maxField = consumeTargetField.replace(\".value\", \".max\");\n\t\treturn item.parent.setFlag(\"midi-qol\", wardFlagName, {\n\t\t\twardStrengthField: consumeTargetField,\n\t\t\twardStrengthMaxField: maxField\n\t\t})\n\t}\n\tfunction getWardFieldNames(actor) {\n\t\treturn actor.getFlag(\"midi-qol\", wardFlagName) ?? {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n\t}\n\tfunction getWardValue(actor) {\n\t\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\t\tif (!wardStrengthField || !wardStrengthMaxField) \n\t\t\treturn {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n\t\treturn {\n\t\t\twardStrength: getProperty(item.parent, wardStrengthField),\n\t\t\twardStrengthMax: getProperty(item.parent, wardStrengthMaxField)\n\t\t}\n\t}\n\n\tif (args[0] === \"on\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst item = await fromUuid(lastArg.origin);\n\t\tconst actor = item.parent;\n\t\tconst wardStrengthMax = args[1] * 2 + args[2];\n\t\tif (Number(args[1]) === 0 && Number(args[2]) === 0) return;\n\t\tconst speaker = ChatMessage.getSpeaker({ actor });\n\t\tChatMessage.create({ content: `${item.name} strength ${wardStrengthMax} created`, speaker });\n\t\tawait setWardFieldNames(item);\n\t\treturn updateActorResource(item.actor, wardStrengthMax, wardStrengthMax);\n\t} else if (args[0] === \"off\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst item = await fromUuid(lastArg.origin);\n\t\tconst actor = await fromUuid(lastArg.actorUuid);\n\t\tconst speaker = ChatMessage.getSpeaker({ actor });\n\t\tChatMessage.create({ content: `${item.name} dismissed`, speaker });\n\t\tawait updateActorResource(item.actor, 0, 0);\n\t\treturn item.actor.unsetFlag(\"midi-qol\", wardFlagName)\n\t} else if (\n\t\targs[0].macroPass === \"postActiveEffects\" &&\n\t\targs[0].itemData?.system.school === \"abj\" &&\n\t\targs[0].itemData?.system.level > 0) {\n\t\tlet { wardStrength, wardStrengthMax } = getWardValue(actor);\n\t\tif (wardStrengthMax === undefined) return;\n\t\tlet newWardStrength = Math.min(wardStrength + args[0].spellLevel * 2, wardStrengthMax);\n\t\tconst speaker = ChatMessage.getSpeaker({ actor });\n\t\tChatMessage.create({\n\t\t\tcontent: `${args[0].itemData.name} gains ${args[0].spellLevel * 2} points to ${newWardStrength}/${wardStrengthMax}`,\n\t\t\tspeaker,\n\t\t});\n\t\tif (wardStrength !== newWardStrength) {\n\t\t\tawait updateActorResource(actor, newWardStrength, wardStrengthMax);\n\t\t}\n\t} else if (args[0] === \"onUpdateActor\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tlet newHP = getProperty(lastArg.updates, \"system.attributes.hp.value\");\n\t\tlet oldHP = lastArg.targetActor.system.attributes.hp.value;\n\t\tif (newHP && oldHP && newHP < oldHP) {\n\t\t\tconst damage = oldHP - newHP;\n\t\t\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(lastArg.sourceActor);\n\t\t\tif (!wardStrengthField) return;\n\t\t\tlet { wardStrengthMax, wardStrength } = getWardValue(actor);\n\t\t\tif (wardStrengthMax === undefined) return;\n\t\t\tconst absorbed = Math.min(damage, wardStrength ?? 0);\n\t\t\tif (absorbed) {\n\t\t\t\tnewHP = newHP + absorbed;\n\t\t\t\tconst speaker = ChatMessage.getSpeaker({ actor: lastArg.targetActor });\n\t\t\t\tChatMessage.create({\n\t\t\t\t\tcontent: `${lastArg.originItem.name} absorbs ${absorbed} of ${damage} points of damage.<br> Hp -> ${newHP}<br>Wardstrength -> ${wardStrength - absorbed}`,\n\t\t\t\t\tspeaker\n\t\t\t\t});\n\t\t\t\tlastArg.updates.system.attributes.hp.value = newHP;\n\t\t\t\tif (wardStrengthField !== \"\") { // assume the target is a resource\n\t\t\t\t\tsetProperty(lastArg.updates, wardStrengthField, wardStrength - absorbed );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n} catch (err) {\n    console.error(`Arcane Ward (Resouce Consumption) ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.uPACrUoblqkB7daH"},"cf":{"id":"temp_qt0kn9os0vl"},"exportSource":{"world":"testWorld16","system":"dnd5e","coreVersion":"9.280","systemVersion":"1.6.3"}},"img":"icons/magic/control/debuff-chains-ropes-net-white.webp","system":{"description":{"value":"<p>Starting at 2nd level, you can weave magic around yourself for protection. When you cast an abjuration spell of 1st level or higher, you can simultaneously use a strand of the spell's magic to create a magical ward on yourself that lasts until you finish a long rest. The ward has hit points equal to twice your wizard level + your Intelligence modifier. Whenever you take damage, the ward takes the damage instead. If this damage reduces the ward to 0 hit points, you take any remaining damage.</p><p>While the ward has 0 hit points, it can't absorb damage, but its magic remains. Whenever you cast an abjuration spell of 1st level or higher, the ward regains a number of hit points equal to twice the level of the spell.</p><p>Once you create the ward, you can't create it again until you finish a long rest.</p><p> </p><p>Midi-qol: This version does not use temphp and <strong>you must configure the resource to use</strong> on first equipping the item.</p><p><strong>You can rename the item once equipped to Arcane Ward</strong></p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":1,"max":"1","per":"lr"},"consume":{"type":"attribute","target":"","amount":0},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":0},"effects":[{"_id":"8w2x8zztauaqzd1l","changes":[{"key":"macro.itemMacro","mode":0,"value":"@classes.wizard.levels  @abilities.int.mod","priority":20},{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Arcane Ward, postActiveEffects","priority":20},{"key":"flags.dae.onUpdateTarget","mode":0,"value":"Arcane Link, ItemMacro, system.attributes.hp.value","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/debuff-chains-ropes-net-white.webp","label":"Arcane Ward","origin":"Actor.6DHUnnnzFTYHWI7I.Item.uPACrUoblqkB7daH","transfer":false,"flags":{"core":{"statusId":"1"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["longRest"],"transfer":false,"selfTarget":false,"selfTargetAlways":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1663156100275,"modifiedTime":1663463828954,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"5QHFPKfJAJSCfVR7"}
{"name":"#[CF_tempEntity]","type":"weapon","flags":{"cf":{"id":"temp_1xw0kahfmt1","name":"Features","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"a","contents":["RgscVLVsD326Yipj","lw8A7EQPelerNnsG","iKXHFsx31DC3o232","dehZbfvDLvSUscOu","ezDSN0zncAUljyYI","tgDBaKnQRovy120f","yhfoAjugVP69EdDZ","EEGd0jnuzs4FoyMw","23LroXlQe4WHF3xb"],"children":[],"folderPath":[],"version":"2.5.3"}},"img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1663463581903,"modifiedTime":1666093316336,"lastModifiedBy":"devnIbfBHb74U9Zv"},"_id":"5igvZhtK85XlDXHw"}
{"name":"#[CF_tempEntity]","type":"weapon","flags":{"cf":{"id":"temp_0hvf80hl1zcf","name":"Spells","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"a","contents":["dXmVmtPohHzYhEWp","BmSw2Vb5cRhOBDbE","VmwMXyNu0BE5P6C7","MtdPTTmN0na7elrI","rQ3a8hG5QFu6qf3c","7uBHurpp3spQ25lr","j6DvIGfnVkRU6gto","gQ4yXqFH9udMdKYV","ywq9dJw3L5ZWGvyk","RYZnPWPysKFfJsAY","XPrZdRF3yPlULvjd","CRZ8RNYhMhdFVrvI","CkcgwMkAtXNmItB6","X2gVj3jeAI1sDz54","HoC5exSL0tAHNhRT","hVQJeyInr2VJSv6M","jpzT178NqFkwfR8h","qyj41L52x2OjBEDZ"],"children":[],"folderPath":[],"version":"2.5.3"}},"img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1663463587929,"modifiedTime":1666093302599,"lastModifiedBy":"devnIbfBHb74U9Zv"},"_id":"6ZUR8H78fEKvk90p"}
{"name":"Aura of Courage 10.0.10","type":"feat","img":"icons/magic/light/explosion-beam-impact-silhouette.webp","effects":[{"_id":"TJteucmq1pmKCCkc","changes":[{"key":"system.traits.ci.value","mode":2,"value":"frightened","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/explosion-beam-impact-silhouette.webp","label":"Aura of Courage","origin":"Item.TD7s9EYoA6Bg5mdp","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":true,"aura":"All","radius":10,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.TD7s9EYoA6Bg5mdp"},"scene-packer":{"sourceId":"Item.kpgiUAoyLfvKtbaY"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 10th level, you and friendly creatures within 10 feet of you can't be frightened while you are conscious.</p>\n<p>At 18th level, the range of this aura increases to 30 feet.</p>\n<p>Midi-qol: requires Active Auras to function</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":null,"type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":0,"per":"","type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 10","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926113,"modifiedTime":1663464284046,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"6b9JMxuKRPHHVA0a"}
{"name":"Auto Sneak Attack 10.0.10","type":"feat","img":"icons/skills/melee/strike-dagger-arcane-pink.webp","effects":[{"_id":"B9dVucVVEOX26bAy","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":true,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"changes":[{"key":"flags.dae","mode":0,"value":"autoSneak 1","priority":10}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/melee/strike-dagger-arcane-pink.webp","label":"Auto Sneak Attack","origin":"Item.Dnn0xuVqFSATQipk","tint":null,"transfer":true}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}},"core":{"sourceId":"Compendium.midi-qol.midiqol-sample-items.uvRQayOyn61L6vOV"}},"system":{"description":{"value":"<p>Adding this feature to an actor will cause Sneak Attack to be auto used at the first opportunity, rather than showing a confirmation dialog.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926180,"modifiedTime":1664951176051,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"6gEABXOHBSJzORuf"}
{"name":"Chill Touch 10.0.12","type":"spell","system":{"description":{"value":"<p>You create a ghostly, skeletal hand in the space of a creature within range. Make a ranged spell attack against the creature to assail it with the chill of the grave. On a hit, the target takes 1d8 Necrotic damage, and it can't regain hit points until the start of your next turn. Until then, the hand clings to the target.</p><p>If you hit an undead target, it also has disadvantage on attack rolls against you until the end of your next turn.</p><p>This spell's damage increases by 1d8 when you reach 5th level (2d8), 11th level (3d8), and 17th level (4d8).</p><p></p><p>Midi-qol: two effects are created since they expire at different times</p>","chat":"","unidentified":""},"source":"PHB pg. 221","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"round"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":120,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rsak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8","necrotic"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":0,"school":"nec","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"cantrip","formula":""}},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.vrN18tbTw7io5MWd"},"midi-qol":{"fumbleThreshold":null,"effectActivation":true},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"cf":{"id":"temp_0hvf80hl1zcf"}},"img":"icons/magic/water/projectile-ice-faceted-blue.webp","effects":[{"label":"Chill Touch","icon":"icons/magic/water/projectile-ice-faceted-blue.webp","origin":"Actor.iO04pmtZ0N3gTAk9.Item.kBdike3EFVRSdeLp","duration":{"rounds":2,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"fLDUdp710OrGuQKT","changes":[{"key":"flags.midi-qol.disadvantage.attack.mwak","mode":0,"value":"targetId === \"@token\" && details.type.value === \"undead\"","priority":20}],"tint":null,"transfer":false,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnEndSource"]},"core":{"statusId":""}}},{"label":"Chill Touch","icon":"icons/magic/water/projectile-ice-faceted-blue.webp","origin":"Actor.iO04pmtZ0N3gTAk9.Item.kBdike3EFVRSdeLp","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":2,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"u1vxcPNPV0mLIfXo","changes":[{"key":"system.traits.dr.value","mode":2,"value":"healing","priority":20}],"tint":null,"transfer":false,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStartSource"]},"core":{"statusId":""}}}],"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661787234237,"modifiedTime":1664949511548,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"7uBHurpp3spQ25lr"}
{"name":"Acid Arrow 10.0.10","type":"spell","img":"icons/magic/acid/projectile-bolts-salvo-green.webp","effects":[{"_id":"3Cn2AvsfGx5SQrNY","changes":[{"key":"flags.midi-qol.OverTime","mode":2,"value":"turn=end,\nremoveCondition=true,\ndamageRoll=(@spellLevel)d4,\ndamageType=acid,\nlabel=Acid Arrow","priority":20}],"disabled":false,"duration":{"rounds":2,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/acid/projectile-bolts-salvo-green.webp","label":"Acid Damage","origin":"Item.pn0iWVSSFz1uy4VV","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.4H6YgYdKgnX6ZQ8M"},"midi-qol":{"criticalThreshold":"20","onUseMacroName":"","effectActivation":false,"fumbleThreshold":null},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>A shimmering green arrow streaks toward a target within range and bursts in a spray of acid. Make a ranged spell Attack against the target. On a hit, the target takes 4d4 acid damage immediately and 2d4 acid damage at the end of its next turn. On a miss, the arrow splashes the target with acid for half as much of the initial damage and no damage at the end of its next turn.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage (both initial and later) increases by 1d4 for each slot level above 2nd.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rsak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["4d4","acid"]],"versatile":"2d4"},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"powdered rhubarb leaf and an adder's stomach","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d4"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926171,"modifiedTime":1663463727562,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"BmSw2Vb5cRhOBDbE"}
{"name":"Invisibility 10.0.10 - Core","type":"spell","img":"icons/magic/air/fog-gas-smoke-dense-gray.webp","effects":[{"_id":"GoUSbGdrl7G0I89N","flags":{"dae":{"stackable":"none","specialDuration":["1Attack","1Spell"],"macroRepeat":"none","transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null},"core":{"statusId":""}},"changes":[{"key":"StatusEffect","mode":0,"value":"invisible","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/fog-gas-smoke-dense-gray.webp","label":"Invisible","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MtbkgRT7nopCAnpB","tint":null,"transfer":false}],"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.MtbkgRT7nopCAnpB"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p><p data-pm-slice=\"1 1 []\">* This version of  Invisibility uses the core Invisible status effect and interacts with foundry vision modes</p>","chat":"","unidentified":""},"source":"PHB pg. 254","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"ill","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An eyelash encased in gum arabic","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926126,"modifiedTime":1663463713438,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"CRZ8RNYhMhdFVrvI"}
{"name":"Shillelagh 10.0.13","type":"spell","img":"icons/magic/fire/dagger-rune-enchant-teal.webp","effects":[{"_id":"x3I3PP0wLDynd8JN","flags":{"dae":{"transfer":false,"stackable":false,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"macro.itemMacro","value":"","mode":0,"priority":0}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/fire/dagger-rune-enchant-teal.webp","label":"Shillelagh","origin":"Actor.ZaVJJWXkzU603fLE.Item.vtUhpbyJYzB2J9ok","tint":null,"transfer":false}],"flags":{"dynamiceffects":{"equipActive":false,"alwaysActive":false,"effects":[{"modSpecKey":"macro.execute","value":"Shillelagh @target","mode":"+","targetSpecific":false,"id":1,"itemId":"HgYH1Eb3LQ19tsjJ","active":true,"_targets":[],"label":"Macro Execute"}]},"itemacro":{"macro":{"data":{"_id":null,"name":"Shillelagh","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length - 1];\nlet tactor;\ntactor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\nlet weapons = tactor.items.filter(i => i.data.type === `weapon`);\nlet weapon_content = ``;\n\nfor (let weapon of weapons) {\n    weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n}\nif (args[0] === \"on\") {\n    let content = `\n<div class=\"form-group\">\n  <label>Weapons : </label>\n  <select name=\"weapons\">\n    ${weapon_content}\n  </select>\n</div>`;\n\n    new Dialog({\n        title: \"Choose a club or quarterstaff\",\n        content,\n        buttons:\n        {\n            Ok:\n            {\n                label: `Ok`,\n                callback: (html) => {\n                    let itemId = html.find('[name=weapons]')[0].value;\n                    let weaponItem = tactor.items.get(itemId);\n                    let copy_item = duplicate(weaponItem.toObject());\n                    DAE.setFlag(tactor, `shillelagh`, {\n                        id : itemId,\n                        damage : copy_item.data.damage.parts[0][0]    \n                    });\n                    let damage = copy_item.data.damage.parts[0][0];\n                    var newdamage = damage.replace(/1d(4|6)/g,\"1d8\");\n                    copy_item.data.damage.parts[0][0] = newdamage;\n                    copy_item.data.ability = \"wis\";\n                    tactor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n                    ChatMessage.create({content: copy_item.name + \" is empowered\"});\n                }\n            },\n            Cancel:\n            {\n                label: `Cancel`\n            }\n        }\n    }).render(true);\n}\n\nif (args[0] === \"off\") {\n    let flag = DAE.getFlag(tactor, `shillelagh`);\n    let weaponItem = tactor.items.get(flag.id);\n    let copy_item = duplicate(weaponItem.toObject());\n    copy_item.data.damage.parts[0][0] = flag.damage;\n    copy_item.data.ability = \"\";\n    await tactor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n    DAE.unsetFlag(tactor, `shillelagh`);\n    ChatMessage.create({content: copy_item.name + \" returns to normal\"});\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Shillelagh 10.0.13","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.13\";\ntry {\n    const lastArg = args[args.length - 1];\n    let weapons = actor.items.filter(i => i.type === `weapon` && [\"club\",\"quarterstaff\"].includes(i.system.baseItem));\n    let weapon_content = ``;\n    for (let weapon of weapons) {\n        weapon_content += `<option value=${weapon.id}>${weapon.name}</option>`;\n    }\n    if (args[0] === \"on\") {\n        let content = `\n    <div class=\"form-group\">\n    <label>Weapons : </label>\n    <select name=\"weapons\">\n        ${weapon_content}\n    </select>\n    </div>`;\n\n        new Dialog({\n            title: \"Choose a club or quarterstaff\",\n            content,\n            buttons:\n            {\n                Ok:\n                {\n                    label: `Ok`,\n                    callback: (html) => {\n                        let itemId = html.find('[name=weapons]')[0].value;\n                        let weaponItem = actor.items.get(itemId);\n                        let copy_item = duplicate(weaponItem.toObject(false));\n                        DAE.setFlag(actor, `shillelagh`, {\n                            id : itemId,\n                            damage : copy_item.system.damage.parts[0][0]    \n                        });\n                        let damage = copy_item.system.damage.parts[0][0];\n                        var newdamage = damage.replace(/1d(4|6)/g,\"1d8\");\n                        copy_item.system.damage.parts[0][0] = newdamage;\n                        copy_item.system.ability = \"wis\";\n                        actor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n                        ChatMessage.create({content: copy_item.name + \" is empowered\"});\n                    }\n                },\n                Cancel:\n                {\n                    label: `Cancel`\n                }\n            }\n        }).render(true);\n    }\n\n    if (args[0] === \"off\") {\n        let flag = DAE.getFlag(actor, `shillelagh`);\n        let weaponItem = actor.items.get(flag.id);\n        let copy_item = duplicate(weaponItem.toObject(false));\n        copy_item.system.damage.parts[0][0] = flag.damage;\n        copy_item.system.ability = \"\";\n        await actor.updateEmbeddedDocuments(\"Item\", [copy_item]);\n        DAE.unsetFlag(actor, `shillelagh`);\n        ChatMessage.create({content: copy_item.name + \" returns to normal\"});\n    }\n} catch (err)  {\n    console.error(`Shillelagh ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"dae":{"migrated":true},"favtab":{"isFavorite":true},"core":{"sourceId":"Item.qUrSuOAn8P3c9Jue"},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{},"autoOverride":{"enable":false},"version":4,"audio":{"a01":{"enable":false,"file":"","delay":0,"volume":0.25},"e01":{"enable":false,"file":"","delay":0,"volume":0.25}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>The wood of a club or quarterstaff you are holding is imbued with nature's power. For the duration, you can use your spellcasting ability instead of Strength for the attack and damage rolls of melee attacks using that weapon, and the weapon's damage die becomes a d8. The weapon also becomes magical, if it isn't already. The spell ends if you cast it again or if you let go of the weapon.</p>","chat":"","unidentified":""},"source":"PHB pg. 275","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":0,"school":"trs","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"A shamrock leaf, and a club or quarterstaff","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926154,"modifiedTime":1664797663756,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"CkcgwMkAtXNmItB6"}
{"name":"Bracers of Archery 10.0.10","type":"equipment","img":"icons/equipment/wrist/bracer-studded-leather-steel.webp","effects":[{"_id":"5YQAiFBcKFBjPEnq","flags":{"dae":{"stackable":"none","transfer":true,"durationExpression":"","macroRepeat":"none","specialDuration":[],"selfTarget":false,"selfTargetAlways":false},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"changes":[{"key":"system.bonuses.rwak.damage","mode":0,"value":"+2","priority":20},{"key":"system.traits.weaponProf.value","mode":2,"value":"shortbow","priority":20},{"key":"system.traits.weaponProf.value","mode":2,"value":"longbow","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/equipment/wrist/bracer-studded-leather-steel.webp","label":"Bracers of Archery","tint":null,"transfer":true,"origin":null}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"dae":{"activeEquipped":false,"alwaysActive":false},"core":{"sourceId":"Item.93tqVAgnT6DsLnjy"},"scene-packer":{"sourceId":"Item.2l5MeYXc7ErrgZuQ","hash":"bf34b626cf968227dcc074f2868bd6a7a2f3c253"},"exportSource":{"world":"tp-game-v3","system":"dnd5e","coreVersion":"9.249","systemVersion":"1.5.7"},"cf":{"id":"temp_mxc6kjqa6kp"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}}},"system":{"description":{"value":"<p><em>Wondrous item, (requires attunement)</em></p>\n<p>While wearing these bracers, you have proficiency with the longbow and shortbow, and you gain a +2 bonus to damage rolls on ranged attacks made with such weapons.</p>","chat":"","unidentified":""},"source":"DMG pg. 156","quantity":1,"weight":1,"price":1500,"attunement":1,"equipped":false,"rarity":"uncommon","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":0,"per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":0,"type":"clothing","dex":0},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"baseItem":"","speed":{"value":null,"conditions":""},"strength":0,"stealth":false,"proficient":true},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926173,"modifiedTime":1663463750521,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"CuKqUiDnZGQQ7bx0"}
{"name":"Simple Warding Bond 10.0.10","type":"feat","img":"icons/magic/perception/hand-eye-pink.webp","effects":[{"_id":"641jjthgcxdjm49w","changes":[{"key":"flags.dae.onUpdateSource","mode":0,"value":"Acrane Link, ItemMacro, data.attributes.hp.value","priority":20},{"key":"flags.dae.onUpdateTarget","mode":0,"value":"Arcane Link, ItemMacro, data.attributes.hp.value","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/svg/item-bag.svg","label":"Simple Warding Bond","origin":"Actor.DMTSWfQs8whM5FtE.Item.lcBL177NJNxrWaSZ","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"scene-packer":{"hash":"89852a0a8d4947af285b736eac9b67787c99ef65","sourceId":"Item.xqq7JOAINdV0ieLc"},"favtab":{"isFavorite":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Simple Warding Bond","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length - 1];\nif (lastArg.options.onUpdateCalled) return;\nlet newHp = getProperty(lastArg.updates, \"data.attributes.hp.value\");\nlet oldHp = lastArg.actor.data.data.attributes.hp.value;\nif (newHp && newHp < oldHp) {\n  const newDamageFloor = Math.floor((oldHp - newHp) / 2);\n  const newDamageCeil = Math.ceil((oldHp - newHp) / 2);\n  setProperty(lastArg.updates, \"data.attributes.hp.value\", newHp + newDamageFloor);\n  setProperty(lastArg, \"options.onUpdateCalled\", true);\n  await MidiQOL.applyTokenDamage([{damage: newDamageCeil, type: \"none\"}], newDamageCeil, new Set([lastArg.sourceToken]), undefined, new Set(), { existingDamage: [], superSavers: new Set(), semiSuperSavers: new Set(), workflow: undefined, updateContext: {onUpdateCalled: true} })\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Simple Warding Bond 10.0.8","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n  const lastArg = args[args.length - 1];\n  if (lastArg.options.onUpdateCalled) return;\n  let newHp = getProperty(lastArg.updates, \"system.attributes.hp.value\");\n  let oldHp = lastArg.actor.system.attributes.hp.value;\n  if (newHp && newHp < oldHp) {\n    const newDamageFloor = Math.floor((oldHp - newHp) / 2);\n    const newDamageCeil = Math.ceil((oldHp - newHp) / 2);\n    setProperty(lastArg.updates, \"system.attributes.hp.value\", newHp + newDamageFloor);\n    setProperty(lastArg, \"options.onUpdateCalled\", true);\n    await MidiQOL.applyTokenDamage([{damage: newDamageCeil, type: \"none\"}], newDamageCeil, new Set([lastArg.sourceToken]), undefined, new Set(), { existingDamage: [], superSavers: new Set(), semiSuperSavers: new Set(), workflow: undefined, updateContext: {onUpdateCalled: true} })\n  }\n} catch (err) {\n    console.error(`Sample Warding Bond ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"core":{"sourceId":"Item.W8vYfyMQnC85FZCH"},"cf":{"id":"temp_1xw0kahfmt1"}},"system":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926183,"modifiedTime":1663463688975,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"EEGd0jnuzs4FoyMw"}
{"name":"Spiritual Weapon MQ010.0.13 + Warpgate","type":"spell","img":"icons/magic/fire/dagger-rune-enchant-flame-purple.webp","effects":[],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.JbxsYXxSOTZbf9I0"},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Spiritual Weapon MQ0.9.58 + Warpgate","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const origin = args[0].itemUuid;\nif (origin) {\n    const removeList = actor.effects.filter(ae => ae.data.origin === origin && getProperty(ae.data, \"flags.dae.transfer\") !== 3).map(ae=>ae.id);\n    await actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n}\nconst updates = {\n    Item: {\n    \"Spiritual Weapon Attack\": {\n      \"type\": \"weapon\",\n      \"img\": \"systems/dnd5e/icons/spells/enchant-magenta-2.jpg\", \n      \"data.actionType\" : \"msak\",\n      \"data.properties.mgc\": true,\n      \"data.attackBonus\": `${Number(args[0].actor.data.abilities[args[0].actor.data.attributes.spellcasting]?.mod) + Number(args[0].actor.data.attributes.prof) + Number(args[0].actor.data.bonuses.msak.attack)}`,\n      \"data.proficient\": false,\n      \"data.damage.parts\":[[`${1 + Math.floor((args[0].spellLevel-2)/2)}d8 + ${args[0].actor.data.abilities[args[0].actor.data.attributes.spellcasting]?.mod || \"\"}`,\"force\"]]\n    }\n  }\n}\nconst result = await warpgate.spawn(\"Spiritual Weapon\",  {embedded: updates}, {}, {});\nif (result.length !== 1) return;\nconst createdToken = game.canvas.tokens.get(result[0]);\nawait createdToken.actor.items.getName(\"Spiritual Weapon Attack\").update({\"data.proficient\": false});\nconst targetUuid = `Scene.${canvas.scene.id}.Token.${result[0]}`;\n\nawait actor.createEmbeddedDocuments(\"ActiveEffect\", [{\n    label: \"Summon\", \n    icon: args[0].item.img, \n    origin,\n    duration: {seconds: 60, rounds:10},\n    \"flags.dae.stackable\": false,\n    changes: [{key: \"flags.dae.deleteUuid\", mode: CONST.ACTIVE_EFFECT_MODES.ADD, value: [targetUuid]}]\n}]);","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Spiritual Weapon MQ010.0.13 + Warpgate","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.13\";\ntry {\n  const origin = args[0].itemUuid;\n  if (origin) {\n      const removeList = actor.effects.filter(ae => ae.origin === origin && getProperty(ae, \"flags.dae.transfer\") !== 3).map(ae=>ae.id);\n      await actor.deleteEmbeddedDocuments(\"ActiveEffect\", removeList)\n  }\n  const updates = {\n      Item: {\n      \"Spiritual Weapon Attack\": {\n        \"type\": \"weapon\",\n        \"img\": args[0].itemData.img, \n        \"system.actionType\" : \"msak\",\n        \"system.properties.mgc\": true,\n        \"system.attackBonus\": `${Number(args[0].actor.system.abilities[args[0].actor.system.attributes.spellcasting]?.mod) + Number(args[0].actor.system.attributes.prof) + Number(args[0].actor.system.bonuses.msak.attack)}`,\n        \"system.proficient\": false,\n        \"system.damage.parts\":[[`${1 + Math.floor((args[0].spellLevel-2)/2)}d8 + ${args[0].actor.system.abilities[args[0].actor.system.attributes.spellcasting]?.mod || \"\"}`,\"force\"]]\n      }\n    }\n  }\n  const result = await warpgate.spawn(\"Spiritual Weapon\",  {embedded: updates}, {}, {});\n  if (result.length !== 1) return;\n  const createdToken = game.canvas.tokens.get(result[0]);\n  await createdToken.actor.items.getName(\"Spiritual Weapon Attack\").update({\"data.proficient\": false});\n  const targetUuid = createdToken.document.uuid;\n\n  await actor.createEmbeddedDocuments(\"ActiveEffect\", [{\n      label: \"Summon\", \n      icon: args[0].item.img, \n      origin,\n      duration: {seconds: 60, rounds:10},\n      \"flags.dae.stackable\": false,\n      changes: [{key: \"flags.dae.deleteUuid\", mode: CONST.ACTIVE_EFFECT_MODES.ADD, value: [targetUuid]}]\n  }]);\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Spiritual Weapon ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true,"type":"Boolean"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickVersatile":{"value":false,"altValue":false,"type":"Boolean"},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"scene-packer":{"sourceId":"Item.7aYlyK8VT4BjVupD","hash":"a7b225fdf936cdd5e894fb88c0074db14fed098d"},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>You create a floating, spectral weapon within range that lasts for the duration or until you cast this spell again. When you cast the spell, you can make a melee spell attack against a creature within 5 feet of the weapon. On a hit, the target takes force damage equal to 1d8 + your spellcasting ability modifier.</p>\n<p>As a bonus action on your turn, you can move the weapon up to 20 feet and repeat the attack against a creature within 5 feet of it.</p>\n<p>The weapon can take whatever form you choose. Clerics of deities who are associated with a particular weapon (as St. Cuthbert is known for his mace and Thor for his hammer) make this spell's effect resemble that weapon.</p>\n<p><strong>Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d8 for every two slot levels above the 2nd.</p>\n<p><strong>midi-qol:</strong> Requires warpgate and midi-qol to run and summons a spiritual weapon for the casting player to control.</p>\n<p>You need a spiritual weapon world actor - you can use the one from Warpgate or create your own - it needs a single attack \"Slash\" which should be a melee spell attack range touch. The damage will be set by the casting of the spell.</p>","chat":"","unidentified":""},"source":"PHB pg. 278","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1660134990738,"modifiedTime":1664714209273,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"HoC5exSL0tAHNhRT"}
{"name":"Bardic Inspiration DND2.0.2 MQ10.0.10","type":"feat","img":"icons/skills/melee/unarmed-punch-fist.webp","effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.BardicInspiration.attack.all","mode":5,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInsiration.save.all","mode":5,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.check.all","mode":5,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.label","mode":5,"value":"Bardic Inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.skill.all","mode":2,"value":"1@scale.bard.inspiration","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/melee/unarmed-punch-fist.webp","label":"Inspired","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"durationExpression":"","selfTarget":false,"selfTargetAlways":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","effectActivation":false,"forceCEOff":true,"forceCEOn":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"use":true},"altValue":{"use":true}}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_qt0kn9os0vl"},"favtab":{"isFavorite":true},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"scene-packer":{"sourceId":"Item.7xFPEKTL9nGsRvtI","hash":"c71820d219a2e34c5def824fa9bece1a81c060ba"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>You can inspire others through stirring words or music. To do so, you use a bonus action on your turn to choose one creature other than yourself within 60 feet of you who can hear you. That creature gains one Bardic Inspiration die, a d6. Once within the next 10 minutes, the creature can roll the die and add the number rolled to one ability check, attack roll, or saving throw it makes. The creature can wait until after it rolls the d20 before deciding to use the Bardic Inspiration die, but must decide before the GM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost. A creature can have only one Bardic Inspiration die at a time.</p>\n<p>You can use this feature a number of times equal to your Charisma modifier (a minimum of once).</p>\n<p>You regain any expended uses when you finish a long rest.</p>\n<p>Your Bardic Inspiration die changes when you reach certain levels in this class. The die becomes a d8 at 5th level, a d10 at 10th level, and a d12 at 15th level.</p>\n<h3><em>**Midi-qol note: The Other Formula is removed as it is not  required.<br /><br /></em><strong>You must ensure your bard has the dnd1.6 bard class not the older 1.5 version or scaling won't work.</strong></h3>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":2,"max":"max(1, @abilities.cha.mod)","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926163,"modifiedTime":1663463841226,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"KSH6RqS7Zy03SlfK"}
{"name":"Banishment 10.0.10","type":"spell","img":"icons/magic/control/energy-stream-link-spiral-teal.webp","effects":[{"_id":"iufZU12yslQQSskX","flags":{"dae":{"transfer":false,"stackable":"none","specialDuration":[],"macroRepeat":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null},"core":{"statusId":""}},"changes":[{"key":"macro.itemMacro","mode":0,"value":"@target","priority":0}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/energy-stream-link-spiral-teal.webp","label":"Banishment","origin":"Actor.DMTSWfQs8whM5FtE.Item.cPJGG9KDdaYy3RTU","tint":null,"transfer":false}],"flags":{"dynamiceffects":{"equipActive":true,"alwaysActive":false,"effects":[{"modSpecKey":"macro.execute","value":"Banishment @target","mode":"+","targetSpecific":false,"id":1,"itemId":"pz0vjFCdPtQkdKKQ","active":true,"_targets":[],"label":"Macro Execute"}]},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":false},"altValue":{"use":false,"resource":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"dae":{"alwaysActive":false,"activeEquipped":true},"core":{"sourceId":"Item.BcZKJ53HIIPkOPeD"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"_data":{"name":"Banishment","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[1]);\n\nif (args[0] === \"on\") {\n    await target.update({hidden : true});\n    await target.actor.setFlag('world','banishment', 1);\n    ChatMessage.create({content: target.name + \"  was banished\"})\n    \n}\nif(args[0]=== \"off\") {\n target.update({hidden : false})\n target;actor.unsetFlag(args[1], 'world', 'banishment');\n ChatMessage.create({content: target.name + \"  returned\"})\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Banishment","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[1]);\n\nif (args[0] === \"on\") {\n    await target.update({hidden : true});\n    await target.actor.setFlag('world','banishment', 1);\n    ChatMessage.create({content: target.name + \"  was banished\"})\n    \n}\nif(args[0]=== \"off\") {\n target.update({hidden : false})\n target.actor.unsetFlag('world', 'banishment');\n ChatMessage.create({content: target.name + \"  returned\"})\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null,"name":"Banishment 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    const lastArg = args[args.length -1];\n    let target = await fromUuid(lastArg.tokenUuid);\n    if (args[0] === \"on\") {\n        await DAE.setTokenVisibility(lastArg.tokenUuid, false)\n        DAE.setFlag(lastArg.tokenUuid, \"banishment\", 1);\n        // TODO look at obfuscating the name\n        ChatMessage.create({content: target.name + \"  was banished\"})\n        \n    }\n    if(args[0]=== \"off\") {\n        DAE.setTokenVisibility(lastArg.tokenUuid, true)\n        DAE.unsetFlag(lastArg.tokenUuid, 'banishment');\n        // TODO look at obfuscating the name\n        ChatMessage.create({content: target.name + \"  returned\"})\n    }\n} catch (err)  {\n    console.error(`Banishment ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"favtab":{"isFavorite":false},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>You attempt to send one creature that you can see within range to another plane of existence. The target must succeed on a Charisma saving throw or be banished.</p>\n<p>If the target is native to the plane of existence you're on, you banish the target to a harmless demiplane. While there, the target is incapacitated. The target remains there until the spell ends, at which point the target reappears in the space it left or in the nearest unoccupied space if that space is occupied.</p>\n<p>If the target is native to a different plane of existence than the one you're on, the target is banished with a faint popping noise, returning to its home plane. If the spell ends before 1 minute has passed, the target reappears in the space it left or in the nearest unoccupied space if that space is occupied. Otherwise, the target doesn't return.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 5th level or higher, you can target one additional creature for each slot level above 4th.</p>","chat":"","unidentified":""},"source":"PHB pg. 217","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"cha","dc":16,"scaling":"spell","value":""},"level":4,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An item distasteful to the target","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926141,"modifiedTime":1663474745050,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"MtdPTTmN0na7elrI"}
{"name":"Nature's Ward 10.0.10","type":"feat","img":"icons/commodities/flowers/lotus-pink.webp","effects":[{"_id":"RZ2jmcmhFX8uMrPN","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":true,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null},"core":{"statusId":""}},"changes":[{"key":"system.traits.ci.value","value":"diseased","mode":2,"priority":20},{"key":"system.traits.ci.value","value":"poisoned","mode":2,"priority":20},{"key":"system.traits.di.value","value":"poison","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/commodities/flowers/lotus-pink.webp","label":"Nature's Ward","origin":"Item.UWivBxTGcLzlnY8G","tint":null,"transfer":true}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"core":{"sourceId":"Compendium.midi-qol.midiqol-sample-items.Td3v4mqUETTolcm0"}},"system":{"description":{"value":"<p>When you reach 10th level, you can't be charmed or frightened by elementals or fey, and you are immune to poison and disease.</p>","chat":"","unidentified":""},"source":"PHB pg. 69","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Circle of the Land 10","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926135,"modifiedTime":1663472915450,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"N9gM0uGpsyCiuCrM"}
{"name":"Improved Divine Smite 10.0.10","type":"feat","img":"icons/magic/symbols/cog-shield-white-blue.webp","effects":[{"_id":"9fxlvxN5rkcl9fvW","flags":{"dae":{"transfer":true,"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","specialDuration":[],"macroRepeat":"none"},"core":{"statusId":""}},"changes":[{"key":"system.bonuses.mwak.damage","mode":0,"value":"1d8","priority":0}],"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/symbols/cog-shield-white-blue.webp","label":"Improved Divine Smite","transfer":true,"disabled":false,"origin":null,"tint":null}],"flags":{"_sheetTab":"details","entityorder":{"order":162},"dynamiceffects":{"alwaysActive":true,"equipActive":false,"effects":[{"modSpecKey":"data.bonuses.mwak.damage","value":"1d8","mode":"+","targetSpecific":false,"id":1,"itemId":"lKuURNfVbHN88Xno","active":false,"_targets":[]}]},"core":{"sourceId":"Compendium.Dynamic-Effects-SRD.DAE SRD Feats.uvEGiLvPgzje1L6K"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"scene-packer":{"sourceId":"Item.SHXT2nuuWXqlqnGw"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>By 11th level, you are so suffused with righteous might that all your melee weapon strikes carry divine power with them.</p>\n<p>Whenever you hit a creature with a melee weapon, the creature takes an extra 1d8 radiant damage. If you also use your @Compendium[dnd5e.classfeatures.ySMPQ6zNSlvkrl2f]{Divine Smite} with an attack, you add this damage to the extra damage of your Divine Smite.</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["1d8","radiant"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 11","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926118,"modifiedTime":1663472873320,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"Q9ZtM3v8aNkCfzBS"}
{"name":"Arrow of Slaying (Dragon) 10.0.10","type":"consumable","img":"icons/weapons/ammunition/arrow-head-war-flight.webp","effects":[],"flags":{"midi-qol":{"criticalThreshold":"20","onUseMacroName":"","effectActivation":false,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.dnd5e.items.aXsfZvDCdpuv3Yvb"},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":true,"altValue":true},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":true,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>An arrow of slaying is a magic weapon meant to slay a particular kind of creature. Some are more focused than others; for example, there are both arrows of dragon slaying and arrows of blue dragon slaying. If a creature belonging to the type, race, or group associated with an arrow of slaying takes damage from the arrow, the creature must make a DC 17 Constitution saving throw, taking an extra 6d10 piercing damage on a failed save, or half as much extra damage on a successful one.<br />Once an arrow of slaying deals its extra damage to a creature, it becomes a nonmagical arrow.</p>","chat":"","unidentified":""},"source":"DMG pg. 152","quantity":1,"weight":0.05,"price":600,"attunement":0,"equipped":false,"rarity":"veryRare","identified":true,"activation":{"type":"action","cost":1,"condition":"[\"dragon\"].includes(raceOrType)"},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":"","autoDestroy":false},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"6d10","save":{"ability":"con","dc":17,"scaling":"flat"},"consumableType":"ammo"},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926122,"modifiedTime":1663463748908,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"QpWpCN7kYeEQWCiV"}
{"name":"Hold Person 10.0.13","type":"spell","img":"icons/magic/control/debuff-chains-ropes-purple.webp","effects":[{"_id":"t3cxabtojf2E7WRI","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=end,\nsaveAbility=wis,\nsaveDC=@attributes.spelldc,\nlabel=Hold Person","priority":20},{"key":"macro.CE","mode":0,"value":"Paralyzed","priority":20},{"key":"macro.tokenMagic","mode":0,"value":"mantle-of-madness","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/debuff-chains-ropes-purple.webp","label":"Hold Person","origin":"Item.fTpCyyR0tWfOR0S3","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"durationExpression":"","selfTarget":false,"selfTargetAlways":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.3Lo9boi7P2ro6QV4"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"midi-qol":{"onUseMacroName":"","effectActivation":true,"forceCEOff":true},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>Choose a humanoid that you can see within range. The target must succeed on a Wisdom saving throw or be paralyzed for the duration. At the end of each of its turns, the target can make another Wisdom saving throw. On a success, the spell ends on the target.</p>\n<p><strong>Higher Levels. </strong>When you cast this spell using a spell slot of 3rd level or higher, you can target one additional humanoid for each slot level above 2nd. The humanoids must be within 30 feet of each other when you target them.<br /><br />Assumes Convenient Effects</p>","chat":"","unidentified":""},"source":"PHB pg. 251","activation":{"type":"action","cost":1,"condition":"[\"human\", \"humanoid\"].includes(raceOrType)"},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"wis","dc":99,"scaling":"spell"},"level":2,"school":"enc","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A small, straight piece of iron","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926136,"modifiedTime":1664421055332,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"RYZnPWPysKFfJsAY"}
{"name":"Fey Ancestry 10.0.10","type":"feat","img":"icons/creatures/mammals/elk-moose-marked-green.webp","effects":[{"_id":"xztigTbGnhDHw7of","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":true,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null},"core":{"statusId":""}},"changes":[{"key":"system.traits.ci.value","value":"unconscious","mode":2,"priority":20},{"key":"system.traits.languages.value","value":"elvish","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/creatures/mammals/elk-moose-marked-green.webp","label":"Fey Ancestry","origin":"Item.NpbMHuHRuBS3ntJA","tint":null,"transfer":true}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"},"core":{"sourceId":"Compendium.midi-qol.midiqol-sample-items.cP5iLvmJGafqZOKB"}},"system":{"description":{"value":"<p>You have advantage on saving throws against being charmed, and magic can’t put you to sleep.</p>","chat":"","unidentified":""},"source":"PHB pg. 23, 39","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Elf, Half-Elf","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926146,"modifiedTime":1663463960467,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"RgscVLVsD326Yipj"}
{"name":"Aura of Vitality 10.0.10","type":"spell","img":"icons/magic/holy/barrier-shield-winged-blue.webp","effects":[{"_id":"l6ntxjpimprip38b","changes":[{"key":"macro.tokenMagic","mode":0,"value":"glacial-aura","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/holy/barrier-shield-winged-blue.webp","label":"Aura of Vitality","origin":"Actor.FzHGnPGyw01MRHXm.Item.sTiwetZlEawz5RLi","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"favtab":{"isFavorite":false},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"onUseMacroParts":{"0":{"0":"ItemMacro","1":"postActiveEffects"}}},"core":{"sourceId":"Item.sTiwetZlEawz5RLi"},"itemacro":{"macro":{"data":{"_id":null,"name":"Aura of Vitality","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"actor = await fromUuid(args[0].actorUuid);\nconst itemData = {\n    name: args[0].itemData.name + \" Cure\",\n    type: \"feat\",\n    img: args[0].itemData.img,\n    data: {\n        actionType: \"heal\",\n        activation: {type: \"bonus\"},\n        damage: {parts: [[\"2d6\", \"healing\"]]},\n        target: {value: 1, type: \"creature\"},\n        range: {value: 30, units: \"ft\"}\n    }\n};\nconst items = (await actor.createEmbeddedDocuments(\"Item\", [itemData])).map(i=> i.uuid);\nlet removeUuids = getProperty(actor.data.flags, \"midi-qol.concentration-data.removeUuids\") ?? [];\nremoveUuids = removeUuids.concat(items);\nif (removeUuids.length > 0) actor.setFlag(\"midi-qol\", \"concentration-data.removeUuids\", removeUuids);","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Aura of Vitality","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    actor = await fromUuid(args[0].actorUuid);\n    const itemData = {\n        name: args[0].itemData.name + \" Cure\",\n        type: \"feat\",\n        img: args[0].itemData.img,\n        system: {\n            actionType: \"heal\",\n            activation: {type: \"bonus\"},\n            damage: {parts: [[\"2d6\", \"healing\"]]},\n            target: {value: 1, type: \"creature\"},\n            range: {value: 30, units: \"ft\"}\n        }\n    };\n    const items = (await actor.createEmbeddedDocuments(\"Item\", [itemData])).map(i=> i.uuid);\n    let removeUuids = getProperty(actor.data.flags, \"midi-qol.concentration-data.removeUuids\") ?? [];\n    removeUuids = removeUuids.concat(items);\n    if (removeUuids.length > 0) actor.setFlag(\"midi-qol\", \"concentration-data.removeUuids\", removeUuids);\n} catch (err) {\n\t    console.error(`${args[0].itemData.name} - Aura of Vitality ${version}`, err);\n\t\treturn {}\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"scene-packer":{"sourceId":"Item.9rDJI0I5GPcf2h7M","hash":"8e7c5b9b02f5a25bb5dfe4e1c47f3e816366f93a"},"exportSource":{"world":"tp-game-v3","system":"dnd5e","coreVersion":"9.249","systemVersion":"1.5.7"},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickDamage":{"context":{"0":""}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"cf":{"id":"temp_0hvf80hl1zcf"}},"system":{"description":{"value":"<p>Healing energy radiates from you in an aura with a 30-foot radius. Until the spell ends, the aura moves with you, centered on you. You can use a bonus action to cause one creature in the aura (including you) to regain 2d6 hit points.</p>","chat":"<p>Healing energy radiates from you in an aura with a 30-foot radius. Until the spell ends, the aura moves with you, centered on you. You can use a bonus action to cause one creature in the aura (including you) to regain 2d6 hit points.</p>","unidentified":"<p>Healing energy radiates from you in an aura with a 30-foot radius. Until the spell ends, the aura moves with you, centered on you. You can use a bonus action to cause one creature in the aura (including you) to regain 2d6 hit points.</p>"},"source":"Player's Handbook , pg. 216","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"heal","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""},"attributes":{"spelldc":10},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1663252230261,"modifiedTime":1664949443119,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"VmwMXyNu0BE5P6C7"}
{"name":"Sneak Attack 10.0.13","type":"feat","img":"icons/skills/melee/strike-dagger-arcane-pink.webp","effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":"none","transfer":true,"specialDuration":[],"macroRepeat":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null},"core":{"statusId":""}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":30}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/melee/strike-dagger-arcane-pink.webp","label":"Sneak Attack","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.Phll73Y1o1t6Park","tint":null,"transfer":true}],"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Sneak Attack","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\"\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].itemData.data.actionType)) return {}; // weapon attack\n    if (args[0].itemData.data.actionType === \"mwak\" && !args[0].itemData.data.properties?.fin) \n      return {}; // ranged or finesse\n    if (args[0].hitTargets.length < 1) return {};\n    token = canvas.tokens.get(args[0].tokenId);\n    actor = token.actor;\n    if (!actor || !token || args[0].hitTargets.length < 1) return {};\n    const rogueLevels = actor.getRollData().classes.rogue?.levels;\n    if (!rogueLevels) {\n      MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n      return {}; // rogue only\n    }\n    let target = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\n    if (!target) MidiQOL.error(\"Sneak attack macro failed\");\n    \n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime === lastTime) {\n       MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n       return {};\n      }\n    }\n    let foundEnemy = true;\n    let isSneak = args[0].advantage;\n    \n    if (!isSneak) {\n      foundEnemy = false;\n      let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n        let nearby = (t.actor &&\n             t.actor?.id !== args[0].actor._id && // not me\n             t.id !== target.id && // not the target\n             t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n             t.data.disposition !== target.data.disposition && // not an ally\n             MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n         );\n        foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n        return nearby;\n      });\n      isSneak = nearbyEnemy.length > 0;\n    }\n    if (!isSneak) {\n      MidiQOL.warn(\"Sneak Attack Damage: No advantage/ally next to target\");\n      return {};\n    }\n    let useSneak = getProperty(actor.data, \"flags.dae.autoSneak\");\n    if (!useSneak) {\n        let dialog = new Promise((resolve, reject) => {\n          new Dialog({\n          // localize this text\n          title: \"Conditional Damage\",\n          content: `<p>Use Sneak attack?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n          buttons: {\n              one: {\n                  icon: '<i class=\"fas fa-check\"></i>',\n                  label: \"Confirm\",\n                  callback: () => resolve(true)\n              },\n              two: {\n                  icon: '<i class=\"fas fa-times\"></i>',\n                  label: \"Cancel\",\n                  callback: () => {resolve(false)}\n              }\n          },\n          default: \"two\"\n          }).render(true);\n        });\n        useSneak = await dialog;\n    }\n    if (!useSneak) return {}\n    const diceMult = args[0].isCritical ? 2: 1;\n    const baseDice = Math.ceil(rogueLevels/2);\n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime !== lastTime) {\n         await actor.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n      }\n    }\n    // How to check that we've already done one this turn?\n    return {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Sneak Attack ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Sneak Attack 10.0.13","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.13\"\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].itemData.system.actionType)) return {}; // weapon attack\n    if (args[0].itemData.system.actionType === \"mwak\" && !args[0].itemData.system.properties?.fin) \n      return {}; // ranged or finesse\n    if (args[0].hitTargets.length < 1) return {};\n    token = canvas.tokens.get(args[0].tokenId);\n    actor = token.actor;\n    if (!actor || !token || args[0].hitTargets.length < 1) return {};\n    const rogueLevels = actor.getRollData().classes.rogue?.levels;\n    if (!rogueLevels) {\n      MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n      return {}; // rogue only\n    }\n    let target = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\n    if (!target) MidiQOL.error(\"Sneak attack macro failed\");\n    \n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime === lastTime) {\n       MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n       return {};\n      }\n    }\n    let foundEnemy = true;\n    let isSneak = args[0].advantage;\n    \n    if (!isSneak) {\n      foundEnemy = false;\n      let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n        let nearby = (t.actor &&\n             t.actor?.id !== args[0].actor._id && // not me\n             t.id !== target.id && // not the target\n             t.actor?.system.attributes?.hp?.value > 0 && // not incapacitated\n             t.document.disposition !== target.document.disposition && // not an ally\n             MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n         );\n        foundEnemy = foundEnemy || (nearby && t.document.disposition === -target.document.disposition)\n        return nearby;\n      });\n      isSneak = nearbyEnemy.length > 0;\n    }\n    if (!isSneak) {\n      MidiQOL.warn(\"Sneak Attack Damage: No advantage/ally next to target\");\n      return {};\n    }\n    let useSneak = getProperty(actor.data, \"flags.dae.autoSneak\");\n    if (!useSneak) {\n        let dialog = new Promise((resolve, reject) => {\n          new Dialog({\n          // localize this text\n          title: \"Conditional Damage\",\n          content: `<p>Use Sneak attack?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n          buttons: {\n              one: {\n                  icon: '<i class=\"fas fa-check\"></i>',\n                  label: \"Confirm\",\n                  callback: () => resolve(true)\n              },\n              two: {\n                  icon: '<i class=\"fas fa-times\"></i>',\n                  label: \"Cancel\",\n                  callback: () => {resolve(false)}\n              }\n          },\n          default: \"two\"\n          }).render(true);\n        });\n        useSneak = await dialog;\n    }\n    if (!useSneak) return {}\n    const diceMult = args[0].isCritical ? 2: 1;\n    const baseDice = Math.ceil(rogueLevels/2);\n    if (game.combat) {\n      const combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n      const lastTime = actor.getFlag(\"midi-qol\", \"sneakAttackTime\");\n      if (combatTime !== lastTime) {\n         await actor.setFlag(\"midi-qol\", \"sneakAttackTime\", combatTime)\n      }\n    }\n    // How to check that we've already done one this turn?\n    return {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Sneak Attack ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"betterRolls5e":{"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"core":{"sourceId":"Item.bhuz5hzr0YsHJd1N"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"a1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"animLevel":false,"bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","rangedOptions":{"rangeDmgType":""},"spellOptions":{"spellLoops":1},"uaStrikeType":"physical","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"exAnimLevel":false,"impactVar":"a1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"}},"system":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p><p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't <a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p><p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p><p>Midi-qol: <strong>Must rename to Sneak Attack on actor equip</strong><br />10.010</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926111,"modifiedTime":1664951070151,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"WLCKItTIeKXpyTZP"}
{"name":"Spirit Guardians 10.0.10","type":"spell","img":"icons/magic/light/projectile-bolts-salvo-white.webp","effects":[{"_id":"kJdmHhTJH03zJxo2","changes":[{"key":"system.attributes.movement.all","mode":0,"value":"/2","priority":20},{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\nlabel=Spirit  Guardians,\ndamageRoll=(@spellLevel)d8,\ndamageType=radiant,\nsaveRemove=false,\nsaveDC=@attributes.spelldc,\nsaveAbility=wis,\nsaveDamage=halfdamage,\nkillAnim=true","priority":20},{"key":"macro.itemMacro","mode":0,"value":"@token @spellLevel @attributes.spelldc","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/projectile-bolts-salvo-white.webp","label":"Spirit Guardians","origin":"Item.LTQm45DD4V2IqDpi","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":true,"aura":"Enemy","radius":15,"alignment":"","type":"","ignoreSelf":true,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.uCud2s4TjMfjiXUb"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true,"type":"Boolean"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickSave":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickVersatile":{"value":false,"altValue":false,"type":"Boolean"},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"scene-packer":{"hash":"5517dcc2725d9c3f9845b639608127534ede5c37","sourceId":"Item.B8IrEtWEU0h9EtqY"},"itemacro":{"macro":{"data":{"_id":null,"name":"Spirit Guardians 0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length -1];\n// Check when applying the effect - if the token is not the caster and it IS the tokens turn they take damage\nif (args[0] === \"on\" && args[1] !== lastArg.tokenId && lastArg.tokenId === game.combat?.current.tokenId) {\n    const sourceItem = await fromUuid(lastArg.origin);\n    let theActor = await fromUuid(lastArg.actorUuid);\n    if (theActor.actor) theActor = theActor.actor;\n    const itemData = mergeObject(duplicate(sourceItem.data), {\n        type: \"weapon\",\n        effects: [],\n        flags: {\n            \"midi-qol\": {\n                noProvokeReaction: true, // no reactions triggered\n                onUseMacroName: null // \n            },\n        },\n        data: {\n            actionType: \"save\",\n            save: {dc: Number.parseInt(args[3]), ability: \"wis\", scaling: \"flat\"},\n            damage: { parts: [[`${args[2]}d8`, \"radiant\"]] },\n            \"target.type\": \"self\",\n            components: {concentration: false, material: false, ritual: false, somatic: false, value: \"\", vocal: false},\n            duration: {units: \"inst\", value: undefined},\n            weaponType: \"improv\"\n        }\n    }, {overwrite: true, inlace: true, insertKeys: true, insertValues: true});\n    itemData.data.target.type = \"self\";\n    setProperty(itemData.flags, \"autoanimations.killAnim\", true);\n    itemData.flags.autoanimations.killAnim = true;;\n    const item = new CONFIG.Item.documentClass(itemData, { parent: theActor })\n    const options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n    await MidiQOL.completeItemRoll(item, options);\n\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Spirit Guardians 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    const lastArg = args[args.length -1];\n    // Check when applying the effect - if the token is not the caster and it IS the tokens turn they take damage\n    if (args[0] === \"on\" && args[1] !== lastArg.tokenId && lastArg.tokenId === game.combat?.current.tokenId) {\n        const sourceItem = await fromUuid(lastArg.origin);\n        let theActor = await fromUuid(lastArg.actorUuid);\n        if (theActor.actor) theActor = theActor.actor;\n        const itemData = mergeObject(duplicate(sourceItem.toObject(false)), {\n            type: \"weapon\",\n            effects: [],\n            flags: {\n                \"midi-qol\": {\n                    noProvokeReaction: true, // no reactions triggered\n                    onUseMacroName: null // \n                },\n            },\n            system: {\n                actionType: \"save\",\n                save: {dc: Number.parseInt(args[3]), ability: \"wis\", scaling: \"flat\"},\n                damage: { parts: [[`${args[2]}d8`, \"radiant\"]] },\n                \"target.type\": \"self\",\n                components: {concentration: false, material: false, ritual: false, somatic: false, value: \"\", vocal: false},\n                duration: {units: \"inst\", value: undefined},\n                weaponType: \"improv\"\n            }\n        }, {overwrite: true, inlace: true, insertKeys: true, insertValues: true});\n        itemData.system.target.type = \"self\";\n        setProperty(itemData.flags, \"autoanimations.killAnim\", true);\n        itemData.flags.autoanimations.killAnim = true;;\n        const item = new CONFIG.Item.documentClass(itemData, { parent: theActor })\n        const options = { showFullCard: false, createWorkflow: true, versatile: false, configureDialog: false };\n        await MidiQOL.completeItemRoll(item, options);\n    }\n} catch (err) {\n    console.error(`Spirit Guardians ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"gm-notes":{},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"autoanimations":{"version":4,"killAnim":false,"options":{"ammo":false},"override":false,"autoOverride":{"enable":false},"allSounds":{"item":{"enableAudio":false}},"sourceToken":{"enable":false},"targetToken":{"enable":false},"audio":{"a01":{"enable":false,"file":"","delay":0,"volume":0.25},"e01":{"enable":false,"file":"","delay":0,"volume":0.25}}}},"system":{"description":{"value":"<p>You call forth spirits to protect you. They flit around you to a distance of 15 feet for the duration. If you are good or neutral, their spectral form appears angelic or fey (your choice). If you are evil, they appear fiendish.</p>\n<p>When you cast this spell, you can designate any number of creatures you can see to be unaffected by it. An affected creature's speed is halved in the area, and when the creature enters the area for the first time on a turn or starts its turn there, it must make a Wisdom saving throw. On a failed save, the creature takes 3d8 radiant damage (if you are good or neutral) or 3d8 necrotic damage (if you are evil). On a successful save, the creature takes half as much damage.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d8 for each slot level above 3rd.</p>\n<p>Midi-qol: Requires active auras to work and<strong> assumes there is a combat active</strong>.<br />Supports the following:</p>\n<ol>\n<li>If a player enters the spirit guardian range on their turn they will save &amp;&amp; take damage.</li>\n<li>At the start of an affected tokens turn they will save &amp;&amp; take damage.</li>\n<li>If they move out of range of the effect they won't take damage anymore.</li>\n<li>All effects removed on expiry/loss of concentration.</li>\n<li>Spell scaling is supported automatically.</li>\n<li>If automated animations, only the initial cast will spawn the animation.</li>\n</ol>","chat":"","unidentified":""},"source":"PHB pg. 278","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":0,"scaling":"spell"},"level":3,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A holy symbol","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d8"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.286","createdTime":1661995926108,"modifiedTime":1663937667839,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"X2gVj3jeAI1sDz54"}
{"name":"Invisibility 10.0.10 - CE","type":"spell","img":"icons/magic/air/fog-gas-smoke-dense-gray.webp","effects":[{"_id":"GoUSbGdrl7G0I89N","flags":{"dae":{"stackable":"none","specialDuration":["1Attack","1Spell"],"macroRepeat":"none","transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null,"displayTemp":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"changes":[{"key":"StatusEffect","mode":0,"value":"Convenient Effect: Invisible","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/fog-gas-smoke-dense-gray.webp","label":"Invisible","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MtbkgRT7nopCAnpB","tint":null,"transfer":false}],"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.MtbkgRT7nopCAnpB"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p><p data-pm-slice=\"1 1 []\">* This version of  Invisibility uses the core Invisible status effect and interacts with foundry vision modes</p>","chat":"","unidentified":""},"source":"PHB pg. 254","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"ill","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An eyelash encased in gum arabic","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926126,"modifiedTime":1663463698354,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"XPrZdRF3yPlULvjd"}
{"name":"Lay on Hands 10.0.10","type":"feat","img":"icons/magic/light/orbs-hand-gray.webp","effects":[{"_id":"hbyjgntb6xcq8klo","changes":[{"key":"system.resources.primary.max","mode":5,"value":"5 * @classes.paladin.levels","priority":20},{"key":"system.resources.primary.label","mode":5,"value":"Lay on Hands Pool","priority":20},{"key":"system.resources.primary.lr","mode":5,"value":"1","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/orbs-hand-gray.webp","label":"Lay on Hands Pool","origin":"Actor.iO04pmtZ0N3gTAk9.Item.IM2UCUasJLD5J7Fw","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"_sheetTab":"description","entityorder":{"order":161},"dynamiceffects":{"effects":[],"alwaysActive":false,"equipActive":false},"favtab":{"isFavourite":true,"isFavorite":true},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Lay on Hands","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    if (args[0].macroPass === \"preItemRoll\") {\n      const theTarget = args[0].targets[0];\n      if (!theTarget) return false;\n    \n      // does not work on undead/constructs\n      let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n      if (invalid) {\n          ui.notifications.warn(\"Lay on Hands can't affect undead/constructs\")\n          return false;\n      }\n      let consumeTarget = args[0].itemData.data.consume.target;\n      if (!consumeTarget || consumeTarget === \"\") consumeTarget = 'resources.primary.value'; \n      const available = getProperty(actor.data.data, consumeTarget);\n      // Have we got any left?\n      if (available <= 0) return false;\n    \n      // prompt for how much to use...\n      let d = new Promise((resolve, reject) => {\n        let theDialog = new Dialog({\n          title: \"Lay on Hands\",\n          content: `How many points to use? ${available} available<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${available}\"></input>`,\n          buttons: {\n            heal: {\n              label: \"Heal\",\n              callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value)), 0, available)); }\n            },\n            cureDiseasePoison: {\n              label: \"Disease/Poison\",\n              callback: (html) => { resolve(-Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value) / 5) * 5, 0, available)); }\n            },\n            abort: {\n              icon: '<i class=\"fas fa-cross\"></i>',\n              label: \"Quit\",\n              callback: () => { resolve(false) }\n            },\n          },\n          default: \"heal\",\n        }).render(true);\n      });\n      const consumed = await d;\n      if (!consumed) return false;\n      const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n      const theItem = workflow.item;\n      let updates;\n      if (consumed > 0) {\n        updates = {\n          \"data.consume.amount\": Math.abs(consumed),\n          \"data.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n          \"data.chatFlavor\": \"\",\n          \"data.consume.target\": consumeTarget\n        };\n      } else {\n        updates = {\n          \"data.consume.amount\": Math.abs(consumed),\n          \"data.damage.parts\": [],\n          \"data.chatFlavor\": `<h3>Remove up to ${Math.floor(Math.abs(consumed) / 5)} poisons/diseases</h3>`,\n          \"data.consume.target\": consumeTarget\n        };\n      }\n      setProperty(workflow, \"workflowOptions.autoConsumeResource\", true);\n      return theItem.update(updates);\n    }\n    return true;\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Lay on Hands ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Lay on Hands 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    if (args[0].macroPass === \"preItemRoll\") {\n      const theTarget = args[0].targets[0];\n      if (!theTarget) return false;\n    \n      // does not work on undead/constructs\n      let invalid = [\"undead\", \"construct\"].some(type => (theTarget?.actor.system.details.type?.value || \"\").toLowerCase().includes(type));\n      if (invalid) {\n          ui.notifications.warn(\"Lay on Hands can't affect undead/constructs\")\n          return false;\n      }\n      let consumeTarget = args[0].itemData.system.consume.target;\n      if (!consumeTarget || consumeTarget === \"\") consumeTarget = 'resources.primary.value'; \n      const available = getProperty(actor.system, consumeTarget);\n      // Have we got any left?\n      if (available <= 0) return false;\n    \n      // prompt for how much to use...\n      let d = new Promise((resolve, reject) => {\n        let theDialog = new Dialog({\n          title: \"Lay on Hands\",\n          content: `How many points to use? ${available} available<input id=\"mqlohpoints\" type=\"number\" min=\"0\" step=\"1.0\" max=\"${available}\"></input>`,\n          buttons: {\n            heal: {\n              label: \"Heal\",\n              callback: (html) => { resolve(Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value)), 0, available)); }\n            },\n            cureDiseasePoison: {\n              label: \"Disease/Poison\",\n              callback: (html) => { resolve(-Math.clamped(Math.floor(Number(html.find('#mqlohpoints')[0].value) / 5) * 5, 0, available)); }\n            },\n            abort: {\n              icon: '<i class=\"fas fa-cross\"></i>',\n              label: \"Quit\",\n              callback: () => { resolve(false) }\n            },\n          },\n          default: \"heal\",\n        }).render(true);\n      });\n      const consumed = await d;\n      if (!consumed) return false;\n      const workflow = MidiQOL.Workflow.getWorkflow(args[0].uuid);\n      const theItem = workflow.item;\n      let updates;\n      if (consumed > 0) {\n        updates = {\n          \"system.consume.amount\": Math.abs(consumed),\n          \"system.damage.parts\": [[`${Math.max(0, consumed)}`, \"healing\"]],\n          \"system.chatFlavor\": \"\",\n          \"system.consume.target\": consumeTarget\n        };\n      } else {\n        updates = {\n          \"system.consume.amount\": Math.abs(consumed),\n          \"system.damage.parts\": [],\n          \"system.chatFlavor\": `<h3>Remove up to ${Math.floor(Math.abs(consumed) / 5)} poisons/diseases</h3>`,\n          \"system.consume.target\": consumeTarget\n        };\n      }\n      setProperty(workflow, \"workflowOptions.autoConsumeResource\", true);\n      return theItem.update(updates);\n    }\n    return true;\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Lay on Hands ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.IM2UCUasJLD5J7Fw"},"scene-packer":{"sourceId":"Item.aGfO0Wkxr0QYfOSJ","hash":"6705c1d4f10459da0d62b2b06b023a246d9ed5bd"},"cf":{"id":"temp_qt0kn9os0vl"}},"system":{"description":{"value":"<p>Your blessed touch can heal wounds. You have a pool of healing power that replenishes when you take a long rest. With that pool, you can restore a total number of hit points equal to your paladin level × 5. </p>\n<p>As an action, you can touch a creature and draw power from the pool to restore a number of hit points to that creature, up to the maximum amount remaining in your pool.</p>\n<p>Alternatively, you can expend 5 hit points from your pool of healing to cure the target of one disease or neutralize one poison affecting it. You can cure multiple diseases and neutralize multiple poisons with a single use of Lay on Hands, expending hit points separately for each one.</p>\n<p>This feature has no effect on undead and constructs.<br /><br />Midi-qol notes: <br />Item has a passive effect to set the Lay on Hands resource pool to be 5 * the paladin level, default primary resource pool. <br /><br />When first equipped you <span style=\"text-decoration:underline\"><strong>must edit</strong></span> the Item and the resource consumption should be set the set to consume from the primary (default)  resource pool.<br /><br />You can change the resource pool by editing the passive effect and updating the item.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","type":"lr"},"consume":{"type":"attribute","target":"","amount":65},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["65","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 1","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926160,"modifiedTime":1663474691214,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"YMc9WAanqzJUp1Dq"}
{"name":"Slayer's Prey  10.0.10","type":"feat","img":"icons/magic/fire/projectile-arrow-fire-red-yellow.webp","effects":[{"_id":"4YzIMnzXG4F9fNLa","flags":{"dae":{"stackable":false,"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[],"disabled":false,"duration":{"startTime":null,"seconds":3600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/fire/projectile-arrow-fire-red-yellow.webp","label":"Marked","origin":"Actor.bZz0UNijKQidTQEV.Item.gDJIoRL1J8BzIr3y","tint":null,"transfer":false}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"onUseMacroParts":{"0":{"0":"ItemMacro","1":"postActiveEffects"}}},"itemacro":{"macro":{"data":{"_id":null,"name":"Slayer's Prey","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"// Sample Slayers prey\nif (args[0].tag === \"OnUse\") {\n    let targetUuid = args[0].hitTargetUuids[0];\n    if (!actor || !targetUuid) {\n      console.error(\"Slayers's Prey: no token/target selected\", targetUuid, actor);\n      return;\n    }\n    \n    // First remove the old effects from the target and ourselves \n    let item = actor.items.get(args[0].id);\n\n    // have to remove the effect from old target if we are changing targets\n    let oldTargetUuid = getProperty(actor.data, \"flags.midi-qol.slayersPrey\");\n    if (oldTargetUuid && oldTargetUuid !== targetUuid) await DAE.deleteActiveEffect(oldTargetUuid, item.uuid)\n    \n    // Check if we already have the effect on ourselves.\n    let effect = actor.effects.find(e=>e.data.origin === args[0].itemUuid);\n\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.slayersPrey\", mode: 5, value: targetUuid, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 5, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    \n    if (effect) await effect.update(effectData);\n    else await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n} else if (args[0].tag === \"DamageBonus\") {\n    if (args[0].hitTargets.length === 0) return;\n    const targetUuid = args[0].hitTargetUuids[0];\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    // only on the marked target\n    if (targetUuid !== getProperty(args[0].actor.flags, \"midi-qol.slayersPrey\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    return {damageRoll: `1d6[${damageType}]`, flavor: \"Slayers Prey Damage\"}\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Slayer's Prey","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"// Sample Slayers prey\nconst version = \"10.0.10\";\ntry {\n  if (args[0].tag === \"OnUse\") {\n      let targetUuid = args[0].hitTargetUuids[0];\n      if (!actor || !targetUuid) {\n        console.error(\"Slayers's Prey: no token/target selected\", targetUuid, actor);\n        return;\n      }\n      \n      // First remove the old effects from the target and ourselves \n      let item = actor.items.get(args[0].id);\n\n      // have to remove the effect from old target if we are changing targets\n      let oldTargetUuid = getProperty(actor, \"flags.midi-qol.slayersPrey\");\n      if (oldTargetUuid && oldTargetUuid !== targetUuid) await DAE.deleteActiveEffect(oldTargetUuid, item.uuid)\n      \n      // Check if we already have the effect on ourselves.\n      let effect = actor.effects.find(e=>e.origin === args[0].itemUuid);\n\n      const effectData = {\n        changes: [\n          {key: \"flags.midi-qol.slayersPrey\", mode: 5, value: targetUuid, priority: 20}, // who is marked\n          {key: \"flags.dnd5e.DamageBonusMacro\", mode: 5, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n        ],\n        origin: args[0].uuid, //flag the effect as associated to the spell being cast\n        disabled: false,\n        duration: args[0].item.effects[0].duration,\n        icon: args[0].item.img,\n        label: args[0].item.name\n      }\n      \n      if (effect) await effect.update(effectData);\n      else await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n  } else if (args[0].tag === \"DamageBonus\") {\n      if (args[0].hitTargets.length === 0) return;\n      const targetUuid = args[0].hitTargetUuids[0];\n      // only weapon attacks\n      if (![\"mwak\",\"rwak\"].includes(args[0].item.system.actionType)) return {};\n      // only on the marked target\n      if (targetUuid !== getProperty(args[0].actor.flags, \"midi-qol.slayersPrey\")) return {};\n      let damageType = args[0].item.system.damage.parts[0][1];\n      return {damageRoll: `1d6[${damageType}]`, flavor: \"Slayers Prey Damage\"}\n  }\n} catch (err) {\n    console.error(`Slayer's Prey ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.gDJIoRL1J8BzIr3y"},"favtab":{"isFavorite":false},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"scene-packer":{"sourceId":"Item.S4ZCosrLFDYt5f8h"}},"system":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":90,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926110,"modifiedTime":1664951477680,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"Z4PCR56q5U8yRomy"}
{"name":"Indomitable 10.0.10","type":"feat","img":"icons/magic/fire/flame-burning-fist-strike.webp","effects":[{"_id":"SHvyJB88YUaHZah1","changes":[{"key":"flags.midi-qol.optional.indomitable.save.fail","mode":0,"value":"reroll","priority":20},{"key":"flags.midi-qol.optional.indomitable.count","mode":5,"value":"ItemUses.Indomitable","priority":20},{"key":"flags.midi-qol.optional.indomitable.label","mode":5,"value":"Indomitable","priority":20}],"disabled":false,"duration":{"startTime":null,"startTurn":1,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null},"icon":"icons/magic/fire/flame-burning-fist-strike.webp","label":"Indomitable","origin":"Item.eUxGqS9qIXPd8ajy","tint":null,"transfer":true,"flags":{"dae":{"transfer":true,"macroRepeat":"none","specialDuration":[],"stackable":"none","durationExpression":""},"times-up":{"isPassive":false},"autoanimations":{"aaAeStatus":"on","aaAeTokenId":"c6rldc0205ey03u3","version":4},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.653ZHbNcmm7ZGXbw"},"scene-packer":{"hash":"98049b228c06dc225a994f6d75969e7dcc2763c5","sourceId":"Item.NJDzoildDlcOraWt"},"cf":{"id":"temp_qt0kn9os0vl"}},"system":{"description":{"value":"<p>You can reroll a saving throw that you fail. If you do so, you must use the new roll, and you can't use this feature again until you finish a long rest.</p><p>You can use this feature twice between long rests starting at 13th level and three times between long rests starting at 17th level.</p><p>Midi-qol:</p><p><strong>You must rename this item to Indomitable when equipping on an actor</strong></p>","chat":"","unidentified":""},"source":"PHB pg. 72","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":1,"max":"@scale.fighter.indomitable","per":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Fighter 9","recharge":{"value":null,"charged":false},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926161,"modifiedTime":1663463889104,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"acn9E3gbJa8k5MpD"}
{"name":"#[CF_tempEntity]","type":"weapon","flags":{"cf":{"id":"temp_mxc6kjqa6kp","name":"Items","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"a","contents":["QpWpCN7kYeEQWCiV","CuKqUiDnZGQQ7bx0","cNw1c7OnruZciomm","xJzlfmiBeSUTjtrR","rrrAyJGmxmed55VS","ybyG4HZzSXOzQwBm","oC026qY3uQUIqTge","eGa4804oiwrStkZ7","rTsCF68JRE4Z4bVM"],"children":[]}},"img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1663463599110,"modifiedTime":1663473241734,"lastModifiedBy":"devnIbfBHb74U9Zv"},"_id":"buZ9noyHiuGu00Zn"}
{"name":"Longsword of Sharpness 10.0.10","type":"weapon","img":"icons/skills/wounds/bone-broken-knee-beam.webp","effects":[{"_id":"4X2IaiMLJjtZdx6w","changes":[{"key":"ATL.dimLight","mode":2,"value":"20","priority":20},{"key":"ATL.brightLight","mode":2,"value":"10","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/wounds/bone-broken-knee-beam.webp","label":"Light","origin":"Item.MtAhj7vLj0hWwjfz","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"midi-qol":{"criticalThreshold":"20","onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.dnd5e.items.8MNDhKb1Q87QszOJ"},"itemacro":{"macro":{"data":{"_id":null,"name":"Longsword of Sharpness MQ0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].diceRoll === 20 && args[0]itemData.data.attunement !== 1) {\n    const d20 = await (new Roll(\"1d20\")).roll().total;\n    if (d20 === 20) {\n        ChatMessage.create({content: \"Sword of Sharpness severed a limb\"})\n    }\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Longsword of Sharpness MQ0.8.85","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    if (args[0].diceRoll === 20 && args[0].itemData.system.attunement !== 1) {\n        const d20 = await (new Roll(\"1d20\")).roll().total;\n        if (d20 === 20) {\n            ChatMessage.create({content: \"Sword of Sharpness severed a limb\"})\n        }\n    }\n} catch (err) {\n\t    console.error(`${args[0].itemData.name} - Longsword of Sharpness ${version}`, err);\n\t\treturn {}\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":true,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>When you attack an object with this magic sword and hit, maximize your weapon damage dice against the target.</p>\n<p>When you attack a creature with this weapon and roll a 20 on the attack roll, that target takes an extra 4d6 slashing damage. Then roll another d20. If you roll a 20, you lop off one of the target's limbs, with the effect of such loss determined by the GM. If the creature has no limb to sever, you lop off a portion of its body instead.</p>\n<p>In addition, you can speak the sword's command word to cause the blade to shed bright light in a 10-foot radius and dim light for an additional 10 feet. Speaking the command word again or sheathing the sword puts out the light.</p>\n<p> </p>\n<p>MidiQOL: handles the damage. ATL handles the light effects.</p>","chat":"","unidentified":""},"source":"DMG pg. 206","quantity":1,"weight":3,"price":1700,"attunement":1,"equipped":false,"rarity":"veryRare","identified":true,"activation":{"type":"action","cost":1,"condition":"workflow.diceRoll === 20"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":10,"long":20,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod","slashing"]],"versatile":"1d10 + @mod"},"formula":"4d6","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false,"nodam":false,"fulldam":false,"halfdam":false,"critOther":false},"proficient":false,"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926157,"modifiedTime":1663463752006,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"cNw1c7OnruZciomm"}
{"name":"Emboldening Bond 10.0.10","type":"feat","img":"icons/magic/control/silhouette-hold-change-blue.webp","effects":[{"_id":"ZjUL6z2dhutiFxRk","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/silhouette-hold-change-blue.webp","label":"Emboldening Bond","origin":"Item.Ey9NYAkSKTs0Kpva","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"startEveryTurn","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"midi-qol":{"onUseMacroName":"","effectActivation":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Emboldening Bond","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    const effectData = {\n        changes: [\n            {key: \"flags.midi-qol.optional.emboldeningBond.attack\", mode: 5, value: \"1d4\", priority: \"20\"},\n            {key: \"flags.midi-qol.optional.emboldeningBond.save\", mode: 5, value: \"1d4\", priority: \"20\"},\n            {key: \"flags.midi-qol.optional.emboldeningBond.check\", mode: 5, value: \"1d4\", priority: \"20\"},\n            {key: \"flags.midi-qol.optional.emboldeningBond.label\", mode: 5, value: \"Emboldening Bond\", priority: \"20\"},\n        ],\n        disabled: false,\n        duration: {rounds: 1, seconds: undefined, startRound: undefined, startTime: undefined, startTurn: undefined, turns: undefined},\n        icon: \"icons/magic/control/silhouette-hold-change-blue.webp\",\n        label: \"Emboldening Bond Bonus\",\n        tint: null,\n        transfer: false,\n        flags: {dae : {specialDuration: [\"turnStart\"]}}\n    }\n    \n    \n    if (args[0] === \"each\" || args[0] === \"on\") {\n        token = await fromUuid(args[1].tokenUuid)\n        token.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData])\n    }\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Emboldening Bond ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Emboldening Bond 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    const effectData = {\n        changes: [\n            {key: \"flags.midi-qol.optional.emboldeningBond.attack\", mode: 5, value: \"1d4\", priority: \"20\"},\n            {key: \"flags.midi-qol.optional.emboldeningBond.save\", mode: 5, value: \"1d4\", priority: \"20\"},\n            {key: \"flags.midi-qol.optional.emboldeningBond.check\", mode: 5, value: \"1d4\", priority: \"20\"},\n            {key: \"flags.midi-qol.optional.emboldeningBond.label\", mode: 5, value: \"Emboldening Bond\", priority: \"20\"},\n        ],\n        disabled: false,\n        duration: {rounds: 1, seconds: undefined, startRound: undefined, startTime: undefined, startTurn: undefined, turns: undefined},\n        icon: \"icons/magic/control/silhouette-hold-change-blue.webp\",\n        label: \"Emboldening Bond Bonus\",\n        tint: null,\n        transfer: false,\n        flags: {dae : {specialDuration: [\"turnStart\"]}}\n    }\n    \n    \n    if (args[0] === \"each\" || args[0] === \"on\") {\n        token = await fromUuid(args[1].tokenUuid)\n        token.actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData])\n    }\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Emboldening Bond ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.Ey9NYAkSKTs0Kpva"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Emboldeing Bond is not SRD so you will need to populate the text.</p><p><br />Implemented:<br />Rolling the feature gives targeted tokens an effec that grants a once off bonus at the start of their turn to add 1d4 to any attack/save.check and is then removed until the start of their next turn.</p><p>v10.0.8<br />Not implemented: <br />  removal when you use the feat again (would require concentration).</p><p>   needing another bondee within 30 feet (would require active auras, but it all got too hard).</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926149,"modifiedTime":1663463850109,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"cQMyqIcR4nL2vjLR"}
{"name":"Absorb Elements 10.0.10","type":"spell","img":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","effects":[{"_id":"iJ9E4fnIwXjfi1TP","flags":{"dae":{"stackable":"none","macroRepeat":"none","transfer":false,"specialDuration":["DamageDealt"],"selfTarget":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"changes":[{"key":"system.bonuses.msak.damage","mode":0,"value":"0","priority":20},{"key":"system.bonuses.mwak.damage","mode":0,"value":"0","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":2,"startTurn":1,"seconds":null,"combat":null,"turns":null,"startRound":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements","tint":null,"transfer":false,"origin":null},{"_id":"8r9eWcqP6QyIbPWU","changes":[{"key":"system.traits.dr.value","mode":2,"value":"fire","priority":20}],"disabled":false,"duration":{"rounds":2,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-red.webp","label":"Absorb Elements Resistance","origin":"Item.csBPw2sdmOigPnOV","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEnd"],"transfer":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"flags":{"dynamiceffects":{"equipActive":[true,true,true],"alwaysActive":[true,true,true]},"mess":{"templateTexture":""},"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"waterdeep-dungeon-of-the-mad-mage","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.4"},"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"itemacro":{"macro":{"data":{"_id":null,"name":"Absorb Elements","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"let tactor;\nlet itemname = \"Absorb Elements\";\nif (args[0].tokenUuid) tactor = (await fromUuid(args[0].tokenUuid)).actor;\nelse tactor = game.actors.get(args[0].actorId);\n\nlet dialog = new Promise((resolve, reject) => {\n    new Dialog({\n        title: 'Choose a damage type',\n        content: `\n          <form class=\"flexcol\">\n            <div class=\"form-group\">\n              <select id=\"element\">\n                <option value=\"acid\">Acid</option>\n                <option value=\"cold\">Cold</option>\n                <option value=\"fire\">Fire</option>\n                <option value=\"lightning\">Lightning</option>\n                <option value=\"thunder\">Thunder</option>\n              </select>\n            </div>\n          </form>\n        `,\n        //select element type\n        buttons: {\n            yes: {\n                icon: '<i class=\"fas fa-bolt\"></i>',\n                label: 'Select',\n                callback: async (html) => {\n                    let element = html.find('#element').val();\n                    let effect =  tactor.effects.find(i => i.data.label === itemname);\n                    let changes = duplicate(effect.data.changes);\n                    changes[0].value = `${args[0].spellLevel}d6[${element}]`;\n                    changes[1].value = `${args[0].spellLevel}d6[${element}]`;\n                    await effect.update({changes});\n                    effect =  tactor.effects.find(i => i.data.label === `${itemname} Resistance`);\n                    changes = duplicate(effect.data.changes);\n                    changes[0].value = element;\n                    await effect.update({changes});\n                    resolve();\n                },\n            },\n        }\n    }).render(true);\n})\nawait dialog;","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Absorb Elements","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n  let tactor;\n  let itemName = args[0].itemData.name;\n  if (args[0].tokenUuid) tactor = (await fromUuid(args[0].tokenUuid)).actor;\n  else tactor = game.actors.get(args[0].actorId);\n\n  let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n          title: 'Choose a damage type',\n          content: `\n            <form class=\"flexcol\">\n              <div class=\"form-group\">\n                <select id=\"element\">\n                  <option value=\"acid\">Acid</option>\n                  <option value=\"cold\">Cold</option>\n                  <option value=\"fire\">Fire</option>\n                  <option value=\"lightning\">Lightning</option>\n                  <option value=\"thunder\">Thunder</option>\n                </select>\n              </div>\n            </form>\n          `,\n          //select element type\n          buttons: {\n              yes: {\n                  icon: '<i class=\"fas fa-bolt\"></i>',\n                  label: 'Select',\n                  callback: async (html) => {\n                      let element = html.find('#element').val();\n                      let effect =  tactor.effects.find(i => i.label === itemName);\n                      let changes = duplicate(effect.changes);\n                      changes[0].value = `${args[0].spellLevel}d6[${element}]`;\n                      changes[1].value = `${args[0].spellLevel}d6[${element}]`;\n                      await effect.update({changes});\n                      effect =  tactor.effects.find(i => i.label === `${itemName} Resistance`);\n                      changes = duplicate(effect.changes);\n                      changes[0].value = element;\n                      await effect.update({changes});\n                      resolve();\n                  },\n              },\n          }\n      }).render(true);\n  })\n  await dialog;\n} catch (err) {\n    console.error(`${itemName} - Absorb Elements ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"onUseMacroParts":{"0":{"0":"ItemMacro","1":"postActiveEffects"}}},"core":{"sourceId":"Item.jwe2NqmH3YX6SMVx"},"favtab":{"isFavorite":false},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{},"autoOverride":{"enable":false},"version":4,"audio":{"a01":{"enable":false,"file":"","delay":0,"volume":0.25},"e01":{"enable":false,"file":"","delay":0,"volume":0.25}}}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes an extra [[/r 1d6]] damage of the triggering type, and the spell ends.</p><div class=\"rd__spc-inline-post\"><p></p></div></div><div class=\"rd__b  rd__b--3\"><div class=\"rd__b  rd__b--3\"><p><span class=\"entry-title-inner\">At Higher Levels.</span></p><p>When you cast this spell using a spell slot of 2nd level or higher, the extra damage increases by [[/r 1d6]] for each slot level above 1st.</p><div class=\"rd__spc-inline-post\"><p></p></div></div><div class=\"rd__spc-inline-post\"><p>Midi-qol 10.0.10<br /><strong>When equipped you must rename the item to Absorb Elements</strong></p></div></div>","chat":"","unidentified":""},"source":"XGE","activation":{"type":"reactiondamage","cost":1,"condition":"which you take when you take acid, cold, fire, lightning, or thunder damage"},"duration":{"value":1,"units":"round"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"","vocal":false,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"1d6"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926181,"modifiedTime":1664949416328,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"dXmVmtPohHzYhEWp"}
{"name":"Legendary Resistance 10.0.10","type":"feat","img":"icons/equipment/shield/kite-wooden-oak-glow.webp","effects":[{"_id":"FniO7deC5cNc9vuy","changes":[{"key":"flags.midi-qol.optional.LegRes.save.all","mode":5,"value":"success","priority":20},{"key":"flags.midi-qol.optional.LegRes.count","mode":5,"value":"@resources.legres.value","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/equipment/shield/kite-wooden-oak-glow.webp","label":"Legendary Resistance","origin":"Item.rO1EWt1SPvUJg7k3","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"flags":{"betterRolls5e":{"critRange":{"type":"String","value":""},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":false},"altValue":{"use":true,"resource":true,"charge":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.rO1EWt1SPvUJg7k3"},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<div class=\"rd__b  rd__b--3\"><p>If the legendary creature fails a saving throw, it can choose to succeed instead.</p><div class=\"rd__spc-inline-post\"><p></p></div></div>","chat":"","unidentified":""},"source":"MM","activation":{"type":"none","cost":0,"condition":"If the creature fails a saving throw, it can choose to succeed instead."},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":3,"max":"3","per":"day"},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"requirements":"","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926170,"modifiedTime":1663463692830,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"dehZbfvDLvSUscOu"}
{"name":"Devil's Glaive 10.0.10","type":"weapon","img":"icons/weapons/polearms/glaive-simple.webp","effects":[{"_id":"JL0UfgqJsGSpflvT","flags":{"dae":{"stackable":"count","specialDuration":[],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"inactive":false,"hidden":false,"height":false,"aura":"None","radius":null,"ignoreSelf":false,"alignment":"","type":"","hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=end,\ndamageRoll=1d10,\ntype=slashing,\nsaveDC=12,\nsaveAbility=con,\nlabel=Infernal Wound","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":99,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/weapons/polearms/halberd-crescent-glowing.webp","label":"Infernal Wound","origin":"Actor.A4wkHpF2qMwjyP1D.Item.tfAshukITeyA5QKb","tint":null,"transfer":false}],"flags":{"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":false,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"dae":{"activeEquipped":false,"alwaysActive":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Devil's Glaive MQ0.8.51","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    const lastArg = args[args.length-1];\n    if (args[0] === \"on\") {\n      let target = canvas.tokens.get(args[3]);\n      let flag = DAE.getFlag(target, \"infernal-wounds\") || {hookId: 0, woundCount: 0};\n    console.error(\"fetching flag \", target.id, flag);\n      flag.woundCount = flag.woundCount + 1;\n      if (!flag.hookId) {\n        console.error(\"hookId not set\");\n        flag.hookId = Hooks.on(\"deleteActiveEffect\", (actor, effectId) => {\n          console.error(\"Resetting wound count\");\n          if (effectId === lastArg.effectId)\n            DAE.unsetFlag(tactor, \"infernal-wounds\");\n        })\n      }\n      DAE.setFlag(target, \"infernal-wounds\", flag);\n    \n    } else if (args[0] === \"each\") {\n      let tactor;\n      let ttoken = canvas.tokens.get(lastArg.tokenId);\n      if (ttoken) tactor = ttoken.actor;\n      else tactor = game.actors.get(lastArg.actorId);\n      let damageItem = Item.createOwned(game.items.getName(\"Infernal Wound\"), tactor);\n      let saveTargets = game.user.targets;\n      game.user.targets = new Set([ttoken]);\n      let hookId = Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n        if (workflow.saves.has(ttoken)) {\n          tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.efData._id);\n        }\n      })\n     try {\n      damageItem.roll();\n      let flag = DAE.getFlag(ttoken, \"infernal-wounds\") || {hookId: 0, woundCount: 1};\n      } finally {\n       game.user.targets = saveTargets;\n      }\n    } else if (args[0] === \"off\") {\n    // do any clean up\n    }\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Devil's Glaive ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Devil's Glaive 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    const lastArg = args[args.length-1];\n    if (args[0] === \"on\") {\n      let target = canvas.tokens.get(args[3]);\n      let flag = DAE.getFlag(target, \"infernal-wounds\") || {hookId: 0, woundCount: 0};\n    console.error(\"fetching flag \", target.id, flag);\n      flag.woundCount = flag.woundCount + 1;\n      if (!flag.hookId) {\n        console.error(\"hookId not set\");\n        flag.hookId = Hooks.on(\"deleteActiveEffect\", (actor, effectId) => {\n          console.error(\"Resetting wound count\");\n          if (effectId === lastArg.effectId)\n            DAE.unsetFlag(tactor, \"infernal-wounds\");\n        })\n      }\n      DAE.setFlag(target, \"infernal-wounds\", flag);\n    \n    } else if (args[0] === \"each\") {\n      let tactor;\n      let ttoken = canvas.tokens.get(lastArg.tokenId);\n      if (ttoken) tactor = ttoken.actor;\n      else tactor = game.actors.get(lastArg.actorId);\n      let damageItem = Item.createOwned(game.items.getName(\"Infernal Wound\"), tactor);\n      let saveTargets = game.user.targets;\n      game.user.targets = new Set([ttoken]);\n      let hookId = Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n        if (workflow.saves.has(ttoken)) {\n          tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.efData._id);\n        }\n      })\n     try {\n      damageItem.roll();\n      let flag = DAE.getFlag(ttoken, \"infernal-wounds\") || {hookId: 0, woundCount: 1};\n      } finally {\n       game.user.targets = saveTargets;\n      }\n    } else if (args[0] === \"off\") {\n    // do any clean up\n    }\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Devil's Glaive ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.0AgqaCUkEyZCbC5Y"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false,"set1s":false,"set2s":false,"set3s":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"Melee Weapon Attack: +5 to hit, reach 10 ft., one target. Hit: 8 (1d10 + 3) slashing damage. If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (Medicine) check. The wound also closes if the target receives magical healing.","chat":"If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (","unidentified":"Glaive"},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":10,"long":5,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"str","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d10 + 3","slashing"]],"versatile":""},"formula":"","save":{"ability":"","dc":18,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"fin":false,"fir":false,"hvy":false,"lgt":false,"rch":true,"rel":false,"spc":false,"thr":false,"two":false,"ver":false,"ada":false,"foc":false,"lod":false,"mgc":false,"ret":false,"sil":false},"proficient":false,"recharge":{"value":null,"charged":true},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926164,"modifiedTime":1663463759840,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"eGa4804oiwrStkZ7"}
{"name":"Lucky (Resource Usage) 10.0.12","type":"feat","img":"icons/magic/light/hand-sparks-glow-yellow.webp","effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.lucky.attack.all","mode":5,"value":"reroll-kh","priority":20},{"key":"flags.midi-qol.optional.lucky.label","mode":5,"value":"Lucky","priority":20},{"key":"flags.midi-qol.optional.lucky.save.all","mode":5,"value":"reroll-kh","priority":20},{"key":"flags.midi-qol.optional.lucky.check.all","mode":5,"value":"reroll-kh","priority":20},{"key":"flags.midi-qol.optional.lucky.count","mode":5,"value":"@resources.tertiary.value","priority":20},{"key":"system.resources.tertiary.label","mode":5,"value":"Luck Points","priority":20},{"key":"system.resources.tertiary.lr","mode":5,"value":"1","priority":20},{"key":"system.resources.tertiary.max","mode":5,"value":"3","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/hand-sparks-glow-yellow.webp","label":"Lucky","origin":"Item.dQvh9dejF0s0d9nk","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","forceCEOn":false,"effectActivation":false},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":true},"altValue":{"use":true,"resource":true,"charge":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>The Luck feat is not SRD so you will have to populate the description.</p><p></p><p><strong>Midi-qol: must rename to Lucky when equipped</strong></p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr","recovery":"","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926151,"modifiedTime":1664204473738,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"ezDSN0zncAUljyYI"}
{"name":"Uncanny Dodge 10.0.10","type":"feat","img":"icons/skills/movement/feet-winged-boots-brown.webp","effects":[{"_id":"ksFos60cgn0TWTFP","changes":[{"key":"flags.midi-qol.uncanny-dodge","mode":5,"value":"1","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/movement/feet-winged-boots-brown.webp","label":"1/2 Damage","origin":"Item.eEmSsq7xE3i0EyBS","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Reaction"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.Mm64SKAHJWYecgXS"},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":true},"altValue":{"use":true,"resource":true,"charge":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"}},"system":{"description":{"value":"<p>Starting at 5th level, when an attacker that you can see hits you with an attack, you can use your reaction to halve the attack's damage against you.</p>","chat":"","unidentified":""},"source":"PHB pg. 96","activation":{"type":"reactiondamage","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Rogue 5","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926137,"modifiedTime":1663472952893,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"fUYuDY1NrmzpghcM"}
{"name":"Greater Invisibility 10.0.10 - CE","type":"spell","img":"icons/magic/air/fog-gas-smoke-swirling-gray.webp","effects":[{"_id":"GoUSbGdrl7G0I89N","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null,"displayTemp":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"changes":[{"key":"StatusEffect","mode":0,"value":"Convenient Effect: Invisible","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/fog-gas-smoke-swirling-gray.webp","label":"Invisible","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MtbkgRT7nopCAnpB","tint":null,"transfer":false}],"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.MtbkgRT7nopCAnpB"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p><p> * This version of Greater Invisibility uses the core Invisible status effect and interacts with foundry vision modes</p>","chat":"","unidentified":""},"source":"PHB pg. 254","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"ill","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An eyelash encased in gum arabic","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661857202914,"modifiedTime":1663463701664,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"gQ4yXqFH9udMdKYV"}
{"name":"Divine Smite 10.0.8","type":"spell","img":"icons/skills/melee/weapons-crossed-swords-yellow-teal.webp","effects":[],"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"macro.itemMacro","value":"@target @item.level @item","mode":"+","targetSpecific":false,"id":1,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[]},{"modSpecKey":"macro.tokenMagic","value":"fumes","mode":"+","targetSpecific":false,"id":2,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[],"label":"Macro TokenMagic"}],"equipActive":false,"alwaysActive":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"critRange":{"value":""},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false}},"favtab":{"isFavourite":true,"isFavorite":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Divine Smite MQ0.8.88","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    let target = await fromUuid(args[0].hitTargetUuids[0] ?? \"\");\n    let numDice = 1 + args[0].spellLevel;\n    if (numDice > 5) numDice = 5;\n    // Apparently improved divine smite should not be added to the divine smite. Uncomment these lines if you want it to be included\n    // if (improvedDivineSmite) numDice += 1;\n    // let improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\n    let undead = [\"undead\", \"fiend\"].some(type => (target?.actor.data.data.details.type?.value || \"\").toLowerCase().includes(type));\n    if (undead) numDice += 1;\n    if (args[0].isCritical) numDice = numDice * 2;\n    let damageRoll = await new Roll(`${numDice}d8`).roll();\n    new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Divine Smite ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Divine Smite 10.0.8","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.8\";\ntry {\n    let target = await fromUuid(args[0].hitTargetUuids[0] ?? \"\");\n    let numDice = 1 + args[0].spellLevel;\n    if (numDice > 5) numDice = 5;\n    // Apparently improved divine smite should not be added to the divine smite. Uncomment these lines if you want it to be included\n    // if (improvedDivineSmite) numDice += 1;\n    // let improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\n    let undead = [\"undead\", \"fiend\"].some(type => (target?.actor.system.details.type?.value || \"\").toLowerCase().includes(type));\n    if (undead) numDice += 1;\n    if (args[0].isCritical) numDice = numDice * 2;\n    let damageRoll = await new Roll(`${numDice}d8`).roll({async: true});\n    new MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Divine Smite ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"mess":{"templateTexture":""},"dae":{"alwaysActive":false,"activeEquipped":false},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false},"core":{"sourceId":"Item.pJKe8oNZdJSKtbcu"},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":25},"item":{"enableAudio":false,"file":"","delay":100,"volume":25}},"autoOverride":{"enable":false},"version":1},"scene-packer":{"sourceId":"Item.2XCtHOdRoQPD7PYj"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 2nd Level, when you hit a creature with a melee weapon Attack, you can expend one spell slot to deal radiant damage to the target, in addition to the weapon’s damage.</p>\n<p>The extra damage is 2d8 for a 1st-level spell slot, plus 1d8 for each Spell Level higher than 1st, to a maximum of 5d8.</p>\n<p>The damage increases by 1d8 if the target is an Undead or a fiend, to a maximum of 6d8.</p>\n<p> </p>\n<p>This item uses the \"item macro\" feature where the macro that does the rolling is bound to the item. If you want to edit the macro you need to have the item macros module installed, but it is not required to just use the item.</p>\n<p> </p>\n<p>Update: according to sources (Jeremy Crawford) improved divine smite does not increase the damage done by a divine smite - despite the helper text in improved divine smite.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":5,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"spellType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"concentration":{"value":null,"_deprecated":true},"ritual":{"value":null,"_deprecated":true},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926172,"modifiedTime":1663472820773,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"h9fWiB3s2YWtzagY"}
{"name":"Toll the Dead 10.0.13","type":"spell","img":"icons/magic/water/orb-ice-glow.webp","effects":[],"flags":{"ddbimporter":{"id":138274,"definitionId":14615,"entityTypeId":435869154,"dndbeyond":{"lookup":"generic","lookupName":"generic","level":null,"castAtLevel":null},"sources":[{"sourceId":27,"pageNumber":169,"sourceType":1}],"tags":["Damage"]},"betterRolls5e":{"quickVersatile":{"altValue":true},"quickCharges":{"value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preDamageRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Compendium.world.ddb-spells.eWALttYghEEA1qOa"},"scene-packer":{"hash":"9f7ff19882d5754133397d9eb2657cd5ce210bd1","sourceId":"Item.CHNM01gLo3kddfju"},"itemacro":{"macro":{"data":{"_id":null,"name":"Toll the Dead","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].macroPass === \"preDamageRoll\") {\n    const target = await fromUuid(args[0].targetUuids[0]);\n    const needsD12 = target.actor.data.data.attributes.hp.value < target.actor.data.data.attributes.hp.max;\n    const theItem = await fromUuid(args[0].uuid);\n    let formula = theItem.data.data.damage.parts[0][0];\n    if (needsD12) \n        formula = formula.replace(\"d8\", \"d12\")\n    else \n        formula = formula.replace(\"d12\", \"d8\");\n    theItem.data.data.damage.parts[0][0] = formula;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Toll the Dead 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    if (args[0].macroPass === \"preDamageRoll\") {\n        const target = await fromUuid(args[0].targetUuids[0]);\n        const needsD12 = target.actor.system.attributes.hp.value < target.actor.system.attributes.hp.max;\n        const theItem = await fromUuid(args[0].uuid);\n        let formula = theItem.system.damage.parts[0][0];\n        let scalingFormula = theItem.system.scaling.formula;\n        if (needsD12) {\n            formula = formula.replace(\"d8\", \"d12\");\n            if (scalingFormula) scalingFormula = scalingFormula.replace(\"d8\", \"d12\");\n        }\n        else  {\n            formula = formula.replace(\"d12\", \"d8\");\n            if (scalingFormula) scalingFormula = scalingFormula.replace(\"d12\", \"d8\");\n        }\n        theItem.system.scaling.formula = scalingFormula;\n        theItem.system.damage.parts[0][0] = formula;\n    }\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Toll The Dead ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"cf":{"id":"temp_0hvf80hl1zcf"}},"system":{"description":{"value":"<p class=\"Core-Styles_Core-Body\">You will need to add the description yourself.</p>","chat":"<p class=\"Core-Styles_Core-Body\">You point at one creature you can see within range, and the sound of a dolorous bell fills the air around it for a moment. The target must succeed on a Wisdom saving throw or take 1d8 necrotic damage. If the target is missing any of its hit points, it instead takes 1d12 necrotic damage.</p>\n<p class=\"Core-Styles_Core-Body\">The spell’s damage increases by one die when you reach 5th level (2d8 or 2d12), 11th level (3d8 or 3d12), and 17th level (4d8 or 4d12).</p>","unidentified":""},"source":"Xanathar's Guide to Everything pg 169","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["1d12","necrotic"]],"versatile":""},"formula":"","save":{"ability":"wis","dc":null,"scaling":"spell"},"level":0,"school":"nec","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"cantrip","formula":"1d12"},"attributes":{"spelldc":10},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926140,"modifiedTime":1664409378338,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"hVQJeyInr2VJSv6M"}
{"name":"GM Inspiration 10.0.10","type":"feat","img":"icons/magic/control/buff-luck-fortune-green.webp","effects":[{"_id":"9kPKxYfLznahYDJe","changes":[{"key":"flags.midi-qol.advantage.all","mode":5,"value":"1","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/buff-luck-fortune-green.webp","label":"GM Inspiration","origin":"Item.F58v9Hv37KF4JszF","transfer":false,"flags":{"dae":{"stackable":false,"macroRepeat":"none","specialDuration":["1Action","isSave","isCheck","isSkill"],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"itemacro":{"macro":{"data":{"_id":null,"name":"Inspiration","type":"script","author":"g4WGw0lAZ3nIhapn","img":"icons/svg/dice-target.svg","scope":"global","command":"actor.deleteEmbeddedDocuments(\"Item\", [item.id])","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"GM Inspiration","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    actor.deleteEmbeddedDocuments(\"Item\", [item.id]);\n} catch (err) {\n    console.error(`GM Inspiration ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false},"core":{"sourceId":"Item.F58v9Hv37KF4JszF"},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"system":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926122,"modifiedTime":1663463694067,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"iKXHFsx31DC3o232"}
{"name":"Flaming Sphere MQ10.0.13 + warpgate","type":"spell","img":"icons/magic/fire/orb-vortex.webp","effects":[],"flags":{"betterRolls5e":{"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":true},"altValue":{"use":false,"resource":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":false,"onUseMacroParts":{"0":{"0":"ItemMacro","1":"postActiveEffects"}}},"itemacro":{"macro":{"data":{"_id":null,"name":"Flaming Sphere MQ0.8.74 + warpgate","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].tag === \"OnUse\") {\n    const casterToken = await fromUuid(args[0].tokenUuid);\n    const caster = casterToken.actor;\n    let sphereActor = game.actors.getName(\"Flaming Sphere\");\n    if (!sphereActor) {\n        const jsonData = JSON.parse('{\"name\":\"Flaming Sphere\",\"type\":\"npc\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"abilities\":{\"str\":{\"value\":10,\"proficient\":0},\"dex\":{\"value\":10,\"proficient\":0},\"con\":{\"value\":10,\"proficient\":0},\"int\":{\"value\":10,\"proficient\":0},\"wis\":{\"value\":10,\"proficient\":0},\"cha\":{\"value\":10,\"proficient\":0}},\"attributes\":{\"ac\":{\"flat\":10,\"calc\":\"natural\",\"formula\":\"\"},\"hp\":{\"value\":10,\"min\":0,\"max\":10,\"temp\":0,\"tempmax\":null,\"formula\":\"\"},\"init\":{\"value\":0,\"bonus\":0},\"movement\":{\"burrow\":0,\"climb\":0,\"fly\":0,\"swim\":0,\"walk\":30,\"units\":\"ft\",\"hover\":false},\"senses\":{\"darkvision\":0,\"blindsight\":0,\"tremorsense\":0,\"truesight\":0,\"units\":\"ft\",\"special\":\"\"},\"spellcasting\":\"int\",\"death\":{\"success\":0,\"failure\":0}},\"details\":{\"biography\":{\"value\":\"\",\"public\":\"\"},\"alignment\":\"\",\"race\":\"\",\"type\":{\"value\":\"\",\"subtype\":\"\",\"swarm\":\"\",\"custom\":\"\"},\"environment\":\"\",\"cr\":1,\"spellLevel\":0,\"xp\":{\"value\":10},\"source\":\"\",\"gender\":\"\",\"age\":\"\",\"height\":\"\",\"weight\":\"\",\"eyes\":\"\",\"skin\":\"\",\"hair\":\"\",\"notes1name\":\"\",\"notes2name\":\"\",\"notes3name\":\"\",\"notes4name\":\"\"},\"traits\":{\"size\":\"med\",\"di\":{\"value\":[],\"custom\":\"\"},\"dr\":{\"value\":[],\"custom\":\"\"},\"dv\":{\"value\":[],\"custom\":\"\"},\"ci\":{\"value\":[],\"custom\":\"\"},\"languages\":{\"value\":[],\"custom\":\"\"}},\"currency\":{\"pp\":0,\"gp\":0,\"ep\":0,\"sp\":0,\"cp\":0},\"skills\":{\"acr\":{\"value\":0,\"ability\":\"dex\"},\"ani\":{\"value\":0,\"ability\":\"wis\"},\"arc\":{\"value\":0,\"ability\":\"int\"},\"ath\":{\"value\":0,\"ability\":\"str\"},\"dec\":{\"value\":0,\"ability\":\"cha\"},\"his\":{\"value\":0,\"ability\":\"int\"},\"ins\":{\"value\":0,\"ability\":\"wis\"},\"itm\":{\"value\":0,\"ability\":\"cha\"},\"inv\":{\"value\":0,\"ability\":\"int\"},\"med\":{\"value\":0,\"ability\":\"wis\"},\"nat\":{\"value\":0,\"ability\":\"int\"},\"prc\":{\"value\":0,\"ability\":\"wis\"},\"prf\":{\"value\":0,\"ability\":\"cha\"},\"per\":{\"value\":0,\"ability\":\"cha\"},\"rel\":{\"value\":0,\"ability\":\"int\"},\"slt\":{\"value\":0,\"ability\":\"dex\"},\"ste\":{\"value\":0,\"ability\":\"dex\"},\"sur\":{\"value\":0,\"ability\":\"wis\"}},\"spells\":{\"spell1\":{\"value\":0,\"override\":null},\"spell2\":{\"value\":0,\"override\":null},\"spell3\":{\"value\":0,\"override\":null},\"spell4\":{\"value\":0,\"override\":null},\"spell5\":{\"value\":0,\"override\":null},\"spell6\":{\"value\":0,\"override\":null},\"spell7\":{\"value\":0,\"override\":null},\"spell8\":{\"value\":0,\"override\":null},\"spell9\":{\"value\":0,\"override\":null},\"pact\":{\"value\":0,\"override\":null}},\"bonuses\":{\"mwak\":{\"attack\":\"\",\"damage\":\"\"},\"rwak\":{\"attack\":\"\",\"damage\":\"\"},\"msak\":{\"attack\":\"\",\"damage\":\"\"},\"rsak\":{\"attack\":\"\",\"damage\":\"\"},\"abilities\":{\"check\":\"\",\"save\":\"\",\"skill\":\"\"},\"spell\":{\"dc\":\"\"}},\"resources\":{\"legact\":{\"value\":0,\"max\":0},\"legres\":{\"value\":0,\"max\":0},\"lair\":{\"value\":false,\"initiative\":0}}},\"token\":{\"_id\":\"wsnEu8ZSbBYL5S9i\",\"name\":\"Flaming Sphere\",\"displayName\":0,\"actorId\":\"WlOopcsUtThmw4gy\",\"actorLink\":false,\"actorData\":{},\"img\":\"icons/magic/fire/orb-vortex.webp\",\"tint\":null,\"width\":1,\"height\":1,\"scale\":1,\"mirrorX\":false,\"mirrorY\":false,\"x\":null,\"y\":null,\"elevation\":null,\"lockRotation\":false,\"rotation\":0,\"effects\":[],\"alpha\":1,\"hidden\":false,\"vision\":false,\"dimSight\":0,\"brightSight\":30,\"dimLight\":40,\"brightLight\":20,\"sightAngle\":0,\"lightAngle\":0,\"lightColor\":\"#a2642a\",\"lightAlpha\":0.4,\"lightAnimation\":{\"speed\":5,\"intensity\":5,\"type\":\"torch\"},\"disposition\":1,\"displayBars\":0,\"bar1\":{\"attribute\":\"attributes.hp\"},\"bar2\":{\"attribute\":\"\"},\"flags\":{\"conditional-visibility\":{\"invisible\":false,\"obscured\":false,\"indarkness\":false,\"hidden\":false,\"_ste\":null},\"tokenmagic\":{},\"ActiveAuras\":false,\"monks-tokenbar\":{\"movement\":null}},\"tokenId\":null,\"randomImg\":false},\"items\":[{\"_id\":\"O9ThymNjpRlq26u1\",\"name\":\"Flaming Sphere Damage\",\"type\":\"weapon\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"description\":{\"value\":\"\",\"chat\":\"\",\"unidentified\":\"\"},\"source\":\"\",\"quantity\":1,\"weight\":0,\"price\":0,\"attunement\":0,\"equipped\":true,\"rarity\":\"\",\"identified\":true,\"activation\":{\"type\":\"special\",\"cost\":0,\"condition\":\"\"},\"duration\":{\"value\":null,\"units\":\"\"},\"target\":{\"value\":null,\"width\":null,\"units\":\"\",\"type\":\"\"},\"range\":{\"value\":null,\"long\":null,\"units\":\"\"},\"uses\":{\"value\":0,\"max\":\"0\",\"per\":\"\"},\"consume\":{\"type\":\"\",\"target\":\"\",\"amount\":null},\"ability\":\"\",\"actionType\":\"save\",\"attackBonus\":0,\"chatFlavor\":\"\",\"critical\":null,\"damage\":{\"parts\":[[\"2d6\",\"fire\"]],\"versatile\":\"\"},\"formula\":\"\",\"save\":{\"ability\":\"dex\",\"dc\":15,\"scaling\":\"flat\"},\"armor\":{\"value\":10},\"hp\":{\"value\":0,\"max\":0,\"dt\":null,\"conditions\":\"\"},\"weaponType\":\"natural\",\"properties\":{\"ada\":false,\"amm\":false,\"fin\":false,\"fir\":false,\"foc\":false,\"hvy\":false,\"lgt\":false,\"lod\":false,\"mgc\":false,\"rch\":false,\"rel\":false,\"ret\":false,\"sil\":false,\"spc\":false,\"thr\":false,\"two\":false,\"ver\":false,\"nodam\":false,\"fulldam\":false,\"halfdam\":true},\"proficient\":true},\"effects\":[],\"folder\":null,\"sort\":1050000,\"permission\":{\"default\":3,\"g4WGw0lAZ3nIhapn\":3},\"flags\":{\"betterRolls5e\":{\"critRange\":{\"type\":\"String\",\"value\":null},\"critDamage\":{\"type\":\"String\",\"value\":\"\"},\"quickDesc\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickAttack\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickSave\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickDamage\":{\"type\":\"Array\",\"value\":[true],\"altValue\":[true],\"context\":{\"0\":\"\"}},\"quickVersatile\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickProperties\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickCharges\":{\"type\":\"Boolean\",\"value\":{\"quantity\":false,\"use\":false,\"resource\":true},\"altValue\":{\"quantity\":false,\"use\":true,\"resource\":true}},\"quickTemplate\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickOther\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true,\"context\":\"\"},\"quickFlavor\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickPrompt\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false}},\"midi-qol\":{\"onUseMacroName\":\"\"},\"core\":{\"sourceId\":\"Item.os6WBKZ9m8aOjecL\"},\"magicitems\":{\"enabled\":false,\"equipped\":false,\"attuned\":false,\"charges\":\"0\",\"chargeType\":\"c1\",\"destroy\":false,\"destroyFlavorText\":\"reaches 0 charges: it crumbles into ashes and is destroyed.\",\"rechargeable\":false,\"recharge\":\"0\",\"rechargeType\":\"t1\",\"rechargeUnit\":\"r1\",\"sorting\":\"l\"}}}],\"tint\":null,\"selectedKey\":\"data.abilities.cha.dc\",\"sort\":0,\"flags\":{\"tidy5e-sheet\":{\"allow-edit\":true},\"midi-qol\":{\"flamingSphere\":\"Scene.xMH6dt9g5Wt35rd3.Token.BLiAIGMjLp2oRc5L\"},\"exportSource\":{\"world\":\"testWorld\",\"system\":\"dnd5e\",\"coreVersion\":\"0.8.9\",\"systemVersion\":\"1.4.3\"},\"dae\":{\"damageApplied\":6}}}')\n        await MidiQOL.socket().executeAsGM(\"createActor\", {actorData: jsonData});\n    }\n    sphereActor = game.actors.getName(\"Flaming Sphere\");\n    if (!sphereActor) {\n        console.error(\"No Flaming Sphere\");\n        return;\n    }\n    const changeValue = `turn=end,saveDC=${caster.data.data.attributes.spelldc ?? 10},saveAbility=dex,damageRoll=${args[0].spellLevel}d6,damageType=fire,saveDamage=halfdamage,saveRemove=false`;\n    const updates = {\n        Item: {\n            \"Flaming Sphere Damage\": {\n                \"data.damage.parts\": [[`${args[0].spellLevel}d6`, \"fire\"]], \n                \"data.save.dc\": caster.data.data.attributes.spelldc\n            }\n        },\n        ActiveEffect: {\n            \"Flaming Sphere Damage\": {\n                \"changes\":  [{\"key\":\"flags.midi-qol.OverTime\",\"mode\":5,\"value\": changeValue,\"priority\":\"20\"}],\n                \"disabled\": false,\n                \"label\": \"Flaming Sphere Damage\",\n                \"icon\": \"icons/magic/fire/orb-vortex.webp\",\n                \"flags\": {\n                    \"ActiveAuras\": {\n                        \"isAura\":true,\n                        \"aura\":\"All\",\n                        \"radius\":7.5,\n                        \"alignment\":\"\",\n                        \"type\":\"\",\n                        \"ignoreSelf\":true,\n                        \"height\":true,\n                        \"hidden\":false,\n                        \"hostile\":false,\n                        \"onlyOnce\":false\n                    }\n                },\n            }\n        }\n    };\n    const summoned = await warpgate.spawn(\"Flaming Sphere\", {embedded: updates}, {}, {});\n    if (summoned.length !== 1) return;\n    const summonedUuid = `Scene.${canvas.scene.id}.Token.${summoned[0]}`;\n    await caster.createEmbeddedDocuments(\"ActiveEffect\", [{\n        \"changes\":  [{\"key\":\"flags.dae.deleteUuid\",\"mode\":5,\"value\": summonedUuid,\"priority\":\"30\"}],\n        \"label\": \"Flaming Sphere Summon\",\n        \"duration\": {seconds: 60, rounds: 10},\n        \"origin\": args[0].itemUuid,\n        \"icon\": \"icons/magic/fire/orb-vortex.webp\",\n    }]);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Flaming Sphere MQ10.0.13 + warpgate","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.13\";\ntry {\n    if (args[0].tag === \"OnUse\") {\n        const casterToken = await fromUuid(args[0].tokenUuid);\n        const caster = casterToken.actor;\n        let sphereActor = game.actors.getName(\"Flaming Sphere\");\n        if (!sphereActor) {\n            const jsonData = JSON.parse('{\"name\":\"Flaming Sphere\",\"type\":\"npc\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"abilities\":{\"str\":{\"value\":10,\"proficient\":0},\"dex\":{\"value\":10,\"proficient\":0},\"con\":{\"value\":10,\"proficient\":0},\"int\":{\"value\":10,\"proficient\":0},\"wis\":{\"value\":10,\"proficient\":0},\"cha\":{\"value\":10,\"proficient\":0}},\"attributes\":{\"ac\":{\"flat\":10,\"calc\":\"natural\",\"formula\":\"\"},\"hp\":{\"value\":10,\"min\":0,\"max\":10,\"temp\":0,\"tempmax\":null,\"formula\":\"\"},\"init\":{\"value\":0,\"bonus\":0},\"movement\":{\"burrow\":0,\"climb\":0,\"fly\":0,\"swim\":0,\"walk\":30,\"units\":\"ft\",\"hover\":false},\"senses\":{\"darkvision\":0,\"blindsight\":0,\"tremorsense\":0,\"truesight\":0,\"units\":\"ft\",\"special\":\"\"},\"spellcasting\":\"int\",\"death\":{\"success\":0,\"failure\":0}},\"details\":{\"biography\":{\"value\":\"\",\"public\":\"\"},\"alignment\":\"\",\"race\":\"\",\"type\":{\"value\":\"\",\"subtype\":\"\",\"swarm\":\"\",\"custom\":\"\"},\"environment\":\"\",\"cr\":1,\"spellLevel\":0,\"xp\":{\"value\":10},\"source\":\"\",\"gender\":\"\",\"age\":\"\",\"height\":\"\",\"weight\":\"\",\"eyes\":\"\",\"skin\":\"\",\"hair\":\"\",\"notes1name\":\"\",\"notes2name\":\"\",\"notes3name\":\"\",\"notes4name\":\"\"},\"traits\":{\"size\":\"med\",\"di\":{\"value\":[],\"custom\":\"\"},\"dr\":{\"value\":[],\"custom\":\"\"},\"dv\":{\"value\":[],\"custom\":\"\"},\"ci\":{\"value\":[],\"custom\":\"\"},\"languages\":{\"value\":[],\"custom\":\"\"}},\"currency\":{\"pp\":0,\"gp\":0,\"ep\":0,\"sp\":0,\"cp\":0},\"skills\":{\"acr\":{\"value\":0,\"ability\":\"dex\"},\"ani\":{\"value\":0,\"ability\":\"wis\"},\"arc\":{\"value\":0,\"ability\":\"int\"},\"ath\":{\"value\":0,\"ability\":\"str\"},\"dec\":{\"value\":0,\"ability\":\"cha\"},\"his\":{\"value\":0,\"ability\":\"int\"},\"ins\":{\"value\":0,\"ability\":\"wis\"},\"itm\":{\"value\":0,\"ability\":\"cha\"},\"inv\":{\"value\":0,\"ability\":\"int\"},\"med\":{\"value\":0,\"ability\":\"wis\"},\"nat\":{\"value\":0,\"ability\":\"int\"},\"prc\":{\"value\":0,\"ability\":\"wis\"},\"prf\":{\"value\":0,\"ability\":\"cha\"},\"per\":{\"value\":0,\"ability\":\"cha\"},\"rel\":{\"value\":0,\"ability\":\"int\"},\"slt\":{\"value\":0,\"ability\":\"dex\"},\"ste\":{\"value\":0,\"ability\":\"dex\"},\"sur\":{\"value\":0,\"ability\":\"wis\"}},\"spells\":{\"spell1\":{\"value\":0,\"override\":null},\"spell2\":{\"value\":0,\"override\":null},\"spell3\":{\"value\":0,\"override\":null},\"spell4\":{\"value\":0,\"override\":null},\"spell5\":{\"value\":0,\"override\":null},\"spell6\":{\"value\":0,\"override\":null},\"spell7\":{\"value\":0,\"override\":null},\"spell8\":{\"value\":0,\"override\":null},\"spell9\":{\"value\":0,\"override\":null},\"pact\":{\"value\":0,\"override\":null}},\"bonuses\":{\"mwak\":{\"attack\":\"\",\"damage\":\"\"},\"rwak\":{\"attack\":\"\",\"damage\":\"\"},\"msak\":{\"attack\":\"\",\"damage\":\"\"},\"rsak\":{\"attack\":\"\",\"damage\":\"\"},\"abilities\":{\"check\":\"\",\"save\":\"\",\"skill\":\"\"},\"spell\":{\"dc\":\"\"}},\"resources\":{\"legact\":{\"value\":0,\"max\":0},\"legres\":{\"value\":0,\"max\":0},\"lair\":{\"value\":false,\"initiative\":0}}},\"token\":{\"_id\":\"wsnEu8ZSbBYL5S9i\",\"name\":\"Flaming Sphere\",\"displayName\":0,\"actorId\":\"WlOopcsUtThmw4gy\",\"actorLink\":false,\"actorData\":{},\"img\":\"icons/magic/fire/orb-vortex.webp\",\"tint\":null,\"width\":1,\"height\":1,\"scale\":1,\"mirrorX\":false,\"mirrorY\":false,\"x\":null,\"y\":null,\"elevation\":null,\"lockRotation\":false,\"rotation\":0,\"effects\":[],\"alpha\":1,\"hidden\":false,\"vision\":false,\"dimSight\":0,\"brightSight\":30,\"dimLight\":40,\"brightLight\":20,\"sightAngle\":0,\"lightAngle\":0,\"lightColor\":\"#a2642a\",\"lightAlpha\":0.4,\"lightAnimation\":{\"speed\":5,\"intensity\":5,\"type\":\"torch\"},\"disposition\":1,\"displayBars\":0,\"bar1\":{\"attribute\":\"attributes.hp\"},\"bar2\":{\"attribute\":\"\"},\"flags\":{\"conditional-visibility\":{\"invisible\":false,\"obscured\":false,\"indarkness\":false,\"hidden\":false,\"_ste\":null},\"tokenmagic\":{},\"ActiveAuras\":false,\"monks-tokenbar\":{\"movement\":null}},\"tokenId\":null,\"randomImg\":false},\"items\":[{\"_id\":\"O9ThymNjpRlq26u1\",\"name\":\"Flaming Sphere Damage\",\"type\":\"weapon\",\"img\":\"icons/magic/fire/orb-vortex.webp\",\"data\":{\"description\":{\"value\":\"\",\"chat\":\"\",\"unidentified\":\"\"},\"source\":\"\",\"quantity\":1,\"weight\":0,\"price\":0,\"attunement\":0,\"equipped\":true,\"rarity\":\"\",\"identified\":true,\"activation\":{\"type\":\"special\",\"cost\":0,\"condition\":\"\"},\"duration\":{\"value\":null,\"units\":\"\"},\"target\":{\"value\":null,\"width\":null,\"units\":\"\",\"type\":\"\"},\"range\":{\"value\":null,\"long\":null,\"units\":\"\"},\"uses\":{\"value\":0,\"max\":\"0\",\"per\":\"\"},\"consume\":{\"type\":\"\",\"target\":\"\",\"amount\":null},\"ability\":\"\",\"actionType\":\"save\",\"attackBonus\":0,\"chatFlavor\":\"\",\"critical\":null,\"damage\":{\"parts\":[[\"2d6\",\"fire\"]],\"versatile\":\"\"},\"formula\":\"\",\"save\":{\"ability\":\"dex\",\"dc\":15,\"scaling\":\"flat\"},\"armor\":{\"value\":10},\"hp\":{\"value\":0,\"max\":0,\"dt\":null,\"conditions\":\"\"},\"weaponType\":\"natural\",\"properties\":{\"ada\":false,\"amm\":false,\"fin\":false,\"fir\":false,\"foc\":false,\"hvy\":false,\"lgt\":false,\"lod\":false,\"mgc\":false,\"rch\":false,\"rel\":false,\"ret\":false,\"sil\":false,\"spc\":false,\"thr\":false,\"two\":false,\"ver\":false,\"nodam\":false,\"fulldam\":false,\"halfdam\":true},\"proficient\":true},\"effects\":[],\"folder\":null,\"sort\":1050000,\"permission\":{\"default\":3,\"g4WGw0lAZ3nIhapn\":3},\"flags\":{\"betterRolls5e\":{\"critRange\":{\"type\":\"String\",\"value\":null},\"critDamage\":{\"type\":\"String\",\"value\":\"\"},\"quickDesc\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickAttack\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickSave\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickDamage\":{\"type\":\"Array\",\"value\":[true],\"altValue\":[true],\"context\":{\"0\":\"\"}},\"quickVersatile\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false},\"quickProperties\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickCharges\":{\"type\":\"Boolean\",\"value\":{\"quantity\":false,\"use\":false,\"resource\":true},\"altValue\":{\"quantity\":false,\"use\":true,\"resource\":true}},\"quickTemplate\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickOther\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true,\"context\":\"\"},\"quickFlavor\":{\"type\":\"Boolean\",\"value\":true,\"altValue\":true},\"quickPrompt\":{\"type\":\"Boolean\",\"value\":false,\"altValue\":false}},\"midi-qol\":{\"onUseMacroName\":\"\"},\"core\":{\"sourceId\":\"Item.os6WBKZ9m8aOjecL\"},\"magicitems\":{\"enabled\":false,\"equipped\":false,\"attuned\":false,\"charges\":\"0\",\"chargeType\":\"c1\",\"destroy\":false,\"destroyFlavorText\":\"reaches 0 charges: it crumbles into ashes and is destroyed.\",\"rechargeable\":false,\"recharge\":\"0\",\"rechargeType\":\"t1\",\"rechargeUnit\":\"r1\",\"sorting\":\"l\"}}}],\"tint\":null,\"selectedKey\":\"data.abilities.cha.dc\",\"sort\":0,\"flags\":{\"tidy5e-sheet\":{\"allow-edit\":true},\"midi-qol\":{\"flamingSphere\":\"Scene.xMH6dt9g5Wt35rd3.Token.BLiAIGMjLp2oRc5L\"},\"exportSource\":{\"world\":\"testWorld\",\"system\":\"dnd5e\",\"coreVersion\":\"0.8.9\",\"systemVersion\":\"1.4.3\"},\"dae\":{\"damageApplied\":6}}}')\n            await MidiQOL.socket().executeAsGM(\"createActor\", {actorData: jsonData});\n        }\n        sphereActor = game.actors.getName(\"Flaming Sphere\");\n        if (!sphereActor) {\n            console.error(\"No Flaming Sphere\");\n            return;\n        }\n        const changeValue = `turn=end,saveDC=${caster.data.data.attributes.spelldc ?? 10},saveAbility=dex,damageRoll=${args[0].spellLevel}d6,damageType=fire,saveDamage=halfdamage,saveRemove=false`;\n        const updates = {\n            Item: {\n                \"Flaming Sphere Damage\": {\n                    \"data.damage.parts\": [[`${args[0].spellLevel}d6`, \"fire\"]], \n                    \"data.save.dc\": caster.data.data.attributes.spelldc\n                }\n            },\n            ActiveEffect: {\n                \"Flaming Sphere Damage\": {\n                    \"changes\":  [{\"key\":\"flags.midi-qol.OverTime\",\"mode\":5,\"value\": changeValue,\"priority\":\"20\"}],\n                    \"disabled\": false,\n                    \"label\": \"Flaming Sphere Damage\",\n                    \"icon\": \"icons/magic/fire/orb-vortex.webp\",\n                    \"flags\": {\n                        \"ActiveAuras\": {\n                            \"isAura\":true,\n                            \"aura\":\"All\",\n                            \"radius\":7.5,\n                            \"alignment\":\"\",\n                            \"type\":\"\",\n                            \"ignoreSelf\":true,\n                            \"height\":true,\n                            \"hidden\":false,\n                            \"hostile\":false,\n                            \"onlyOnce\":false\n                        }\n                    },\n                }\n            }\n        };\n        const summoned = await warpgate.spawn(\"Flaming Sphere\", {embedded: updates}, {}, {});\n        if (summoned.length !== 1) return;\n        const summonedUuid = canvas.scene.tokens.get(summoned[0]).uuid;\n        console.error(\"uuid is \", summonedUuid);\n        await caster.createEmbeddedDocuments(\"ActiveEffect\", [{\n            \"changes\":  [{\"key\":\"flags.dae.deleteUuid\",\"mode\":5,\"value\": summonedUuid,\"priority\":\"30\"}],\n            \"label\": \"Flaming Sphere Summon\",\n            \"duration\": {seconds: 60, rounds: 10},\n            \"origin\": args[0].itemUuid,\n            \"icon\": \"icons/magic/fire/orb-vortex.webp\",\n        }]);\n    }\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Flaming Sphere ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.FucrWjq0XHzPvWL0"},"favtab":{"isFavorite":false},"exportSource":{"world":"tp-game-v3","system":"dnd5e","coreVersion":"0.8.9","systemVersion":"1.4.3"},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"scene-packer":{"sourceId":"Item.3hZPqG5t71nglFY1"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false},"autoanimations":{"killAnim":false,"below":false,"override":false,"targetToken":{"enable":false},"sourceToken":{"enable":false},"allSounds":{"item":{"enableAudio":false}},"autoOverride":{"enable":false},"version":4,"audio":{"a01":{"enable":false,"file":"","delay":0,"volume":0.25},"e01":{"enable":false,"file":"","delay":0,"volume":0.25}}}},"system":{"description":{"value":"<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">A 5-foot-diameter Sphere of fire appears in an unoccupied space of your choice within range and lasts for the Duration. Any creature that ends its turn within 5 feet of the sp⁠here must make a Dexterity saving throw. The creature takes 2d6 fire damage on a failed save, or half as much damage on a successful one.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">As a Bonus Action, you can move the Sphere up to 30 feet. If you ram the sphe⁠re into a creature, that creature must make the saving throw against the sphere’s damage, and the sp⁠here stops moving this turn.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">When you move the Sphere, you can direct it over barriers up to 5 feet tall and jump it across pits up to 10 feet wide. The sp⁠here ignites flammable Objects not being worn or carried, and it sheds bright light in a 20-foot radius and dim light for an additional 20 feet.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\"><strong style=\"box-sizing:border-box;user-select:text\">At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d6 for each slot level above 2nd.</p>\n<p style=\"box-sizing:border-box;user-select:text;line-height:1.4;color:#191813;font-size:13px\">MidiQol Will summon the flaming sphere actor (and create such an actor if one does not exist). Requies active auras, midi-qol and warpgate to work.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"A bit of tallow, a pinch of brimstone, and a dusting of powdered iron","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926166,"modifiedTime":1664949517626,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"j6DvIGfnVkRU6gto"}
{"name":"Warding Bond 10.0.13","type":"spell","img":"icons/magic/defensive/shield-barrier-flaming-diamond-blue-yellow.webp","effects":[{"_id":"mhphlbxxdfps2th2","changes":[{"key":"system.attributes.ac.bonus","mode":2,"value":"1","priority":20},{"key":"system.bonuses.abilities.save","mode":2,"value":"1","priority":20},{"key":"flags.dae.onUpdateTarget","mode":0,"value":"Warding Bond, ItemMacro, system.attributes.hp.value","priority":20},{"key":"system.traits.dr.all","mode":0,"value":"true","priority":20}],"disabled":false,"duration":{"seconds":3600,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/defensive/shield-barrier-flaming-diamond-blue-yellow.webp","label":"Warding Bond","origin":"Actor.DMTSWfQs8whM5FtE.Item.fR2J4Ulo0GftObGd","transfer":false,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTarget":false,"selfTargetAlways":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.JVhKeanAXZH62DrF"},"scene-packer":{"hash":"2d3cdfc17b6cc966dbf55fe4f0d981795641ffae","sourceId":"Item.YHB1R4IDwGQAeCvP"},"itemacro":{"macro":{"data":{"_id":null,"name":"Warding Bond","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const lastArg = args[args.length - 1];\nlet newHp = getProperty(lastArg.updates, \"data.attributes.hp.value\");\nlet oldHp = lastArg.targetActor.data.data.attributes.hp.value;\nif (newHp && newHp < oldHp) {\n  // This requires the damage card to be displayed to work. Preferably enable auto apply damage.\n  MidiQOL.applyTokenDamage([{damage: oldHp - newHp, type: \"none\"}], oldHp - newHp, new Set([lastArg.sourceToken]), undefined, new Set(), { existingDamage: [], superSavers: new Set(), semiSuperSavers: new Set(), workflow: undefined, updateContext: {onUpdateCalled: true} })\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Warding Bond 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.13\";\n  try {\n    const lastArg = args[args.length - 1];\n    let newHp = getProperty(lastArg.updates, \"system.attributes.hp.value\");\n    let oldHp = lastArg.targetActor.system.attributes.hp.value;\n    if (newHp && newHp < oldHp) {\n      await ChatMessage.create({content: `${lastArg.originItem.name} does ${oldHp - newHp} damage to ${lastArg.sourceActor.name}`})\n      // This requires the damage card to be displayed to work. Preferably enable auto apply damage.\n      MidiQOL.applyTokenDamage([{damage: oldHp - newHp, type: \"none\"}], oldHp - newHp, new Set([lastArg.sourceToken]), undefined, new Set(), { existingDamage: [], superSavers: new Set(), semiSuperSavers: new Set(), workflow: undefined, updateContext: {onUpdateCalled: true} })\n  }\n} catch (err) {\n    console.error(`Warding Bond ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"effectActivation":false,"forceCEOff":true},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"cf":{"id":"temp_0hvf80hl1zcf"}},"system":{"description":{"value":"<p>This spell wards a willing creature you touch and creates a mystic connection between you and the target until the spell ends. While the target is within 60 feet of you, it gains a +1 bonus to AC and saving throws, and it has resistance to all damage. Also, each time it takes damage, you take the same amount of damage.</p><p>The spell ends if you drop to 0 hit points or if you and the target become separated by more than 60 feet. It also ends if the spell is cast again on either of the connected creatures. You can also dismiss the spell as an action.</p>","chat":"","unidentified":""},"source":"PHB pg. 287","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"A pair of platinum rings worth at least 50 gp each, which you and the target must wear for the duration","consumed":false,"cost":100,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926139,"modifiedTime":1664950992325,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"jpzT178NqFkwfR8h"}
{"name":"Aura of Protection BAB 10.0.15","type":"feat","img":"icons/magic/air/wind-tornado-wall-blue.webp","effects":[{"_id":"9OFOAQENA1VYGc7T","flags":{"ActiveAuras":{"isAura":true,"inactive":false,"aura":"Allies","radius":10,"hidden":false,"height":false,"alignment":"","type":"","ignoreSelf":false,"hostile":false,"onlyOnce":false},"dae":{"stackable":"none","specialDuration":[],"transfer":true,"macroRepeat":"none","selfTarget":false,"durationExpression":"","selfTargetAlways":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"core":{"statusId":"1"},"babonus":{"bonuses":{"throw":{"aop":{"label":"Aura of Protection","values":{"bonus":"@abilities.cha.mod[AoP]"},"description":"Paladin Aura of Propertection","throwTypes":["str","dex","con","int","wis","cha","hon","san","death"],"aura":{"enabled":true,"range":10,"disposition":1,"self":true},"filters":{"arbitraryComparison":{"one":"0","operator":"EQ","other":"0"}},"enabled":true}}}}},"changes":[],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/wind-tornado-wall-blue.webp","label":"Aura of Protection","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MyXtCPagugDlf6TQ","tint":null,"transfer":true}],"flags":{"dae":{"migrated":true,"activeEquipped":false,"alwaysActive":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.WiVleJLWZ5UXryDN"},"gm-notes":{},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"}},"system":{"description":{"value":"<p>Starting at 6th level, whenever you or a friendly creature within 10 feet of you must make a saving throw, the creature gains a bonus to the saving throw equal to your Charisma modifier (with a minimum bonus of +1). You must be conscious to grant this bonus.</p><p> At 18th level, the range of this aura increases to 30 feet.</p><p> </p><p>Requires Build a Bonus and does NOT require active auras.</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"none","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 6","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.287","createdTime":1660575514885,"modifiedTime":1665456525785,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"ksgQGnsh0r69xNge"}
{"name":"Fleet of Foot 10.0.10","type":"feat","img":"icons/equipment/feet/boots-collared-simple-leather.webp","effects":[{"_id":"xSoG3K2m1roXbzcS","flags":{"dae":{"transfer":true,"stackable":"none","specialDuration":[],"macroRepeat":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null},"core":{"statusId":""}},"changes":[{"key":"system.attributes.movement.walk","value":"35","mode":4,"priority":5}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/equipment/feet/boots-collared-simple-leather.webp","label":"Fleet of Foot","origin":"Actor.ZaVJJWXkzU603fLE.Item.TtkLUp5AChMw5QLe","tint":null,"transfer":true}],"flags":{"core":{"sheetClass":"dnd5e.DynamicItemSheet5e","sourceId":"Compendium.midi-qol.midiqol-sample-items.c9OSXfLd170kf3hS"},"dynamiceffects":{"effects":[{"modSpecKey":"data.attributes.speed.value","value":"35 ft","mode":"=","id":0,"itemId":"","active":false}],"alwaysActive":true,"equipActive":false},"dae":{"alwaysActive":true,"activeEquipped":false},"favtab":{"isFavorite":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"}},"system":{"description":{"value":"<h3><p><small><em>Race: Wood Elf</em></small></p><p></p><p>Your base walking speed increase<span>s to 35 feet.</span></p><p></p></h3>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Race: Wood Elf","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926144,"modifiedTime":1663464059775,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"lw8A7EQPelerNnsG"}
{"name":"Blessed Healer 10.0.10","type":"feat","img":"icons/magic/light/orbs-hand-gray.webp","effects":[{"_id":"r24ao66frio1l5rw","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Blessed Healer, postActiveEffects","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/orbs-hand-gray.webp","label":"Blessed Healer","origin":"Actor.bRQKeyB5lUTYraEF.Item.BrCpidPK9NequtgE","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"entityorder":{"order":128},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Blessed Healer","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.53\";\ntry {\n    if (args[0].itemData.type !== \"spell\") return;\n    // no healing done?\n    if (!(args[0].damageList.some(li => li.oldHP < li.newHP))) return;\n    // only targets self?\n    if (!(args[0].hitTargetUuids.some(uuid => uuid !== args[0].tokenUuid))) return;\n    // await (new Promise(resolve => setTimeout(resolve, 100)))\n    \n    \n    const tactor = await fromUuid(args[0].actorUuid);\n    const spellLevel = args[0].spellLevel;\n    const currentHP = tactor.data.data.attributes.hp.value;\n    const newHP = Math.min(tactor.data.data.attributes.hp.max, tactor.data.data.attributes.hp.value + 2 + spellLevel);\n    ChatMessage.create({content: `${tactor.name} cures ${newHP - currentHP} HP of bonus healing`})\n    return tactor.update({\"data.attributes.hp.value\": newHP});\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Blessed Healer ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Blessed Healer","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    if (args[0].itemData.type !== \"spell\") return;\n    // no healing done?\n    if (!(args[0].damageList?.some(li => li.oldHP < li.newHP))) return;\n    // only targets self?\n    \n    if (!(args[0].hitTargetUuids.some(uuid => uuid !== args[0].tokenUuid))) return;\n    // await (new Promise(resolve => setTimeout(resolve, 100)))\n    \n    \n    const tactor = await fromUuid(args[0].actorUuid);\n    const spellLevel = args[0].spellLevel;\n    const currentHP = tactor.system.attributes.hp.value;\n    const newHP = Math.min(tactor.system.attributes.hp.max, tactor.system.attributes.hp.value + 2 + spellLevel);\n    ChatMessage.create({content: `${tactor.name} cures ${newHP - currentHP} HP of bonus healing`})\n    return tactor.update({\"system.attributes.hp.value\": newHP});\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Blessed Healer ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"scene-packer":{"hash":"dfbc26d47abf675e473a132d631b64c40d9f7c2a","sourceId":"Item.tbXVFpqHOXUQjdSu"},"core":{"sourceId":"Item.exiCBJCIDIejT8GE"},"exportSource":{"world":"tp-game-v3","system":"dnd5e","coreVersion":"9.255","systemVersion":"1.5.7"},"cf":{"id":"temp_qt0kn9os0vl"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Beginning at 6th level, the healing spells you cast on others heal you as well.</p><p>When you cast a spell of 1st level or higher that restores hit points to a creature other than you, you regain hit points equal to 2 + the spell's level. </p><p><em>**Foundry note: The healing formula is set to 2. Please add the additional from the spell level manually.</em></p><p><em>Midi-qol: Add the feature to a character and healing spells will reestore 2 + spell level points to the caster.</em></p><p>Midi-qol: <strong>Must rename to Blessed Healer on actor equip</strong></p>","chat":"","unidentified":""},"source":"PHB pg. 60","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"heal","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[["2","healing"]],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Life Domain 6","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926104,"modifiedTime":1663463845194,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"mfaYtu43vLisyMoT"}
{"name":"Dragon Slayer Longsword 10.0.10","type":"weapon","img":"icons/skills/melee/strike-axe-blood-red.webp","effects":[],"flags":{"core":{"sourceId":"Compendium.dnd5e.items.SXjs8JghAPBv7d6j"},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":false,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"data":{"_id":null,"name":"Dragon Slayer Longsword MQ 0.8.55","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"favtab":{"isFavorite":true},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"fulldam":false,"halfdam":false,"nodam":false,"critOther":true,"rollOther":true,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>You gain a +1 bonus to attack and damage rolls made with this magic weapon.</p>\n<p>When you hit a dragon with this weapon, the dragon takes an extra 3d6 damage of the weapon's type. For the purpose of this weapon, \"dragon\" refers to any creature with the dragon type, including dragon turtles and wyverns.</p>","chat":"","unidentified":""},"source":"DMG pg. 166","quantity":1,"weight":3,"price":8000,"attunement":1,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"raceOrType.includes(\"dragon\") && item.attunement !== CONFIG.DND5E.attunementTypes.REQUIRED"},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":5,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"1","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod +1","slashing"]],"versatile":""},"formula":"3d6","save":{"ability":"","dc":null,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":true,"sil":false},"proficient":false,"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926124,"modifiedTime":1663463758407,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"oC026qY3uQUIqTge"}
{"name":"Font of Magic 10.0.16","type":"feat","system":{"description":{"value":"<p>At 2nd level, you tap into a deep wellspring of magic within yourself. This wellspring is represented by sorcery points, which allow you to create a variety of magical effects.</p><h3>Sorcery Points</h3><p>You have 2 sorcery points, and you gain more as you reach higher levels. Your sorcerer level equals the number of sorcery points you have, so a 4th level sorcerer has 4 sorcery points, a 16th level sorcerer has 16. You can never have more sorcery points than your level dictates.  You regain all spent sorcery points when you finish a long rest.</p><h3>Flexible Casting</h3><p>You can use your sorcery points to gain additional spell slots, or sacrifice spell slots to gain additional sorcery points. You learn other ways to use your sorcery points as you reach higher levels.</p><p><em><strong>Creating Spell Slots</strong>.</em>You can transform unexpended sorcery points into one spell slot as a bonus action on your turn. The Creating Spell Slots table shows the cost of creating a spell slot of a given level. You can create spell slots no higher in level than 5th.</p><p>Any spell slot you create with this feature vanishes when you finish a long rest.</p><table border=\"1\"><caption>Creating Spell Slots</caption><thead><tr><td><strong>Spell Slot Level</strong></td><td><strong>Sorcery Point Cost</strong></td></tr></thead><tbody><tr><td>1st</td><td>2</td></tr><tr><td>2nd</td><td>3</td></tr><tr><td>3rd</td><td>5</td></tr><tr><td>4th</td><td>6</td></tr><tr><td>5th</td><td>7</td></tr></tbody></table><p><em><strong>Converting a Spell Slot to Sorcery Points</strong>.</em>As a bonus action on your turn, you can expend one spell slot and gain a number of sorcery points equal to the slot's level.</p><p><em>**Foundry note:Use this to track all the various uses of sorcery points for the sorcerer.</em></p><p></p><p>midi-qol: This item is a straight copy of https://github.com/krbz999/zhell-macros/blob/main/classes/sorcerer/font_of_magic.js with the addition of disabling configuration and automatic resource consumption.</p>","chat":"","unidentified":""},"source":"PHB pg. 101","activation":{"type":"bonus","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":3,"max":"@classes.sorcerer.levels","per":"lr","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Sorcerer 2","recharge":{"value":null,"charged":false}},"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.LBKChJY5n02Afhnq"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Font of Magic","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"// FONT OF MAGIC. Author @Zhell\n// required modules: midi-qol\n// number of points required to regain an nth level spell slot; {slot-level : point-cost}.\n\n// midi changes to skip config dialog and not consume usage\n\nHooks.once(\"dnd5e.preUseItem\", (item, config, options) => {\n  options.configureDialog = false;\n  return true;\n});\nHooks.once(\"dnd5e.preItemUsageConsumption\", (item, config, options) => {\n  config.consumeUsage = false;\n  return true;\n});\n// End of midi changes to macro\n\nconst conversion_map = {\n  \"1\": 2,\n  \"2\": 3,\n  \"3\": 5,\n  \"4\": 6,\n  \"5\": 7\n}\n\nconst style = `\n<style>\n.font-of-magic .dialog-buttons {\n  flex-direction: column;\n  gap: 5px;\n}\n</style>`;\n\nconst { value: spvalue, max: spmax } = item.system.uses;\nconst spells = foundry.utils.duplicate(actor.system.spells);\n\n// array of spell levels for converting points to slots.\nconst valid_levels_with_spent_spell_slots = Object.entries(spells).filter(([key, { value, max }]) => {\n  const cost = conversion_map[key.at(-1)];\n  if ( !cost || cost > spvalue ) return false;\n  return (max > 0 && value < max);\n});\n// array of spell levels for converting slots to points.\nconst spell_levels_with_available_slots = Object.entries(spells).filter(([key, {value, max}]) => {\n  return ( value > 0 && max > 0 );\n});\n\nconst is_missing_points = spvalue < spmax;\nconst is_missing_slots = valid_levels_with_spent_spell_slots.length > 0;\n\n// has unspent spell slots.\nconst has_available_spell_slots = spell_levels_with_available_slots.length > 0;\n// has sp equal to or higher than the minimum required.\nconst has_available_sorcery_points = spvalue >= Math.min(...Object.values(conversion_map));\n\nconst can_convert_slot_to_points = has_available_spell_slots && is_missing_points;\nconst can_convert_points_to_slot = has_available_sorcery_points && is_missing_slots;\nif ( !can_convert_points_to_slot && !can_convert_slot_to_points ) {\n  ui.notifications.warn(\"You have no options available.\");\n  return;\n}\n\n// set up available buttons.\nconst buttons = {};\nif ( can_convert_slot_to_points ) buttons[\"slot_to_point\"] = {\n  icon: \"<i class='fa-solid fa-arrow-left'></i> <br>\",\n  label: \"Convert a spell slot to sorcery points\",\n  callback: slot_to_points\n}\nif ( can_convert_points_to_slot ) buttons[\"point_to_slot\"] = {\n  icon: \"<i class='fa-solid fa-arrow-right'></i> <br>\",\n  label: \"Convert sorcery points to a spell slot\",\n  callback: points_to_slot\n}\nnew Dialog({ title: \"Font of Magic\", buttons }).render(true);\n\n// Convert spell slot to sorcery points.\nasync function slot_to_points(){\n  const level = await new Promise(resolve => {\n    // build buttons for each level where value, max > 0.\n    const slot_to_points_buttons = Object.fromEntries(spell_levels_with_available_slots.map(([key, { value, max }]) => {\n      const spell_level = key.at(-1);\n      return [key, { callback: () => {resolve(spell_level)}, label: `\n        <div class=\"flexrow\">\n          <span>${CONFIG.DND5E.spellLevels[spell_level]} (${value}/${max})</span>\n          <span>(+${spell_level} points)</span>\n        </div>`}];\n    }));\n    \n    new Dialog({\n      title: \"Slot to Sorcery Points\",\n      buttons: slot_to_points_buttons,\n      content: style + `\n        <p>Pick a spell slot level to convert one spell slot to sorcery points (<strong>${spvalue}/${spmax}</strong>).\n        You regain a number of sorcery points equal to the level of the spell slot.</p>`,\n      close: () => {resolve(0)}\n    }, {\n      classes: [\"dialog\", \"font-of-magic\"]\n    }).render(true, { height: \"auto\" });\n  });\n  \n  if ( Number(level) > 0 ) {\n    spells[`spell${level}`].value--;\n    await actor.update({ system: { spells } });\n    const new_points_value = Math.clamped(spvalue + Number(level), 0, spmax);\n    const points_gained = new_points_value - spvalue;\n    await item.update({ \"system.uses.value\": new_points_value });\n    return ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor }),\n      content: `${actor.name} regained ${points_gained} sorcery points.`\n    });\n  }\n}\n\n// Convert sorcery points to spell slot.\nasync function points_to_slot(){\n  const level = await new Promise(resolve => {\n    // build buttons for each level where max > 0, max > value, and conversion_map[level] <= spvalue.\n    const points_to_slot_buttons = Object.fromEntries(valid_levels_with_spent_spell_slots.map(([key, { value, max }]) => {\n      const spell_level = key.at(-1);\n      const cost = conversion_map[spell_level];\n      return [key, { callback: () => {resolve(spell_level)}, label: `\n        <div class=\"flexrow\">\n          <span>${CONFIG.DND5E.spellLevels[spell_level]} (${value}/${max})</span>\n          <span>(&minus;${cost} points)</span>\n        </div>`}];\n    }));\n    \n    new Dialog({\n      title: \"Sorcery Points to Slot\",\n      buttons: points_to_slot_buttons,\n      content: style + `<p>Pick a spell slot level to regain from sorcery points (<strong>${spvalue}/${spmax}</strong>).</p>`,\n      close: () => {resolve(0)}\n    }, {\n      classes: [\"dialog\", \"font-of-magic\"]\n    }).render(true);\n  });\n  \n  if ( Number(level) > 0 ) {\n    spells[`spell${level}`].value++;\n    await actor.update({ system: { spells } });\n    await item.update({ \"system.uses.value\": Math.clamped(spvalue - conversion_map[level], 0, spmax) });\n    return ChatMessage.create({\n      speaker: ChatMessage.getSpeaker({ actor }),\n      content: `${actor.name} regained a ${CONFIG.DND5E.spellLevels[level]} spell slot.`\n    });\n  }\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"cf":{"id":"temp_qt0kn9os0vl"}},"img":"icons/magic/control/silhouette-hold-change-blue.webp","effects":[],"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1661787234363,"modifiedTime":1665962100632,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"oRmgcjvoefF5oCbA"}
{"name":"Aura of Protection - Hud 10.0.10","type":"feat","img":"icons/magic/air/wind-tornado-wall-blue.webp","effects":[{"_id":"9OFOAQENA1VYGc7T","flags":{"ActiveAuras":{"isAura":true,"inactive":false,"aura":"Allies","radius":10,"hidden":false,"height":false,"alignment":"","type":"","ignoreSelf":false,"hostile":false,"onlyOnce":false},"dae":{"stackable":"none","specialDuration":[],"transfer":true,"macroRepeat":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"core":{"statusId":"true"}},"changes":[{"key":"system.bonuses.abilities.save","mode":0,"value":"+@abilities.cha.mod","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/wind-tornado-wall-blue.webp","label":"Aura of Protection","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MyXtCPagugDlf6TQ","tint":null,"transfer":true}],"flags":{"dae":{"migrated":true,"activeEquipped":false,"alwaysActive":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.WiVleJLWZ5UXryDN"},"gm-notes":{},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"betterRolls5e":{"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 6th level, whenever you or a friendly creature within 10 feet of you must make a saving throw, the creature gains a bonus to the saving throw equal to your Charisma modifier (with a minimum bonus of +1). You must be conscious to grant this bonus.</p>\n<p> At 18th level, the range of this aura increases to 30 feet.</p>\n<p>Midi-qol: requires Active Auras to function. Aura will appear on token when applied</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"none","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 6","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926120,"modifiedTime":1663463834395,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"qX0OnNxcPebyZUtG"}
{"name":"#[CF_tempEntity]","type":"weapon","flags":{"cf":{"id":"temp_qt0kn9os0vl","name":"Class Features","color":"#000000","fontColor":"#FFFFFF","icon":"","sorting":"a","contents":["5QHFPKfJAJSCfVR7","xoBdakNhFVVcf9Ah","6b9JMxuKRPHHVA0a","0APm9jLidUGQ6O7y","qX0OnNxcPebyZUtG","0MS6Oh6B9yYLUyta","6gEABXOHBSJzORuf","yRjCLtZU9MRo52s7","KSH6RqS7Zy03SlfK","mfaYtu43vLisyMoT","ztjXiC2pJRxFo1Wz","03Ko4gA25r0XHy54","h9fWiB3s2YWtzagY","cQMyqIcR4nL2vjLR","zBDXT5vL6BZtsOCG","Q9ZtM3v8aNkCfzBS","acn9E3gbJa8k5MpD","YMc9WAanqzJUp1Dq","N9gM0uGpsyCiuCrM","2W4yoBPFDCBofLji","2b8QfWoQpnBXNBwG","Z4PCR56q5U8yRomy","WLCKItTIeKXpyTZP","fUYuDY1NrmzpghcM","ksgQGnsh0r69xNge","oRmgcjvoefF5oCbA"],"children":[],"folderPath":[],"version":"2.5.3","parent":null}},"img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":0,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":null,"attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{},"proficient":true},"effects":[],"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1663463613070,"modifiedTime":1665962100632,"lastModifiedBy":"devnIbfBHb74U9Zv"},"_id":"qceqOmFO0alIeK0H"}
{"name":"Melf's Minute Meteors","type":"spell","img":"icons/svg/item-bag.svg","system":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"niter, sulfur, and pine tar formed into a bead","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[{"label":"Melf's Minute Meteors","icon":"icons/svg/aura.svg","origin":"Item.K2aaTgBPUd3OdoQL","duration":{"rounds":null,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"9YrLYKkdOZsToUPZ","changes":[{"key":"macro.createItem","mode":0,"value":"Compendium.world.mqsample.23LroXlQe4WHF3xb","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"flags":{"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"core":{"sourceId":"Item.K2aaTgBPUd3OdoQL"},"cf":{"id":"temp_0hvf80hl1zcf"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666092938661,"modifiedTime":1666222694884,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"qyj41L52x2OjBEDZ"}
{"name":"Branding Smite 10.0.13","type":"spell","img":"icons/magic/fire/dagger-rune-enchant-flame-orange.webp","effects":[{"_id":"6hAZJkE4UfjO7Adp","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":20},{"key":"flags.midi-qol.brandingSmite.level","mode":5,"value":"@item.level","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/fire/dagger-rune-enchant-flame-orange.webp","label":"Branding Smite","origin":"Compendium.midi-qol.midiqol-sample-items.dlP9fWGo3ggfkOfm","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["1Hit:mwak","1Hit:rwak"],"transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"flags":{"midi-qol":{"onUseMacroName":"","effectActivation":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"core":{"sourceId":"Item.Z2bmzJrSSmIZdOFp"},"itemacro":{"macro":{"data":{"_id":null,"name":"Branding Smite","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"// v1.0. Requires midi-qol and ATL.\nconst version = \"0.9.52\";\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; \n    if (args[0].hitTargetUuids.length === 0) return {}; // did not hit anyone\n    for (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        // remvoe the invisible condition\n        const effect = targetActor?.effects.find(ef=> ef.data.label===game.i18n.localize(\"midi-qol.invisible\"));\n        if (effect) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects:[effect.id]});\n        // create the dim light effect on the target\n        let bsEffect = new ActiveEffect({label: \"Branding Smite\", icon: \"systems/dnd5e/icons/spells/enchant-orange-2.jpg\", changes: [{value: 5, mode: CONST.ACTIVE_EFFECT_MODES.UPGRADE, priority: 20, key:\"ATL.dimLight\"}], duration: {seconds: 60}});\n        // 60 seconds is wrong - should look for the branding smite effect and use the remaining duration - but hey\n    \n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n    }\n    Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n        console.log(\"Deleting concentration\")\n        const effect = MidiQOL.getConcentrationEffect(actor);\n        if (effect) effect.delete();\n        return true;\n    })\n    const spellLevel = actor.data.flags[\"midi-qol\"].brandingSmite.level;\n    return{damageRoll: `${spellLevel}d6[radiant]`, flavor: \"Branding Smite\"}\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Branding Smite ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Branding Smite 10.0.13","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.13\";\ntry {\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.system.actionType)) return {}; \n    if (args[0].hitTargetUuids.length === 0) return {}; // did not hit anyone\n    for (let tokenUuid of args[0].hitTargetUuids) {\n        const target = await fromUuid(tokenUuid);\n        const targetActor = target.actor;\n        if (!targetActor) continue;\n        // remvoe the invisible condition\n        const effects = targetActor?.effects.filter(ef=> ef.label===game.i18n.localize(\"midi-qol.invisible\")).map(ef=> ef.id);\n        if (effects) await MidiQOL.socket().executeAsGM(\"removeEffects\", {actorUuid: targetActor.uuid, effects});\n        // create the dim light effect on the target\n        let bsEffect = new ActiveEffect({label: \"Branding Smite\", icon: \"icons/magic/fire/dagger-rune-enchant-flame-orange.webp\", changes: [{value: 5, mode: CONST.ACTIVE_EFFECT_MODES.UPGRADE, priority: 20, key:\"ATL.dimLight\"}], duration: {seconds: 60}});\n        // 60 seconds is wrong - should look for the branding smite effect and use the remaining duration - but hey\n    \n        await MidiQOL.socket().executeAsGM(\"createEffects\", {actorUuid: targetActor.uuid, effects: [bsEffect.toObject()]})\n    }\n    Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n        console.log(\"Deleting concentration\")\n        const effect = MidiQOL.getConcentrationEffect(actor);\n        if (effect) effect.delete();\n        return true;\n    })\n    const spellLevel = actor.flags[\"midi-qol\"].brandingSmite.level;\n    return{damageRoll: `${spellLevel}d6[radiant]`, flavor: \"Branding Smite\"}\n} catch (err) {\n    console.error(`${args[0].itemData.name} - Branding Smite ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>The next time you hit a creature with a weapon attack before this spell ends, the weapon gleams with astral radiance as you strike. The attack deals an extra 2d6 radiant damage to the target, which becomes visible if it's invisible, and the target sheds dim light in a 5-foot radius and can't become invisible until the spell ends.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the extra damage increases by 1d6 for each slot level above 2nd.</p><p>Requires ATE compatible with foundry v10 to do the lighting effects</p><p></p>","chat":"","unidentified":""},"source":"PHB pg. 219","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d6"},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926153,"modifiedTime":1664949608899,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"rQ3a8hG5QFu6qf3c"}
{"name":"Longsword of Wounding 10.0.10","type":"weapon","img":"icons/magic/water/heart-ice-freeze.webp","effects":[{"_id":"ZlIku5Sq0gOPI01P","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\ndamageBeforeSave=true,\nlabel=Wounded,\ndamageRoll=1d4,\ndamageType=necrotic,\nsaveDC=15,\nsaveAbility=con","priority":20}],"disabled":false,"duration":{"rounds":99,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/water/heart-ice-freeze.webp","label":"Wounded","origin":"Item.WmK8cD8MDoUq4SaV","transfer":false,"flags":{"dae":{"stackable":"count","macroRepeat":"none","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.items.pG6dddIcb9NmPrdt"},"itemacro":{"macro":{"data":{"_id":null,"name":"Longsword of Wounding","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"//\nconst lastArg = args[args.length - 1];\nlet ttoken = await fromUuid(lastArg.tokenUuid);\nconst tactor = ttoken?.actor;\nconst item = await fromUuid(lastArg.origin);\nif (args[0] === \"on\") {\n  const sourceActor = item.parent;\n  const combatTime = game.combat.round + game.combat.turn / 100;\n  const lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n  lastArg.canWound = !game.combat || (combatTime !== lastTime);\n  if (game.combat && lastArg.canWound) {\n    let combatTime = game.combat.round + game.combat.turn / 100;\n    let lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n    if (combatTime !== lastTime) {\n      setProperty(sourceActor.data.flags, \"midi-qol.woundedTime\", combatTime)\n    }\n  } \n  if (!lastArg.canWound) {\n    const stacks = getProperty(lastArg.efData, \"flags.dae.stacks\") || 1;\n    const label = lastArg.efData.label.replace(/\\s+\\(\\d*\\)/, \"\") +` (${stacks - 1})`;\n    Hooks.once(\"midi-qol.RollComplete\", () => {\n    tactor.updateEmbeddedDocuments(\"ActiveEffect\", [{ _id: lastArg.efData._id, \"flags.dae.stacks\": stacks - 1, \"label\": label }]);\n    });\n  }\n} else if (args[0] === \"each\") {\n  const woundCount = getProperty(lastArg.efData, \"flags.dae.stacks\");\n  if (!woundCount) return;\n  const saveType = \"con\";\n  const DC = 15;\n  const flavor = `${CONFIG.DND5E.abilities[saveType]} DC${DC} ${item?.name || \"\"}`;\n  let save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n  if (save >= DC) {\n    const effectsToDelete = tactor.effects.filter(ef => ef.data.origin === lastArg.origin).map(ef => ef.id);\n    ChatMessage.create({content: \"Save was made\"});\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: tactor.uuid, effects: [lastArg.effectId] })\n  } else {\n    let damageRoll = new Roll(`${woundCount}d4[necrotic]`).roll(); // could be argument\n    new MidiQOL.DamageOnlyWorkflow(tactor, ttoken, damageRoll.total, \"necrotic\", [ttoken], damageRoll, { flavor: `Failed Save for ${item.name}`, itemData: item?.toObject(), itemCardId: \"new\", useOther: true })\n  }\n} else if (args[0] === \"off\") {\n  // do any clean up\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":true,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false,"set1s":false,"set2s":false,"set3s":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>Hit points lost to this weapon's damage can be regained only through a short or long rest, rather than by regeneration, magic, or any other means.</p>\n<p>Once per turn, when you hit a creature with an attack using this magic weapon, you can wound the target. At the start of each of the wounded creature's turns, it takes 1d4 necrotic damage for each time you've wounded it, and it can then make a DC 15 Constitution saving throw, ending the effect of all such wounds on itself on a success. Alternatively, the wounded creature, or a creature within 5 feet of it, can use an action to make a DC 15 Wisdom (Medicine) check, ending the effect of such wounds on it on a success.</p>\n<p> </p>\n<p>Does not enforce the once per turn rule.</p>","chat":"","unidentified":""},"source":"DMG pg. 207","quantity":1,"weight":3,"price":2000,"attunement":1,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"@item.attunement !== 1"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + @mod","slashing"]],"versatile":"1d10 + @mod"},"formula":"","save":{"ability":"","dc":15,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false},"proficient":false,"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926168,"modifiedTime":1663473241734,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"rTsCF68JRE4Z4bVM"}
{"name":"Longsword of Life Stealing 10.0.10","type":"weapon","img":"icons/creatures/claws/claw-curved-poison-purple.webp","effects":[],"flags":{"midi-qol":{"criticalThreshold":"20","onUseMacroName":"[postActiveEffects]ItemMacro","effectActivation":true,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.dnd5e.items.wtctR6tCcYbQPiS0"},"itemacro":{"macro":{"data":{"_id":null,"name":"Longsword of Life Stealing MQ0.8.85","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (args[0].diceRoll === 20 && args[0].itemData.data.attunement !== 1 && args[0].otherDamageTotal > (actor.data.data.attributes.hp.temp ?? 0)) {\n    await actor.update({\"data.attributes.hp.temp\": args[0].otherDamageTotal})\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Longsword of Life Stealing 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n    if (args[0].diceRoll === 20 && args[0].itemData.system.attunement !== 1 && args[0].otherDamageTotal > (actor.system.attributes.hp.temp ?? 0)) {\n        ChatMessage.create({content: `${args[0].item.name} steals ${args[0].otherDamageTotal} HP`})\n        await actor.update({\"system.attributes.hp.temp\": args[0].otherDamageTotal})\n    }\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Longsword of Life Stealing ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"critOther":false,"concentration":false,"rollOther":true,"magicdam":false,"magiceffect":false,"toggleEffect":false}},"system":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>When you attack a creature with this magic weapon and roll a 20 on the attack roll, that target takes an extra 3d6 necrotic damage, provided that the target isn't a construct or an undead. You gain temporary hit points equal to the extra damage dealt.</p>","chat":"","unidentified":""},"source":"DMG pg. 206","quantity":1,"weight":3,"price":1000,"attunement":1,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"workflow.diceRoll === 20 && !([\"construct\", \"undead\"].includes(raceOrType)) && item.attunement !== CONFIG.DND5E.attunementTypes.REQUIRED"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 +@mod","slashing"]],"versatile":"1d10 + @mod"},"formula":"3d6[necrotic]","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false},"proficient":false,"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926125,"modifiedTime":1663463755355,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"rrrAyJGmxmed55VS"}
{"name":"Lucky (Uses per day) 10.0.10","type":"feat","img":"icons/magic/light/hand-sparks-glow-yellow.webp","effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.lucky.attack.all","mode":5,"value":"reroll-kh","priority":20},{"key":"flags.midi-qol.optional.lucky.label","mode":5,"value":"Lucky","priority":20},{"key":"flags.midi-qol.optional.lucky.save.all","mode":5,"value":"reroll-kh","priority":20},{"key":"flags.midi-qol.optional.lucky.check.all","mode":5,"value":"reroll-kh","priority":20},{"key":"flags.midi-qol.optional.lucky.count","mode":5,"value":"ItemUses.Lucky","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/light/hand-sparks-glow-yellow.webp","label":"Luck Point","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"durationExpression":"","selfTarget":false,"selfTargetAlways":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":true},"altValue":{"use":true,"resource":true,"charge":true}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"playSaveAudio":false,"clip":"","volume":100}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>The lucky feat is not part of the SRD so you will have populate the description yourself.</p>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"3","per":"lr","recovery":"","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926107,"modifiedTime":1664204463577,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"tgDBaKnQRovy120f"}
{"name":"Mace of Disruption 10.0.10","type":"weapon","img":"icons/magic/symbols/cog-shield-white-blue.webp","effects":[{"_id":"a9mFBJjGO0O0a3tJ","changes":[{"key":"StatusEffect","mode":0,"value":"Convenient Effect: Frightened","priority":20}],"disabled":false,"duration":{"rounds":99,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/symbols/cog-shield-white-blue.webp","label":"Frightened","origin":"Item.R2r65P2T5gTTUO2R","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":["turnEndSource"],"transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"core":{"statusId":""}},"tint":null},{"_id":"vMRAlkC9HOcdIY18","changes":[{"key":"ATL.brightLight","mode":4,"value":"20","priority":20},{"key":"ATL.dimLight","mode":4,"value":"40","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/symbols/cog-shield-white-blue.webp","label":"Mace of Disruption","origin":"Item.k7ObEq184E1MthES","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"magicitems":{"charges":"0","chargeType":"c1","recharge":"0","rechargeType":"t1","rechargeUnit":"r1","enabled":false,"destroy":false,"rechargeable":false,"equipped":false,"attuned":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","sorting":"l"},"midi-qol":{"criticalThreshold":"20","onUseMacroName":"[preDamageApplication]ItemMacro","effecActivation":"[\"fiend\", \"undead\"].includes(\"@raceOrType\")","effectActivation":true,"fumbleThreshold":null},"core":{"sourceId":"Item.R2r65P2T5gTTUO2R"},"scene-packer":{"sourceId":"Item.k7ObEq184E1MthES"},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"fulldam":false},"itemacro":{"macro":{"name":"Mace of Disruption 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"// check the remaining hp <= 25 set to dead\nconst version = \"10.0.10\";\ntry {\n    for (let damageItem of this.damageList) {\n        if (damageItem.newHP <= 25 && args[0].failedSaveUuids.includes(damageItem.tokenUuid)) {\n            damageItem.hpDamage += damageItem.newHP;\n            damageItem.newHP = 0;\n        }\n    };\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Devil's Glaive ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"system":{"description":{"value":"<p>(<em>Requires attunement</em>)</p>\n<p>When you hit a fiend or an undead with this magic weapon, that creature takes an extra 2d6 radiant damage. If the target has 25 hit points or fewer after taking this damage, it must succeed on a DC 15 Wisdom saving throw or be destroyed. On a successful save, the creature becomes frightened of you until the end of your next turn.</p>\n<p>While you hold this weapon, it sheds bright light in a 20-foot radius and dim light for an additional 20 feet.</p>\n<p>Midi-qol: Requires Convenient Effects for application of Frightened - you can change it to CUB by editing the active effect.</p>","chat":"","unidentified":""},"source":"DMG pg. 179","quantity":1,"weight":4,"price":null,"attunement":1,"equipped":false,"rarity":"rare","identified":true,"activation":{"type":"action","cost":1,"condition":"[\"fiend\", \"undead\"].includes(raceOrType)  && item.attunement !== 1"},"duration":{"value":0,"units":""},"target":{"value":0,"width":null,"units":"","type":""},"range":{"value":5,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d6 + @mod","bludgeoning"]],"versatile":""},"formula":"2d6[radiant]","save":{"ability":"wis","dc":15,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"hvy":false,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":false,"mgc":false,"ada":false,"sil":false},"proficient":false,"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926129,"modifiedTime":1663463753894,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"xJzlfmiBeSUTjtrR"}
{"name":"Arcane Ward 10.0.10","type":"feat","img":"icons/magic/control/debuff-chains-ropes-net-white.webp","effects":[{"_id":"8w2x8zztauaqzd1l","changes":[{"key":"macro.itemMacro","mode":0,"value":"5 @abilities.int.mod","priority":20},{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Arcane Ward, postActiveEffects","priority":20},{"key":"flags.dae.onUpdateTarget","mode":0,"value":"Arcane Link, ItemMacro, data.attributes.hp.value","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/debuff-chains-ropes-net-white.webp","label":"Arcane Ward","origin":"Actor.6DHUnnnzFTYHWI7I.Item.uPACrUoblqkB7daH","transfer":false,"flags":{"core":{"statusId":"1"},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["longRest"],"transfer":false,"selfTarget":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"scene-packer":{"hash":"80d6be81dd4c0691b6d36680e1c5f0ed721c3545","sourceId":"Item.0XicSu4akbJr3Fyu"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Arcane Ward","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const wardFlagName = \"Arcane Ward Details\";\nasync function updateActorResource(actor, wardStrength, wardStrengthMax) {\n\tlet {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\tif (!wardStrengthField || !wardStrengthMaxField) return;\n\tactorUpdate = {};\n\tactorUpdate[wardStrengthField] = wardStrength;\n\tactorUpdate[wardStrengthMaxField] = wardStrengthMax;\n\tawait actor.update(actorUpdate)\n}\nasync function setWardFieldNames(item) {\n\tconst consumeTargetField = `data.${item.data.data.consume.target ?? \"\"}`;\n\tconst maxField = consumeTargetField.replace(\".value\", \".max\");\n\titem.parent.setFlag(\"midi-qol\", wardFlagName, {\n\t\twardStrengthField: consumeTargetField,\n\t\twardStrengthMaxField: maxField\n\t})\n}\nfunction getWardFieldNames(actor) {\n\treturn actor.getFlag(\"midi-qol\", wardFlagName) ?? {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n}\nfunction getWardValue(actor) {\n\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\tif (!wardStrengthField || !wardStrengthMaxField) \n\t\treturn {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n\treturn {\n\t\twardStrength: getProperty(item.parent.data, wardStrengthField),\n\t\twardStrengthMax: getProperty(item.parent.data, wardStrengthMaxField)\n\t}\n}\n\nif (args[0] === \"on\") {\n\tconst lastArg = args[args.length - 1];\n\tconst item = await fromUuid(lastArg.origin);\n\tconst actor = item.parent;\n\tconst wardStrengthMax = args[1] * 2 + args[2];\n\tif (Number(args[1]) === 0 && Number(args[2]) === 0) return;\n\tconst speaker = ChatMessage.getSpeaker({ actor });\n\tChatMessage.create({ content: `${item.name} strength ${wardStrengthMax} created`, speaker });\n\tawait setWardFieldNames(item);\n\tawait updateActorResource(item.actor, wardStrengthMax, wardStrengthMax);\n} else if (args[0] === \"off\") {\n\tconst lastArg = args[args.length - 1];\n\tconst item = await fromUuid(lastArg.origin);\n\tconst actor = await fromUuid(lastArg.actorUuid);\n\tconst speaker = ChatMessage.getSpeaker({ actor });\n\tChatMessage.create({ content: `${item.name} dismissed`, speaker });\n\tawait updateActorResource(item.actor, 0, 0);\n\titem.actor.unsetFlag(\"midi-qol\", wardFlagName)\n} else if (\n\targs[0].macroPass === \"postActiveEffects\" &&\n\targs[0].itemData?.data.school === \"abj\" &&\n\targs[0].itemData?.data.level > 0) {\n\tlet { wardStrength, wardStrengthMax } = getWardValue(actor);\n\tif (wardStrengthMax === undefined) return;\n\tlet newWardStrength = Math.min(wardStrength + args[0].spellLevel * 2, wardStrengthMax);\n\tconst speaker = ChatMessage.getSpeaker({ actor });\n\tChatMessage.create({\n\t\tcontent: `${args[0].itemData.name} gains ${args[0].spellLevel * 2} points to ${newWardStrength}/${wardStrengthMax}`,\n\t\tspeaker,\n\t});\n\tif (wardStrength !== newWardStrength) {\n\t\tupdateActorResource(actor, newWardStrength, wardStrengthMax);\n\t}\n} else if (args[0] === \"onUpdateActor\") {\n\tconst lastArg = args[args.length - 1];\n\tlet newHP = getProperty(lastArg.updates, \"data.attributes.hp.value\");\n\tlet oldHP = lastArg.targetActor.data.data.attributes.hp.value;\n\tif (newHP && oldHP && newHP < oldHP) {\n\t\tconst damage = oldHP - newHP;\n\t\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(lastArg.sourceActor);\n\t\tif (!wardStrengthField) return;\n\t\tlet { wardStrengthMax, wardStrength } = getWardValue(actor);\n\t\tif (wardStrengthMax === undefined) return;\n\t\tconst absorbed = Math.min(damage, wardStrength ?? 0);\n\t\tif (absorbed) {\n\t\t\tnewHP = newHP + absorbed;\n\t\t\tconst speaker = ChatMessage.getSpeaker({ actor: lastArg.targetActor });\n\t\t\tChatMessage.create({\n\t\t\t\tcontent: `${lastArg.originItem.name} absorbs ${absorbed} of ${damage} points of damage.<br> Hp -> ${newHP}<br>Wardstength -> ${wardStrength - absorbed}`,\n\t\t\t\tspeaker\n\t\t\t});\n\t\t\tlastArg.updates.data.attributes.hp.value = newHP;\n\t\t\tif (wardStrengthField !== \"\") { // assume the target is a resource\n\t\t\t\tsetProperty(lastArg.updates, wardStrengthField, wardStrength - absorbed );\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Arcane Ward 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n\tconst wardFlagName = \"Arcane Ward Details\";\n\tasync function updateActorResource(actor, wardStrength, wardStrengthMax) {\n\t\tlet {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\t\tif (!wardStrengthField || !wardStrengthMaxField) return;\n\t\tactorUpdate = {};\n\t\tactorUpdate[wardStrengthField] = wardStrength;\n\t\tactorUpdate[wardStrengthMaxField] = wardStrengthMax;\n\t\tconsole.error(\"update actor resource \", actorUpdate)\n\t\tawait actor.update(actorUpdate)\n\t}\n\tasync function setWardFieldNames(item) {\n\t\tconst consumeTargetField = `system.${item.system.consume.target ?? \"\"}`;\n\t\tconsole.error(\"consume target is \", consumeTargetField)\n\t\tconst maxField = consumeTargetField.replace(\".value\", \".max\");\n\t\tawait item.parent.setFlag(\"midi-qol\", wardFlagName, {\n\t\t\twardStrengthField: consumeTargetField,\n\t\t\twardStrengthMaxField: maxField\n\t\t})\n\t}\n\tfunction getWardFieldNames(actor) {\n\t\treturn actor.getFlag(\"midi-qol\", wardFlagName) ?? {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n\t}\n\tfunction getWardValue(actor) {\n\t\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(actor);\n\t\tif (!wardStrengthField || !wardStrengthMaxField) \n\t\t\treturn {wardStrengthField: undefined, wardStrengthMaxField: undefined};\n\t\treturn {\n\t\t\twardStrength: getProperty(item.parent, wardStrengthField),\n\t\t\twardStrengthMax: getProperty(item.parent, wardStrengthMaxField)\n\t\t}\n\t}\n\n\tif (args[0] === \"on\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst item = await fromUuid(lastArg.origin);\n\t\tconst actor = item.parent;\n\t\tconst wardStrengthMax = args[1] * 2 + args[2];\n\t\tif (Number(args[1]) === 0 && Number(args[2]) === 0) return;\n\t\tconst speaker = ChatMessage.getSpeaker({ actor });\n\t\tChatMessage.create({ content: `${item.name} strength ${wardStrengthMax} created`, speaker });\n\t\tawait setWardFieldNames(item);\n\t\tawait updateActorResource(item.actor, wardStrengthMax, wardStrengthMax);\n\t} else if (args[0] === \"off\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst item = await fromUuid(lastArg.origin);\n\t\tconst actor = await fromUuid(lastArg.actorUuid);\n\t\tconst speaker = ChatMessage.getSpeaker({ actor });\n\t\tChatMessage.create({ content: `${item.name} dismissed`, speaker });\n\t\tawait updateActorResource(item.actor, 0, 0);\n\t\titem.actor.unsetFlag(\"midi-qol\", wardFlagName)\n\t} else if (\n\t\targs[0].macroPass === \"postActiveEffects\" &&\n\t\targs[0].itemData?.system.school === \"abj\" &&\n\t\targs[0].itemData?.system.level > 0) {\n\t\tlet { wardStrength, wardStrengthMax } = getWardValue(actor);\n\t\tif (wardStrengthMax === undefined) return;\n\t\tlet newWardStrength = Math.min(wardStrength + args[0].spellLevel * 2, wardStrengthMax);\n\t\tconst speaker = ChatMessage.getSpeaker({ actor });\n\t\tChatMessage.create({\n\t\t\tcontent: `${args[0].itemData.name} gains ${args[0].spellLevel * 2} points to ${newWardStrength}/${wardStrengthMax}`,\n\t\t\tspeaker,\n\t\t});\n\t\tif (wardStrength !== newWardStrength) {\n\t\t\tupdateActorResource(actor, newWardStrength, wardStrengthMax);\n\t\t}\n\t} else if (args[0] === \"onUpdateActor\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tlet newHP = getProperty(lastArg.updates, \"system.attributes.hp.value\");\n\t\tlet oldHP = lastArg.targetActor.system.attributes.hp.value;\n\t\tif (newHP && oldHP && newHP < oldHP) {\n\t\t\tconst damage = oldHP - newHP;\n\t\t\tconst {wardStrengthField, wardStrengthMaxField} = getWardFieldNames(lastArg.sourceActor);\n\t\t\tif (!wardStrengthField) return;\n\t\t\tlet { wardStrengthMax, wardStrength } = getWardValue(actor);\n\t\t\tif (wardStrengthMax === undefined) return;\n\t\t\tconst absorbed = Math.min(damage, wardStrength ?? 0);\n\t\t\tif (absorbed) {\n\t\t\t\tnewHP = newHP + absorbed;\n\t\t\t\tconst speaker = ChatMessage.getSpeaker({ actor: lastArg.targetActor });\n\t\t\t\tChatMessage.create({\n\t\t\t\t\tcontent: `${lastArg.originItem.name} absorbs ${absorbed} of ${damage} points of damage.<br> Hp -> ${newHP}<br>Wardstength -> ${wardStrength - absorbed}`,\n\t\t\t\t\tspeaker\n\t\t\t\t});\n\t\t\t\tlastArg.updates.system.attributes.hp.value = newHP;\n\t\t\t\tif (wardStrengthField !== \"\") { // assume the target is a resource\n\t\t\t\t\tsetProperty(lastArg.updates, wardStrengthField, wardStrength - absorbed );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n} catch (err) {\n    console.error(`Arcane Ward ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.uPACrUoblqkB7daH"},"cf":{"id":"temp_qt0kn9os0vl"},"exportSource":{"world":"testWorld16","system":"dnd5e","coreVersion":"9.269","systemVersion":"1.6.3"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 2nd level, you can weave magic around yourself for protection. When you cast an abjuration spell of 1st level or higher, you can simultaneously use a strand of the spell's magic to create a magical ward on yourself that lasts until you finish a long rest. The ward has hit points equal to twice your wizard level + your Intelligence modifier. Whenever you take damage, the ward takes the damage instead. If this damage reduces the ward to 0 hit points, you take any remaining damage.</p><p>While the ward has 0 hit points, it can't absorb damage, but its magic remains. Whenever you cast an abjuration spell of 1st level or higher, the ward regains a number of hit points equal to twice the level of the spell.</p><p>Once you create the ward, you can't create it again until you finish a long rest.</p><p> </p><p>Midi-qol: This version does not use temphp so should sit comforatbly with other tiems that use temphp.<br /><strong>You must rename the feature to Arcane Ward when it is equipped on the actor</strong></p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"1","per":"lr"},"consume":{"type":"attribute","target":"","amount":0},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1659935114891,"modifiedTime":1663463832658,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"xoBdakNhFVVcf9Ah"}
{"name":"Bardic Inspiration (Valor) DND2.0.2 MQ10.0.10","type":"feat","img":"icons/skills/melee/unarmed-punch-fist.webp","effects":[{"_id":"GrZ2AlujZEWCppJt","changes":[{"key":"flags.midi-qol.optional.BardicInspiration.attack.all","mode":5,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInsiration.save.all","mode":5,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.check.all","mode":5,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.label","mode":5,"value":"Bardic Inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.skill.all","mode":2,"value":"1@scale.bard.inspiration","priority":20},{"key":"flags.midi-qol.optional.BardicInspiration.ac","mode":2,"value":"1@scale.bard.inspiration","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/melee/unarmed-punch-fist.webp","label":"Inspired","origin":"Item.dQvh9dejF0s0d9nk","transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"durationExpression":"","selfTarget":false,"selfTargetAlways":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.hpLNiGq7y67d2EHA"},"midi-qol":{"onUseMacroName":"","effectActivation":false,"forceCEOff":true,"forceCEOn":false},"betterRolls5e":{"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"use":true},"altValue":{"use":true}}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_qt0kn9os0vl"},"favtab":{"isFavorite":true},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"scene-packer":{"sourceId":"Item.7xFPEKTL9nGsRvtI","hash":"c71820d219a2e34c5def824fa9bece1a81c060ba"},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>You can inspire others through stirring words or music. To do so, you use a bonus action on your turn to choose one creature other than yourself within 60 feet of you who can hear you. That creature gains one Bardic Inspiration die, a d6. Once within the next 10 minutes, the creature can roll the die and add the number rolled to one ability check, attack roll, or saving throw it makes. The creature can wait until after it rolls the d20 before deciding to use the Bardic Inspiration die, but must decide before the GM says whether the roll succeeds or fails. Once the Bardic Inspiration die is rolled, it is lost. A creature can have only one Bardic Inspiration die at a time.</p>\n<p>You can use this feature a number of times equal to your Charisma modifier (a minimum of once).</p>\n<p>You regain any expended uses when you finish a long rest.</p>\n<p>Your Bardic Inspiration die changes when you reach certain levels in this class. The die becomes a d8 at 5th level, a d10 at 10th level, and a d12 at 15th level.</p>\n<h3><em>**Midi-qol note: The Other Formula is removed as it is not  required.<br /><br /></em><strong>You must ensure your bard has the dnd1.6 bard class not the older 1.5 version or scaling won't work.</strong></h3>","chat":"","unidentified":""},"source":"PHB pg. 53","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":2,"max":"max(1, @abilities.cha.mod)","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Bard 1","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926163,"modifiedTime":1663463839212,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"yRjCLtZU9MRo52s7"}
{"name":"Greatsword of Wounding 10.0.10","type":"weapon","img":"icons/magic/water/heart-ice-freeze.webp","effects":[{"_id":"BqzfX8p9NqtZ1Qxx","changes":[{"key":"macro.itemMacro","mode":0,"value":"0","priority":20}],"disabled":false,"duration":{"rounds":99,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/water/heart-ice-freeze.webp","label":"Wounded","origin":"Item.W4NUvzHSxGWmNa8Z","transfer":false,"flags":{"dae":{"stackable":"count","macroRepeat":"startEveryTurn","specialDuration":[],"transfer":false},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"dnd5e-helpers":{"rest-effect":"Ignore"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.items.JpwuGtFkfrGibQpP"},"itemacro":{"macro":{"data":{"_id":null,"name":"Greatsword of Wounding","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"//\nconst lastArg = args[args.length - 1];\nlet ttoken = await fromUuid(lastArg.tokenUuid);\nconst tactor = ttoken?.actor;\nconst item = await fromUuid(lastArg.origin);\nif (args[0] === \"on\") {\n  const sourceActor = item.parent;\n\n  const combatTime = game.combat.round + game.combat.turn / 100;\n  const lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n  lastArg.canWound = !game.combat || (combatTime !== lastTime);\n  if (game.combat && lastArg.canWound) {\n    let combatTime = game.combat.round + game.combat.turn / 100;\n    let lastTime = getProperty(sourceActor.data.flags, \"midi-qol.woundedTime\");\n    if (combatTime !== lastTime) {\n      setProperty(sourceActor.data.flags, \"midi-qol.woundedTime\", combatTime)\n    }\n  } \n  if (!lastArg.canWound) {\n    const stacks = getProperty(lastArg.efData, \"flags.dae.stacks\") || 1;\n    const label = lastArg.efData.label.replace(/\\s+\\(\\d*\\)/, \"\") +` (${stacks - 1})`;\n    Hooks.once(\"midi-qol.RollComplete\", () => {\n    tactor.updateEmbeddedDocuments(\"ActiveEffect\", [{ _id: lastArg.efData._id, \"flags.dae.stacks\": stacks - 1, \"label\": label }]);\n    });\n  }\n} else if (args[0] === \"each\") {\n  const woundCount = getProperty(lastArg.efData, \"flags.dae.stacks\");\n  if (!woundCount) return;\n  const saveType = \"con\";\n  const DC = 15;\n  const flavor = `${CONFIG.DND5E.abilities[saveType]} DC${DC} ${item?.name || \"\"}`;\n  let save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n  if (save >= DC) {\n    const effectsToDelete = tactor.effects.filter(ef => ef.data.origin === lastArg.origin).map(ef => ef.id);\n    ChatMessage.create({content: \"Save was made\"});\n    await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: tactor.uuid, effects: [lastArg.effectId] })\n  } else {\n    let damageRoll = new Roll(`${woundCount}d4[necrotic]`).roll(); // could be argument\n    new MidiQOL.DamageOnlyWorkflow(tactor, ttoken, damageRoll.total, \"necrotic\", [ttoken], damageRoll, { flavor: `Failed Save for ${item.name}`, itemData: item?.toObject(), itemCardId: \"new\", useOther: true })\n  }\n} else if (args[0] === \"off\") {\n  // do any clean up\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Greatsword of Wounding 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n  const lastArg = args[args.length - 1];\n  let ttoken = await fromUuid(lastArg.tokenUuid);\n  const tactor = ttoken?.actor;\n  const item = await fromUuid(lastArg.origin);\n  if (args[0] === \"on\") {\n    const sourceActor = item.parent;\n    const combatTime = game.combat.round + game.combat.turn / 100;\n    const lastTime = getProperty(sourceActor.flags, \"midi-qol.woundedTime\");\n    lastArg.canWound = !game.combat || (combatTime !== lastTime);\n    if (game.combat && lastArg.canWound) {\n      let combatTime = game.combat.round + game.combat.turn / 100;\n      let lastTime = getProperty(sourceActor.flags, \"midi-qol.woundedTime\");\n      if (combatTime !== lastTime) {\n        setProperty(sourceActor.flags, \"midi-qol.woundedTime\", combatTime)\n      }\n    } \n    if (!lastArg.canWound) {\n      const stacks = getProperty(lastArg.efData, \"flags.dae.stacks\") || 1;\n      const label = lastArg.efData.label.replace(/\\s+\\(\\d*\\)/, \"\") +` (${stacks - 1})`;\n      Hooks.once(\"midi-qol.RollComplete\", () => {\n      tactor.updateEmbeddedDocuments(\"ActiveEffect\", [{ _id: lastArg.efData._id, \"flags.dae.stacks\": stacks - 1, \"label\": label }]);\n      });\n    }\n  } else if (args[0] === \"each\") {\n    const woundCount = getProperty(lastArg.efData, \"flags.dae.stacks\");\n    if (!woundCount) return;\n    const saveType = \"con\";\n    const DC = 15;\n    const flavor = `${CONFIG.DND5E.abilities[saveType]} DC${DC} ${item?.name || \"\"}`;\n    let save = (await tactor.rollAbilitySave(saveType, { flavor, fastForward: true })).total;\n    if (save >= DC) {\n      const effectsToDelete = tactor.effects.filter(ef => ef.origin === lastArg.origin).map(ef => ef.id);\n      ChatMessage.create({content: \"Save was made\"});\n      await MidiQOL.socket().executeAsGM(\"removeEffects\", { actorUuid: tactor.uuid, effects: [lastArg.effectId] })\n    } else {\n      let damageRoll = await new Roll(`${woundCount}d4[necrotic]`).roll({async: true}); // could be argument\n      new MidiQOL.DamageOnlyWorkflow(tactor, ttoken, damageRoll.total, \"necrotic\", [ttoken], damageRoll, { flavor: `Failed Save for ${item.name}`, itemData: item?.toObject(false), itemCardId: \"new\", useOther: true })\n    }\n  } else if (args[0] === \"off\") {\n    // do any clean up\n  }\n} catch (err)  {\n    console.error(`Greatsword of Wounding ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":false,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p><em>(Requires attunement)</em></p>\n<p>Hit points lost to this weapon's damage can be regained only through a short or long rest, rather than by regeneration, magic, or any other means.</p>\n<p>Once per turn, when you hit a creature with an attack using this magic weapon, you can wound the target. At the start of each of the wounded creature's turns, it takes 1d4 necrotic damage for each time you've wounded it, and it can then make a DC 15 Constitution saving throw, ending the effect of all such wounds on itself on a success. Alternatively, the wounded creature, or a creature within 5 feet of it, can use an action to make a DC 15 Wisdom (Medicine) check, ending the effect of such wounds on it on a success.<br /><br />This version uses an item amcro and enforces the once per turn rule.</p>","chat":"","unidentified":""},"source":"DMG pg. 207","quantity":1,"weight":6,"price":2000,"attunement":1,"equipped":false,"rarity":"","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d6 + @mod","slashing"]],"versatile":""},"formula":"1d4","save":{"ability":"con","dc":15,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"martialM","baseItem":"","properties":{"amm":false,"hvy":true,"fin":false,"fir":false,"foc":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":true,"ver":false,"ada":false,"mgc":false,"sil":false},"proficient":false,"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926136,"modifiedTime":1663463757143,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"ybyG4HZzSXOzQwBm"}
{"name":"Regeneration 10.0.10","type":"feat","img":"icons/skills/wounds/anatomy-organ-heart-red.webp","effects":[{"_id":"LBpB0JVv3bMLRt6L","changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\ndamageRoll=10,\ndamageType=healing,\ncondition=@attributes.hp.value > 0 && @attributes.hp.value < @attributes.hp.max","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/skills/wounds/anatomy-organ-heart-red.webp","label":"Regeneration","origin":"Item.ZjFot09sCtfAtJgi","transfer":true,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":true,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.monsterfeatures.Av7H0ymGdPeTsnwV"},"midi-qol":{"onUseMacroName":"","effectActivation":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_1xw0kahfmt1","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<section class=\"secret\"><p>The {creature} regains <strong>10 hit points</strong> at the start of its turn if it has at least <strong>1 hit point</strong>.</p></section><p>The {creature} regains <strong>10 hit points</strong> at the start of its turn.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":null,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":0,"per":null},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"heal","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661995926161,"modifiedTime":1663464057871,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"yhfoAjugVP69EdDZ"}
{"name":"Greater Invisibility 10.0.10 - Core","type":"spell","img":"icons/magic/air/fog-gas-smoke-swirling-gray.webp","effects":[{"_id":"GoUSbGdrl7G0I89N","flags":{"dae":{"stackable":"none","specialDuration":[],"macroRepeat":"none","transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null,"displayTemp":false,"hostile":false,"onlyOnce":false},"core":{"statusId":""}},"changes":[{"key":"StatusEffect","mode":0,"value":"invisible","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/air/fog-gas-smoke-swirling-gray.webp","label":"Invisible","origin":"Actor.Y7foSiLRLo7ysFr9.Item.MtbkgRT7nopCAnpB","tint":null,"transfer":false}],"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Item.MtbkgRT7nopCAnpB"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t1","animName":"","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","rangedOptions":{"rangeDmgType":""},"color":"n1","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":false,"file":"","delay":100,"volume":0.25}},"selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""}},"cf":{"id":"temp_0hvf80hl1zcf","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"system":{"description":{"value":"<p>A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p><p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p><p> * This version of Greater Invisibility uses the core Invisible status effect and interacts with foundry vision modes</p>","chat":"","unidentified":""},"source":"PHB pg. 254","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"ill","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An eyelash encased in gum arabic","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""},"attributes":{"spelldc":10}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1661857202914,"modifiedTime":1663463720857,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"ywq9dJw3L5ZWGvyk"}
{"name":"Hunter's Mark 10.0.13","type":"spell","img":"icons/magic/perception/eye-ringed-glow-angry-small-red.webp","effects":[{"_id":"9eOiLd1FGoDJ9eLu","changes":[{"key":"flags.dae.onUpdateSource","mode":0,"value":"Hunter's Mark","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":3600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/perception/eye-ringed-glow-angry-small-red.webp","label":"Marked","origin":"Item.SU8tsBLWTXP7NUdb","tint":null,"transfer":false,"flags":{"dae":{"stackable":"none","macroRepeat":"none","specialDuration":[],"transfer":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"radius":null,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"hostile":false,"onlyOnce":false,"displayTemp":false},"core":{"statusId":""}}},{"_id":"1u2srq7ti2lvguvx","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/perception/eye-ringed-glow-angry-small-red.webp","label":"Hunter's Mark","origin":"Actor.DMTSWfQs8whM5FtE.Item.sHFeVwJfRCfoEmZt","transfer":true,"flags":{"core":{"statusId":""},"dae":{"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true,"selfTarget":false,"selfTargetAlways":false},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.0xmXiPiuYws1OGcX"},"midi-qol":{"onUseMacroName":"","effectActivation":false,"forceCEOff":true,"forceCEOn":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Hunter's Mark","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"if (actor.data?.flags?.dae?.onUpdateTarget && args[0].hitTargets.length > 0) {\n\tconst isMarked = actor.data.flags.dae.onUpdateTarget.find(flag => flag.flagName === \"Hunter's Mark\" && flag.sourceActorUuid === args[0].hitTargets[0].actor.uuid);\n\tif (isMarked) {\n\t        let damageType = args[0].item.data.damage.parts[0][1];\n\t        const diceMult = args[0].isCritical ? 2: 1;\n\t        return {damageRoll: `${diceMult}d6[${damageType}]`, flavor: \"Hunters Mark Damage\"};\n\t}\t\n}\nreturn {};","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Hunter's Mark","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n\tif (actor.flags?.dae?.onUpdateTarget && args[0].hitTargets.length > 0) {\n\tconst isMarked = actor.flags.dae.onUpdateTarget.find(flag => \n\t\t\tflag.flagName === \"Hunter's Mark\" && flag.sourceTokenUuid === args[0].hitTargetUuids[0]);\n\tif (isMarked) {\n\t        let damageType = args[0].item.system.damage.parts[0][1];\n\t        const diceMult = args[0].isCritical ? 2: 1;\n\t        return {damageRoll: `${diceMult}d6[${damageType}]`, flavor: \"Hunters Mark Damage\"};\n\t}\t\n}\nreturn {};\n} catch (err) {\n\t    console.error(`${args[0].itemData.name} - Hunter's Mark ${version}`, err);\n\t\treturn {}\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"cf":{"id":"temp_qt0kn9os0vl","color":"#000000"},"midiProperties":{"nodam":false,"halfdam":false,"fulldam":false,"rollOther":false,"critOther":false,"concentration":false,"magicdam":false,"magiceffect":false,"toggleEffect":false,"selfEffect":false},"scene-packer":{"hash":"8350edce50cedf34fd5aef417adc0822a9555224","sourceId":"Item.AL7ztHAjsGRTlpS9"}},"system":{"description":{"value":"<p>You choose a creature you can see within range and mystically mark it as your quarry. Until the spell ends, you deal an extra {@dice 1d6} damage to the target whenever you hit it with a weapon attack, and you have advantage on any Wisdom (Perception) or Wisdom (Survival) check you make to find it. If the target drops to 0 hit points before this spell ends, you can use a bonus action on a subsequent turn of yours to mark a new creature.</p>","chat":"","unidentified":""},"source":"PHB pg. 251","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":null},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":1,"school":"div","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.286","createdTime":1661995926143,"modifiedTime":1664712674060,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"zBDXT5vL6BZtsOCG"}
{"name":"Deflect Missiles Damage Reduction - 10.0.10","type":"feat","img":"icons/skills/ranged/arrow-flying-white-blue.webp","effects":[{"label":"Deflect Missiles Damage Reduction","icon":"icons/skills/ranged/arrow-flying-white-blue.webp","origin":"Actor.0ZfyOqEsBu3f7XHA.Item.rSHBWuQxEHqDDzZV","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"DOSPzye2onyMPsWo","changes":[{"key":"flags.midi-qol.DR.rwak","mode":2,"value":"1d10 + @abilities.dex.mod + @classes.monk.levels","priority":20}],"tint":null,"transfer":true,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"flags":{"core":{"sourceId":"Compendium.dnd5e.classfeatures.mzweVbnsJPQiVkAe"},"scene-packer":{"hash":"a16e29b94cd274985e66c828e1b9e6c5c5b11f60","sourceId":"Item.wVzlCEsaWf13xJzp"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"cf":{"id":"temp_qt0kn9os0vl"},"itemacro":{"macro":{"data":{"_id":null,"name":"Deflect Missiles Damage Reduction - 0.9.63","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const effect =  args[0].actorData.effects.find(ef=>ef.data.label === \"Deflect Missiles Damage Reduction\");\nconst change = effect.data.changes.find(change => change.key === \"flags.midi-qol.DR.rwak\");\nconst dr = Number.isNumeric(change.value) ? Number(change.value) : 0;\nif (dr >= args[0].workflowOptions.damageTotal) {\n\tconst throwBack = await Dialog.confirm({\n      \t\ttitle: game.i18n.localize(\"Return Missile\"),\n      \t\tcontent: `<p>Throw the missile back at the attacker</p>`,\n\t    });\n\tif (!throwBack) return;\n\tlet theItem = await fromUuid(args[0].workflowOptions.sourceAmmoUuid ?? args[0].workflowOptions.sourceItemUuid); // use the ammo if there is one otherwise the weapon\n\tconst theItemData = duplicate(theItem.data);\n\ttheItemData.data.range.value = 20;\n\ttheItemData.data.range.long = 40;\n\ttheItemData.actionType = \"rwak\";\n\ttheItemData.data.consume = args[0].itemData.data.consume;\n\n\tconst tokenOrActor = await fromUuid(args[0].actorUuid);\n\tconst theActor = tokenOrActor.actor ?? tokenOrActor;\n\tlet ownedItem = new CONFIG.Item.documentClass(theItemData, { parent: theActor });\n\n\tconst targetTokenOrActor = await fromUuid(args[0].workflowOptions.sourceActorUuid);\n\tconst targetActor = targetTokenOrActor.actor ?? targetTokenOrActor;\n\tconst target = targetActor.token ?? targetActor.getActiveTokens()?.shift();\n\n\tawait MidiQOL.completeItemRoll(ownedItem, {targetUuids: [target.uuid ?? target.document.uuid], workflowOptions: {notReaction: true, autoConsumeResource: \"both\"}});\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Deflect Missiles Damage Reduction - 10.0.10","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.10\";\ntry {\n\tconst effect =  args[0].actorData.effects.find(ef=>ef.label === \"Deflect Missiles Damage Reduction\");\n\tconst change = effect.changes.find(change => change.key === \"flags.midi-qol.DR.rwak\");\n\tconst dr = (await new Roll(change.value, actor.getRollData()).evaluate({async: true})).total;\n\tif (dr >= args[0].workflowOptions.damageTotal) {\n\t\tconst throwBack = await Dialog.confirm({\n\t\t\t\ttitle: game.i18n.localize(\"Return Missile\"),\n\t\t\t\tcontent: `<p>Throw the missile back at the attacker</p>`,\n\t\t\t});\n\t\tif (!throwBack) return;\n\t\tlet theItem = await fromUuid(args[0].workflowOptions.sourceAmmoUuid ?? args[0].workflowOptions.sourceItemUuid); // use the ammo if there is one otherwise the weapon\n\t\tconst theItemData = theItem.toObject();\n\t\ttheItemData.system.range.value = 20;\n\t\ttheItemData.system.range.long = 40;\n\t\ttheItemData.actionType = \"rwak\";\n\t\ttheItemData.system.consume = args[0].itemData.system.consume;\n\n\t\tconst tokenOrActor = await fromUuid(args[0].actorUuid);\n\t\tconst theActor = tokenOrActor.actor ?? tokenOrActor;\n\t\tlet ownedItem = new CONFIG.Item.documentClass(theItemData, { parent: theActor });\n\n\t\tconst targetTokenOrActor = await fromUuid(args[0].workflowOptions.sourceActorUuid);\n\t\tconst targetActor = targetTokenOrActor.actor ?? targetTokenOrActor;\n\t\tconst target = targetActor.token ?? targetActor.getActiveTokens()?.shift();\n\t\tawait MidiQOL.completeItemRoll(ownedItem, {targetUuids: [target.uuid ?? target.document.uuid], workflowOptions: {notReaction: true, autoConsumeResource: \"both\"}});\n\t}\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Deflect Missile ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"selfEffect":false},"spellTemplateManager":{"stmData":{"ignoreDuration":false,"spellTexture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true}}},"system":{"description":{"value":"<p>Starting at 3rd level, you can use your reaction to deflect or catch the missile when you are hit by a ranged weapon attack. When you do so, the damage you take from the attack is reduced by 1d10 + your Dexterity modifier + your monk level.</p><p>If you reduce the damage to 0, you can catch the missile if it is small enough for you to hold in one hand and you have at least one hand free. If you catch a missile in this way, you can spend 1 @Compendium[dnd5e.classfeatures.10b6z2W1txNkrGP7]{Ki} point to make a ranged attack with the weapon or piece of ammunition you just caught, as part of the same reaction. You make this attack with proficiency, regardless of your weapon proficiencies, and the missile counts as a monk weapon for the attack, which has a normal range of 20 feet and a long range of 60 feet.</p><p><em> Midi-qol.</em></p><p><em>Only functions if midi-qol reaction processing is enabled.</em></p><p><em><strong>When first equipped on an actor set the item usage to consume ki points.</strong><br />You may rename the effect as you wish.</em></p>","chat":"","unidentified":""},"source":"PHB pg. 78","activation":{"type":"reactiondamage","cost":1,"condition":"Can be thrown back using 1 ki point"},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":20,"long":60,"units":"ft"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"charges","target":"","amount":1},"ability":"dex","actionType":"other","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Monk 3","recharge":{"value":null,"charged":false},"attunement":0},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.2","coreVersion":"10.285","createdTime":1659575258128,"modifiedTime":1663463848224,"lastModifiedBy":"devnIbfBHb74U9Zv"},"folder":null,"sort":0,"ownership":{"default":0,"devnIbfBHb74U9Zv":3},"_id":"ztjXiC2pJRxFo1Wz"}
